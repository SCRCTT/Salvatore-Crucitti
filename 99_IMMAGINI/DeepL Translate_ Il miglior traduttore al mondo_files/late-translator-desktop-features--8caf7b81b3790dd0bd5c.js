"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[1738],{29039:function(e,t,r){r.d(t,{D:function(){return l}});var n=r(52793),a=r(40977);let o=async e=>{await r.g.store.dispatch((0,n.C1)({dapEventId:a.qb.CLEARANCE_TOKEN_REQUESTED,dapEventData:{clearanceTokenRequestedData:e}}))};var i=r(12959),s=r(67010);async function l(){let e;let t=Date.now(),r={status:0,duration:0};try{let e=new URL("https://clearance.deepl.com/token");i.Z.fakeBot&&e.searchParams.set("max_score","1");let t=await Promise.race([fetch(e.href,{credentials:"include",mode:"cors"}),new Promise((e,t)=>setTimeout(()=>t(new s.V(s.T.CLEARANCE_FETCH_FAILURE,"clearance timeout")),5e3))]);if(r.status=t.status||0,!t.ok)throw Error(`${t.status}`)}catch(t){console.warn(t.message),e=new s.V(s.T.CLEARANCE_FETCH_FAILURE,`Error happens while fetching clearance token: ${t.message}`)}if(r.duration=Date.now()-t,e&&(r.error=e.message),o(r),e)throw e;return r}},7130:function(e,t,r){r.d(t,{$c:function(){return s},JY:function(){return o},Nw:function(){return l},lx:function(){return i},xb:function(){return a}});var n=r(7766);let a=e=>0===e.trim().length,o=e=>!e.match(n.Nq)&&!e.match(n._s),i=e=>{let t=new Blob([e],{type:"text/plain;charset=UTF-8"});return t.size},s=e=>i(e)<=n.mB,l=e=>e.replace(n.xk,"").replace(n.BB," ").replace(n.Gk," ").replace(n.Nq,"").replace(n._s,"").trim()},7766:function(e,t,r){var n,a,o,i;r.d(t,{$G:function(){return s},BB:function(){return v},CS:function(){return C},DJ:function(){return c},EN:function(){return x},EX:function(){return m},Fe:function(){return E},Gk:function(){return T},Gr:function(){return L},Ju:function(){return h},LQ:function(){return _},Nq:function(){return S},UJ:function(){return p},Wn:function(){return l},_s:function(){return f},mB:function(){return g},nw:function(){return d},w0:function(){return u},xk:function(){return y}});let s=650,l=10,c=2592e3,u=20,g=1024,d=3,p=5,m="glossaryHasAsyncPending",h="glossary",S=RegExp("[\\x00-\\x1F\\x80-\\x9F\\x7F\\xAD]","g"),f=RegExp("[？。．！\xb1]","g"),T=RegExp("\\s+","g"),y=RegExp("\\r?\\n","g"),v=RegExp("\\t","g"),E=((n={}).ActiveGlossaryId="LMT_customization.activeGlossaryId",n.DialogShown="LMT_customization.hasDialogBeenShown",n.EnterpriseUser="LMT_customization.glossaryEnterprise",n.FreeUser="LMT_customization.glossary",n.IsEnabled="LMT_customization.isEnabled",n.DataMigration="LMT_customization.dataMigration",n),x=((a={}).Entries="\n",a.Languages=">",a.SourceAndTarget="	",a),C=((o={}).Comma=",",o.Semicolon=";",o.Tab="	",o),_=((i={})[i.NoSession=1]="NoSession",i[i.InvalidSession=2]="InvalidSession",i[i.InactiveSubscription=3]="InactiveSubscription",i[i.LanguagePairSetIdOutdated=9]="LanguagePairSetIdOutdated",i),w=!1;w=!0;let L=w},78025:function(e,t,r){r.d(t,{q:function(){return n}});let n=e=>{if(e.includes("-")){let t=e.split("-");e=`${t[0].toLowerCase()}-${t[1].toUpperCase()}`}else e=e.toLowerCase();return e}},50706:function(e,t,r){r.d(t,{Z:function(){return O}});var n=r(4769),a=r(7766),o=r(7130),i=r(78025);let s=function(e){return void 0===e&&(e=e=>e),(t,r)=>{let n=e(t),a=e(r);return n<a?-1:n>a?1:0}},l=e=>(0,n.Z)(e).sort(s(e=>e.textSource)),c=function(e,t){var r,a;void 0===t&&(t="");let o=t?(void 0===(r=t)&&(r=""),void 0===(a=e=>e.textSource.toLowerCase())&&(a=e=>e),(e,t)=>{let n=a(e),o=a(t);return n.localeCompare(o,r)}):s(e=>e.textSource.toLowerCase());return(0,n.Z)(e).sort(o)},u=function(e,t){return void 0===t&&(t=l),t(e).map(e=>`${e.textSource}${a.EN.SourceAndTarget}${e.textTarget}`).join(a.EN.Entries)},g=e=>e?e.split(a.EN.Entries).map(e=>{let t=e.split(a.EN.SourceAndTarget);return{textSource:t[0],textTarget:t[1]}}):[],d=e=>Array.isArray(e)?e.flatMap(e=>e.entries.map(t=>({langSource:e.langSource,langTarget:e.langTarget,textSource:t.textSource,textTarget:t.textTarget}))):[],p=e=>(e||[]).reduce((e,t)=>e+t.entries.length,0),m=function(e,t,r){return void 0===e&&(e=[]),e.find(e=>e.langSource===t&&e.langTarget===r)},h=e=>{let{id:t,langSource:r,langTarget:a}=e;return{id:t,langSource:r,langTarget:a,entries:(0,n.Z)(e.entries)}},S=(e,t,r)=>{let n=m(e,t,r);return n?h(n):null},f=function(e){return void 0===e&&(e=[]),e.map(e=>h(e))},T=(e,t)=>e.entries.some(t),y=(e,t,r,n)=>{let a=m(e,t,r);return!!a&&T(a,e=>e.textSource===n)},v=(e,t,r,n,a)=>{let o=m(e,r,n);return!!o&&T(o,e=>e!==t&&e.textSource===a)},E=(e,t,r)=>{let n=e.entries.find(e=>e.textSource===t);n&&(n.textTarget=r)},x=function(e,t){void 0===e&&(e=[]);let{langSource:r,langTarget:n}=t;return e.map(e=>e.langSource===r&&e.langTarget===n?t:e)},C=function(e,t){void 0===e&&(e=[]);let{langSource:r,langTarget:n}=t;return e.filter(e=>e.langSource!==r||e.langTarget!==n)},_=function(e,t,r){return void 0===e&&(e=[]),e.filter(e=>e.textSource!==t||e.textTarget!==r)},w=e=>{let t=e.split(a.EN.Languages);return{langSource:t[0],langTarget:t[1]}},L=(e,t)=>`${e}${a.EN.Languages}${t}`,A=e=>{let t;switch(e){case a.CS.Comma:t="comma";break;case a.CS.Semicolon:t="semicolon";break;case a.CS.Tab:t="tab";break;default:t=""}return t},b=(e,t)=>{let r=e;for(;(0,o.lx)(r)>t;)r=r.slice(0,-1);return r},R=RegExp("^ \\((\\d+)\\)$"),I=(e,t)=>{let r=b(t,a.mB-20);if(e.includes(r)){let t=0;e.forEach(e=>{if(e.startsWith(r)){let n=e.substr(r.length),a=n.match(R);a&&a[1]&&(t=Math.max(t,Number(a[1])))}}),r=`${r} (${t+1})`}return r},D=e=>{var t;e=null!==(t=e)&&void 0!==t?t:"";let r=e.lastIndexOf(".");return r<0?e:e.substr(0,r)};var M=r(52644);let N=function(){function e(e){let t=e.getActiveLangContext(),r=(0,i.q)(t.getSourceLang()),n=(0,i.q)(t.getTargetLang());return{langSource:r,langTarget:n}}return{convertLangPairSetsToEntries:d,convertToLangSourceAndLangTarget:w,convertToLangPair:L,correctLangFormat:i.q,getAllEntriesCount:p,getElementPathClasses:function(e){let t=[];for(;e;)t.push.apply(t,(0,n.Z)(e.classList)),e=e.parentElement;return t},getFormattedDate:function(e,t){void 0===e&&(e=new Date),void 0===t&&(t=defaultDateSeparator);let r=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return[r,n,a].join(t)},getFormattedTime:function(e,t,r){void 0===e&&(e=new Date),void 0===t&&(t=":"),void 0===r&&(r=!1);let n=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),o=[n,a];if(r){let t=e.getSeconds().toString().padStart(2,"0");o.push(t)}return o.join(t)},getLangPairSet:m,getLangPairSetCopy:S,getLangPairSetForCurrentTranslatorLanguages:function(t,r){let n;let{langSource:a,langTarget:o}=e(r);return a&&o&&(n=m(t,a,o)),n},getLangPairSetsCopy:f,getPrioritizedSourceLangsAndTargetLang:function(e){let t=e.getPrioritizedSourceLangs().reverse(),r=(0,i.q)(t[0]),n=(0,i.q)(t[1]),a=(0,i.q)(e.getSelectedTargetLang());return{prioritizedLangs:[r,n],targetLang:a}},getSeparatorText:A,getTranslatorLanguages:e,getUniqueFilename:I,hasTextInputValidChars:o.JY,isFatalError:function(e){let{code:t}=e;return t===a.LQ.NoSession||t===a.LQ.InvalidSession||t===a.LQ.InactiveSubscription},isTextInputEmpty:o.xb,isTextWithinSizeLimit:o.$c,overwriteTermbaseRPCsWithEmptyFunctions:function(e){Object.keys(e).forEach(t=>{e[t]=()=>{}})},parseGlossaryEntriesFromString:g,removeEntry:_,removeFileEnding:D,removeLangPairSet:C,replaceEntry:E,replaceLangPairSet:x,sanitizeTextInput:o.Nw,serializeGlossaryEntries:u,serializeLangPairSetEntries:function(e){return u(e.entries)},sortLangPairSetEntries:l,sortLangPairSetEntriesCaseInsensitive:c,sortLangPairSets:function(e,t){var r,n;return r=t=>e(t),n=t=>e(t),void 0===r&&(r=e=>e),void 0===n&&(n=e=>e),t.sort((e,t)=>{let a=r(e.langSource),o=n(e.langTarget),i=r(t.langSource),s=n(t.langTarget),l=`${a}${o}`,c=`${i}${s}`;return l<c?-1:l>c?1:0})},sortLangPairSetsByLangCode:function(e){return e.sort((e,t)=>e.langSource<t.langSource?-1:e.langSource>t.langSource?1:e.langTarget<t.langTarget?-1:e.langTarget>t.langTarget?1:0)},sortGlossaries:function(e,t){return e.sort((e,r)=>e.name.localeCompare(r.name,null!=t?t:"en",{numeric:!0})),e},useOnClickOutside:function(e,t,r){e(()=>{let e=e=>{!t.current||t.current.contains(e.target)||r(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[t,r])},wouldCreatedEntryOverwrite:y,wouldUpdatedEntryOverwrite:v,canEditGlossary:function(e){let t=[M.M.Admin,M.M.Editor];return t.includes(e)},isGlossaryAdmin:function(e){return e===M.M.Admin}}}();var O=N},68140:function(e,t,r){let n;var a=r(29039);let o=-1,i=()=>new Promise(e=>{let t=Date.now(),r=t-o>=24e4;!n||r?(o=Date.now(),n=(0,a.D)().then(()=>e())):n.then(()=>e())}),s=async(e,t,r)=>{let n={method:"POST",body:e,headers:{"Content-type":"application/json; charset=UTF-8"},credentials:"include",signal:r},a=`${t?"https://camellia-pro.www.deepl.com":"https://camellia-free.www.deepl.com"}/v1/completion`;return i().then(()=>fetch(a,n)).then(async e=>{if(!e.ok){let t=await e.json();throw Error(`${t.error.message} (error code: ${t.error.code})`,{cause:t})}return await e.json()}).then(e=>({requestId:e.id,result:e.result}))};function l(e,t,r){void 0===r&&(r=!1);let{profileKey:n,input:a,profileOverride:o}=e,i={key:n,input:a};if(o){let{model:e,prompts:t,temperature:r,maxTokens:n,shrinkMaxTokens:a}=o;i.devProfile={Model:null!=e?e:"text-davinci-003",Prompts:Array.isArray(t)?t:[t],Temperature:null!=r?r:0,MaxTokens:n,ShrinkMaxTokens:a}}let l=JSON.stringify({id:1e4*Math.round(1e4*Math.random())+1,jsonrpc:"2.0",method:"text",params:i});return s(l,r,t)}function c(e,t,r){void 0===r&&(r=!1);let{profileKey:n,input:a,chatMessages:o,profileOverride:i}=e,l={key:n,input:a,messages:o};if(i){let{instructionMessages:e,model:t,temperature:r,maxTokens:n}=i;l.devProfile={Model:null!=t?t:"gpt-3.5-turbo",PromptMessages:e,Temperature:null!=r?r:0,MaxTokens:n}}let c=JSON.stringify({id:1e4*Math.round(1e4*Math.random())+1,jsonrpc:"2.0",method:"chat",params:l});return s(c,r,t)}"undefined"!=typeof window&&(window.getTextCompletion=l),"undefined"!=typeof window&&(window.getChatCompletion=c);var u=r(98808);r(61606).Z.defineType("/translator/common/llmServices",[],()=>{let e=(0,u.f)(),t=(0,u.f)();return{factoryChatCompletion:t=>async function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];let i=await c.apply(void 0,[r].concat(a));return e(t,r,i),i},factoryTextCompletion:e=>async function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];let i=await l.apply(void 0,[r].concat(a));return t(e,r,i),i},onChatCompletion:e,onTextCompletion:t}})},5061:function(e,t,r){var n=r(61606),a=r(30171),o=r(98808);n.Z.defineType("/translator/common/removeFormatting",["/translator/core/domElements","/translator/core/textareas"],(e,t)=>{let r=(0,o.f)(),n=(0,a.S3)(!1),i=()=>{let e=!t.getSourceHtml()&&!t.getSourceText(),r=t.getSourceDTextarea();if(!r){n(!1);return}let a=function(e){let t=e.hasAnyFormatting();return t}(r);a&&!e?n(!0):n(!1)};return t.onSourceTextChanged.push(i),i(),{removeFormatting:()=>{n()&&(t.setSourceTextExplicitly(t.getSourceText(),"update",!0),n(!1),r(),e.sourceEdit.blur(),e.sourceEdit.focus())},onFormattingRemoved:r,shouldBeEnabled:n}})},8196:function(e,t,r){r.d(t,{K:function(){return s}});var n=r(77396),a=r(98808),o=r(61606),i=r(67974);let s=1900;o.Z.defineType("/translator/common/share",["/translator/core/languageManagement","/translator/core/domElements","/translator/core/textareas","/translator/core/updateSourceSentences","/translator/environment/localizedTexts","/translator/core/config","/translator/core/predefinedState","/translator/core/retranslationServices","/translator/common/shareUrl","/translator/environment/releaseGroups"],(e,t,r,o,s,l,c,u,g)=>{let d=(0,n.$)(),p=l.get("isApp")||l.get("CONFIG__IS_PRO"),m=p||c.isInPredefinedState()&&!c.isPredefinedStateEmpty();function h(){let e=window.location.href;e.search("#")>=0&&window.history.pushState(null,"",e.split("#",2)[0])}function S(e){let t=e.split("#",2)[1];if(!t)return;let r=decodeURIComponent(t).replace(/[\\]./g,e=>"\\\\"===e?"{_BACKSLASH_}":e).replace(/([^\\])[/]/g,"$1{_DELIM_PART_}").replace(/([^\\])[|]/g,"$1{_DELIM_SENTENCE_}").replace(/\\([/|])/g,"$1").replace(/{_BACKSLASH_}/g,"\\"),n=r.split("{_DELIM_PART_}"),[a,o,...i]=2===n.length?[n[0],n[0],n[1]]:n;if(i.length){if(i[0].includes("{_DELIM_SENTENCE_}")){let e=[],t=[];i.forEach(r=>{let[n,a]=r.split("{_DELIM_SENTENCE_}",2);e.push(n),t.push(a)}),c.applyPredefinedState({sourceLangcode:a,targetLangcode:o,sourceChains:e.map(e=>[e]),targetChains:t.map(e=>[e]),revert:[d]}),setTimeout(v)}else c.applyPredefinedState({sourceLangcode:a,targetLangcode:o,sourceText:i[0]})}}function f(e){let t=!1;return e.targetSentences.forEach(e=>{let r=e.getTranslation();r&&(t=t||r.isTargetTextPredefined()||e.getText().trim()!==(r.getTargetText()||"").trim())}),t}function T(){u.retranslateEverything()}function y(){if(m||r.getSourceText().length>g.MAX_TEXT_LENGTH||window.location.pathname.endsWith("/files")){h();return}let t=e.getActiveLangContext();if(f(t)){h();return}let{url:n,shortened:a}=g.createShareUrlByLangContext(e.getActiveLangContext(),!1);if(a)h();else if(c.isInPredefinedState());else{let e=n.replace(/%20/g," ");window.history.replaceState(null,"",e)}}function v(){var e,r,n,a;d();let o=document.createElement("div");o.classList.add("lmt__altered_shared_text_hint"),o.setAttribute("data-testid","translator-altered-text-hint"),o.innerHTML=`<p> ${s.get("translator/share.editedTranslationHint","The translation has been edited.")} </p><div class='lmt__altered_shared_text_hint__buttons'><button> ${s.get("translator/share.editedTranslation_revertButton","Change back to the original version")} </button><button> ${s.get("translator/share.editedTranslation_acceptButton","Accept changes")} </button></div>`,null===(e=o.querySelector("button:first-of-type"))||void 0===e||e.addEventListener("click",e=>{T(),d()}),null===(r=o.querySelector("button:last-of-type"))||void 0===r||r.addEventListener("click",e=>{d()}),t.targetEditOuterContainer.appendChild(o);let i=document.createElement("div");i.classList.add("lmt__mobile_altered_shared_text_hint"),i.innerHTML=`<p> ${s.get("translator/share.editedTranslationHint","The translation has been edited.")} </p><div class='lmt__mobile_altered_shared_text_hint__buttons'><button> ${s.get("translator/share.editedTranslation_revertButton","Change back to the original version")} </button><button> ${s.get("translator/share.editedTranslation_acceptButton","Accept changes")} </button></div>`,null===(n=i.querySelector("button:first-of-type"))||void 0===n||n.addEventListener("click",e=>{T(),d()}),null===(a=i.querySelector("button:last-of-type"))||void 0===a||a.addEventListener("click",e=>{d()}),t.targetEditOuterContainer.appendChild(i),d.push(()=>{o.style.opacity="0",i.style.opacity="0",setTimeout(()=>{var e,t;null===(e=o.parentElement)||void 0===e||e.removeChild(o),null==i||null===(t=i.parentElement)||void 0===t||t.removeChild(i)},400)})}window._dbg_createTextUrl=function(t){return void 0===t&&(t=!1),createShareUrl(e.getActiveLangContext(),t)};let E=(0,a.f)();return window.onhashchange&&E.push(window.onhashchange),E.push(()=>{S(window.location.href)}),window.onhashchange=E,r.onSourceTextChanged.push(()=>{(0,i.wx)("share_refresh",y,500)}),o.onSourceSentencesChanged.push(()=>{(0,i.wx)("share_refresh",y,500)}),r.onTargetTextChanged.push(()=>{(0,i.wx)("share_refresh",y,500)}),c.isInPredefinedState()&&c.isPredefinedStateEmpty()&&window.location.hash&&S(window.location.href),{targetTextHasBeenAltered:f}})},46469:function(e,t,r){r.r(t),r.d(t,{default:function(){return el},enhanceTranslator:function(){return es}});var n=r(19783),a=r.n(n),o=r(65541),i=r(30171),s=r(56141),l=r.n(s);function c(e,t,r,n){let{callWithInitialValue:a=!0,_verbose:o=!1,_deepEqual:i=!1}=void 0===n?{}:n,s=a?void 0:t(e.getState());function c(){let n=t(e.getState());(i?l()(n,s):n!==s)&&(o&&console.debug({nextState:n,currentState:s}),r(s=n))}let u=e.subscribe(c);return c(),u}var u=r(84175),g=r(38340),d=r(80443),p=r(55658);let m=(e,t,r)=>{e.features.define(o.n,["/translator/web/translationSaving","/translator/core/textareas","/translator/common/clearText","/translator/environment/sendAnalytics"],(e,n,o,s)=>{let{send:l}=s,m=(0,i.S3)(!1);r((0,d.Hw)()),c(t,e=>e.savedTranslations.currentSavedTranslationId,()=>{let r=t.getState().savedTranslations.currentSavedTranslationId;if(e.isSavedTranslationApplied(!r),r){let n=t.getState().savedTranslations.savedTranslations.find(e=>e.id===r);n&&(e.isSelectingTranslation(!0),e.applyTranslatorState(n.serializedTranslatorState),setTimeout(()=>e.isSelectingTranslation(!1),200))}},{callWithInitialValue:!1}),c(t,e=>e.savedTranslations.shouldClearText,()=>{let e=t.getState().savedTranslations.shouldClearText;e&&(o.clear(),r((0,d.p_)(!1)))});let h=a()(async n=>{let a=(0,p.t)(t.getState());if(!(!a||e.isSelectingTranslation()))try{let t=await e.updateSavedTranslation(n);r((0,d.i8)(t))}catch(e){"change of languages"===e.message&&(r((0,d.jp)(null)),l({id:u.qb.SAVED_TRANSLATIONS_CLOSE_BY_CHANGING_LANGUAGE,data:{savedTranslationsCloseByChangingLanguageData:{isSidebarOpen:(0,g.fy)(t.getState()),amountOfSavedTranslations:(0,p.KO)(t.getState())}}})),console.warn(e)}},200);n.onSourceTextBecomesEmpty.push(()=>{r((0,d.jp)(null)),e.isSavedTranslationApplied(!1)});let S=e=>{let t=!0;""===e.trim()&&(t=!1),t!==m()&&m(t)},f=()=>{let r=(0,p.Pf)(t.getState());!e.isSelectingTranslation()&&r&&h(r)};return n.onTargetTextChanged.push(()=>{if(n.isSourceTextEmpty()||n.isTargetTextEmpty()||m(!0),n.isTargetTextEmpty()&&!e.isSelectingTranslation()){r((0,d.jp)(null)),e.isSavedTranslationApplied(!1);return}f()}),n.onSourceTextChanged.push(e=>{S(e),f()}),{isSavingAllowed:m}})};var h=r(46911);let S=(e,t,r)=>{e.features.define("/translator/environment/ShowVoiceFeedbackForm",["/translator/web/voiceDictation"],e=>{let t=!1;[e.onTrackNoSpeechDetectedError,e.onTrackTechnicalError,e.onTrackLanguageNotRecognizedError,e.onTrackSuccessfulTranscription].forEach(e=>e.push(()=>{t||(r((0,h.$t)()),t=!0)}))})};var f=r(77055),T=r(16768),y=r(65394);r(18130),r(89148),r(22308),r(18563),r(71716),r(91508),r(91622),r(72757),r(20581),r(20121),r(29383),r(3190),r(15885),r(7645),r(35728),r(64768),r(12846),r(17441),r(79298),r(24810),r(80156),r(66519),r(41537),r(11929),r(80909),r(82859),r(95590);var v=r(98808),E=r(61606),x=r(15311);E.Z.defineType("/translator/core/observeDTextareaShortcuts",["/translator/core/textareas"],e=>{var t,r;let n=(0,v.f)();return null===(t=e.getSourceDTextarea())||void 0===t||t.onFormattingShortcutUsed.push((e,t)=>n({shortcut:e,fullTextChanged:t,textarea:x.$.SOURCE})),null===(r=e.getTargetDTextarea())||void 0===r||r.onFormattingShortcutUsed.push((e,t)=>n({shortcut:e,fullTextChanged:t,textarea:x.$.TARGET})),{onShortcutUsed:n}}),r(62522),r(71944),r(70055),r(99467),r(37126),r(8196),r(43101),r(49199),r(46096),r(41655),r(67873),r(72974),r(97561),r(86073),r(27840),r(55311),r(85606),r(90758),r(904),r(94162),r(75275),r(18252),r(32818),r(93226),r(22867),r(9345),r(76391),r(64073),r(9859),r(55309),r(82903),r(34404);var C=r(66726),_=r.n(C);let w=e=>{let{length:t,textToSummarize:r,summaryLanguage:n}=e;return{profileKey:"text-translation-summary",input:{summaryLanguage:A(n),lengthDescription:b(t)},chatMessages:[{source:"user",text:r}]}},L=new Map;L.set("en","English"),L.set("en-US","English (American)"),L.set("en-GB","English (British)"),L.set("de","German"),L.set("fr","French"),L.set("es","Spanish"),L.set("it","Italian"),L.set("nl","Dutch"),L.set("pl","Polish"),L.set("ru","Russian"),L.set("pt","Portuguese"),L.set("pt-PT","Portuguese"),L.set("pt-BR","Portuguese (Brazilian)"),L.set("ja","Japanese"),L.set("zh","Chinese (simplified)"),L.set("bg","Bulgarian"),L.set("hr","Croatian"),L.set("cs","Czech"),L.set("da","Danish"),L.set("et","Estonian"),L.set("fi","Finnish"),L.set("el","Greek"),L.set("hu","Hungarian"),L.set("is","Icelandic"),L.set("ga","Irish"),L.set("lv","Latvian"),L.set("lt","Lithuanian"),L.set("mt","Maltese"),L.set("no","Norwegian"),L.set("ro","Romanian"),L.set("sk","Slovak"),L.set("sl","Slovenian"),L.set("sv","Swedish"),L.set("id","Indonesian"),L.set("tr","Turkish"),L.set("uk","Ukrainian"),L.set("ko","Korean"),L.set("nb","Norwegian (bokm\xe5l)");let A=e=>{var t;let r;return r=e.variant?e.variant:e.lang.toLowerCase(),null!==(t=L.get(r))&&void 0!==t?t:r},b=e=>{switch(e){case"short":return"Your summary should be very short. Roughly 25 words or two sentences.";case"medium":return"Your summary should be medium length. Roughly 150 words or one large paragraph.";case"long":return"Your summary should be fairly long. Roughly 300 words or four paragraphs.";default:return""}};E.Z.defineType("/translator/common/summarize",["/translator/core/textareas","/translator/core/loadingTranslation","/translator/common/charCount","/translator/core/targetLanguageLabel","/translator/core/languageManagement","/translator/core/config","/translator/common/llmServices"],(e,t,r,n,a,o,s)=>{let l,c,{isLoading:u}=t,{charCount:g}=r,{currentLanguage:d}=n,{isUnsupportedLanguage:p}=a,{factoryChatCompletion:m}=s,h=(0,i.S3)(!1),S=(0,i.S3)(null),f=(0,i.S3)(!1),T=(0,i.S3)(!1),y=(0,i.S3)(!1),E=null,x=(0,i.S3)(e.getTargetText());e.onTargetTextChanged.push(x);let C=(0,v.f)(),L=(0,v.f)(),A=(0,v.f)(),b=_()((e,t,r,n)=>{h(!e&&t>=800&&!r&&n.length>0)},150,{leading:!0,trailing:!0});(0,i.S1)([u,g,p,x],b);let R=new Map;(0,i.S1)([u],e=>{e||R.clear()});let I=async function(e){void 0===e&&(e="medium"),l=performance.now(),c=e;let t=d(),r=x();C({summaryLength:e,textToSummarizeLengthInCharacters:r.length,summaryLanguage:t});let n=R.get(e);return n?D({cachedSummary:n,length:e,summaryLanguage:t,textToSummarize:r}):M({length:e,summaryLanguage:t,textToSummarize:r})},D=e=>{let{length:t,cachedSummary:r,textToSummarize:n,summaryLanguage:a}=e;S({length:t,text:r}),L({summaryLength:t,textToSummarizeLengthInCharacters:n.length,resultType:"cached",summaryLengthInCharacters:r.length,elapsedTimeInMs:performance.now()-l,summaryLanguage:a})},M=e=>{var t;let{length:r,textToSummarize:n,summaryLanguage:a}=e;return f(!1),y(!0),(function(e){let{abortController:t,isPro:r,getChatCompletion:n,...a}=e;return n(w(a),t.signal,r).then(e=>{let t=e.result[0];if(!t)throw Error("Couldn't extract summary from response");return t})})({length:r,textToSummarize:n,summaryLanguage:a,abortController:E=new AbortController,isPro:null!==(t=o.get("CONFIG__IS_PRO"))&&void 0!==t&&t,getChatCompletion:m("text-translation-summary")}).then(e=>{R.set(r,e),S({length:r,text:e}),L({summaryLength:r,textToSummarizeLengthInCharacters:n.length,resultType:"success",summaryLengthInCharacters:e.length,elapsedTimeInMs:performance.now()-l,summaryLanguage:a})}).catch(e=>{var t;null!==(t=E)&&void 0!==t&&t.signal.aborted||(console.error(e),f(!0),L({summaryLength:r,textToSummarizeLengthInCharacters:n.length,resultType:"error",summaryLengthInCharacters:0,elapsedTimeInMs:performance.now()-l,summaryLanguage:a}))}).finally(()=>{y(!1)})};return{isEnabled:h,isSummarizing:y,summarize:I,abortIfNecessary:()=>{if(y()){var e;null===(e=E)||void 0===e||e.abort(),y(!1),L({summaryLength:c,textToSummarizeLengthInCharacters:x().length,resultType:"cancel",summaryLengthInCharacters:0,elapsedTimeInMs:performance.now()-l,summaryLanguage:d()})}},isDialogVisible:T,showDialog:()=>T(!0),hideDialog:()=>T(!1),summary:S,wasLastSummaryRequestAnError:f,events:{onSummaryStarted:C,onSummaryFinished:L,onSummaryCopied:A}}});var Storage=r(75671),R=r(19323),I=r(29809);let D=["DE","EN"];E.Z.defineType("/translator/common/writeAdvertisementBanner",["/translator/core/languageManagement","/translator/core/textareas","/translator/common/shareUrl"],(e,t,r)=>{let n,a,o;let s=(0,i.S3)(!1),l=(0,v.f)(),c=(0,Storage.O)("LMT_write.writeAdvertisementBannerDisplayed",!1,2592e3),u=e=>{let r={text:t.getTargetText(),language:{lang:e.getTargetLangSettings().lang,variant:e.getTargetLangSettings().variant}};(0,I.M)({targetPage:"/write",targetEventKey:"translator-to-write.ready-for-text",message:r,setEntrypoint:()=>(0,R.OV)({trigger:R.W$.translatorContinueInWrite,textTransportChannel:"postMessage"})})},g=(e,t)=>!!D.includes(n)&&a!==e&&n===e&&o===t,d=r=>{let i=e.getSourceLang(),l=e.getTargetLang(),c=t.getSourceText();(i!==n||""!==r)&&(s(g(l,c)),n=i,a=l,o=r)};return c()||t.onTargetTextChanged.push(d),s.onValueChanged.push(e=>{e&&(c(!0),t.onTargetTextChanged.remove(d))}),{showBanner:s,accept:()=>{let t=e.getActiveLangContext(),n=t.targetSentences.map(e=>e.getText()),{url:a,shortened:o}=r.createShareUrlForWrite(n,t.getTargetLang());if(!o){setTimeout(()=>{window.location.href=a},200);return}u(t)},onUserInteraction:l}}),r(68140);var M=r(19526);r(49029),r(40293),r(18761),r(92261),r(5061),r(7545),r(64),r(54791),r(95803),r(5016),r(56819),r(54693);var N=r(69748),O=r(22496),k=r(58462);E.Z.defineType("/translator/smartEditing/detectSourceSentenceClicks",["/translator/core/domElements","/translator/core/languageManagement"],(e,t)=>{let{sourceEdit:r,getSourceEditCursorOffset:n,getSourceEditCursorOffsetEnd:a}=e,{getActiveLangContext:o}=t,i=(0,v.f)(),s=(0,v.f)();return r.addEventListener("mouseup",e=>{let t=e.detail;2===t?function(e,t,l){var c;let u=o(),g=r.value,d=n(),p=a(),m=g.substring(d,p).trim();if(-1!==m.indexOf(" ")){(O.ZP.isWin||O.ZP.isMac)&&!O.ZP.isMobilePhone&&i({langContext:u,tSentenceWordPos:void 0,tSentenceCursorPos:void 0,trigger:"click",clickNumber:l});return}let h=(0,k.PY)(g,d),S=(0,N.c5)(u,h),f=(0,N.c5)(u,d);if(S){let e=d!==p&&0===g.substring(d,p).trim().length,n=0===g.substring(d-1,p+1).trim().length,a=S.sentence.getText().trim().length;if((e||n)&&a){s();return}let o=(0,k.DO)(r,h);if(o.top<=0&&o.left<=0&&h>0)return;let i=parseInt(getComputedStyle(r).getPropertyValue("line-height"),10);h>=g.length-1&&t>o.top+i&&(S=null)}i({langContext:u,tSentenceWordPos:null!==(c=S)&&void 0!==c?c:void 0,tSentenceCursorPos:null!=f?f:void 0,trigger:"click",clickNumber:l})}(e.offsetX,e.offsetY,e.detail):s()}),{onSourceSentenceClicked:i,onEmptyAreaClicked:s,triggerSourceSentenceClicked:e=>{i(e)}}}),r(82961),r(69667),r(44821),r(87543),r(41466),r(61784),E.Z.defineType("/translator/smartEditing/smartSourceEditingDetector",["/translator/core/domElements","/translator/smartEditing/detectSourceSentenceClicks","/translator/core/networkStatus"],(e,t,r)=>{let n=(0,v.f)(),a=(0,v.f)(),{sourceEdit:o,targetEdit:i}=e;return i.addEventListener("focus",()=>a()),[o].forEach(e=>null==e?void 0:e.addEventListener("scroll",()=>a())),t.onEmptyAreaClicked.push(()=>a()),r.onRequestFailed.push((e,t)=>a()),t.onSourceSentenceClicked.push(e=>{let{langContext:t,tSentenceWordPos:r,tSentenceCursorPos:a,trigger:o,clickNumber:i}=e;n({langContext:t,tSentenceWordPos:r,tSentenceCursorPos:a,trigger:o,clickNumber:i})}),o.addEventListener("keydown",()=>{a()}),{onClick:n,onStopSmartEditing:a}}),E.Z.defineType("/translator/smartEditing/smartSourceEditing",["/translator/smartEditing/smartSourceEditingDetector"],e=>{let t=(0,v.f)(),r=(0,v.f)(),n=(0,v.f)(),a=(0,i.S3)(void 0),o=(0,i.G7)([a],e=>void 0!==e);function s(){o()&&(a(void 0),n())}return e.onStopSmartEditing.push(()=>{s()}),{onSourcePopupOpened:t,onSourcePopupOpening:r,onSourcePopupClosed:n,sourcePopupInfo:a,isPopupOpen:o,closePopup:s,openPopup:function(e){a(e),r(e),t(e)},updatePopupAnchor:function(e,t){let r=a();if(!r)return;let n={...r,globalCursor:e,sentenceCursor:t};a(n)}}}),r(5210);var P=r(29039);let F=e=>{let{sourceLanguage:t,targetLanguage:r,sourceSentence:n,targetSentence:a,alternativeSentence:o,explanationLanguage:i}=e;return{profileKey:"alternatives-explanations",input:{explanationLanguage:i},chatMessages:[{source:"user",text:`
    ${JSON.stringify({sourceSentence:n,sourceSentenceLanguage:t,initialTranslation:a,alternativeTranslation:o,translationLanguage:r,explanationLanguage:i})}
        
        Explanation:
        `}]}};E.Z.defineType("/translator/smartEditing/alternativesExplanations",["/translator/core/languageManagement","/translator/environment/localizedTexts","/translator/core/config","/translator/smartEditing/smartTargetEditingCommunication","/translator/common/llmServices"],(e,t,r,n,a)=>{let{factoryChatCompletion:o}=a,s=(0,v.f)(),l=(0,v.f)(),c=(0,i.G7)([e.sourceLang,e.targetLang],(e,t)=>{var n;return["EN","DE"].includes(e)&&["EN","DE"].includes(t)&&["en","de"].includes(null!==(n=r.get("il"))&&void 0!==n?n:"en")}),u=async a=>{let{alternative:i,sentence:c,abortController:u}=a,g=performance.now();return s(),(0,P.D)().then(()=>(function(e){let{smartTargetEditingCommunication:t,langContext:r,alternative:n,targetSentence:a}=e,o=a.getText().substr(n.prefix.length).match(/\s*$/)[0];return o||(o=" ",a.postfixWhitespaceIsTemporary=!0),t.fetchFillUpTargetSentence(r,a,!1,n.prefix+n.postfix)})({alternative:i,langContext:e.getActiveLangContext(),smartTargetEditingCommunication:n,targetSentence:c})).then(e=>e).then(n=>{var a;return function(e){let{abortController:t,getChatCompletion:r,...n}=e;return r(F(n),t.signal).then(e=>{let t=e.result[0];if(!t)throw Error("Couldn't get explanation from response");return t})}({sourceSentence:c.getSourceSentence().getText(),sourceLanguage:G(e.getSourceLang(),t),targetSentence:c.getText(),targetLanguage:G(e.getTargetLang(),t),alternativeSentence:n,explanationLanguage:G(null!==(a=r.get("il"))&&void 0!==a?a:"en",t),getChatCompletion:o("alternatives-explanations"),abortController:u})}).then(e=>(l({resultType:"success",elapsedTimeInMs:performance.now()-g}),e)).catch(e=>{if(null!=u&&u.signal.aborted)throw l({resultType:"cancel",elapsedTimeInMs:performance.now()-g}),e;throw l({resultType:"error",elapsedTimeInMs:performance.now()-g}),e})};return{events:{alternativeExplanationFinished:l,alternativeExplanationStarted:s},enabled:c,explain:u}});let G=(e,t)=>t.get(B(e)),B=e=>`translator/selectLang.target.${e.toLowerCase()}`;r(5724),E.Z.defineType("/translator/web/translationRatingSendText",["/translator/web/translationRating","/translator/core/languageManagement","/translator/core/translationBackend","/translator/core/config"],(e,t,r,n)=>{e.onTranslationRatingClicked.push(e=>{let{sourceText:a,targetText:o,ratingOption:i,additionalData:s}=e,l=t.getActiveLangContext(),c=l.getTargetSentences(),u=[];c.some(e=>Array.isArray(e.highlights)&&e.highlights.some(e=>"glossaryHighlight"===e.type))&&u.push("glossary"),c.some(e=>e.hasChangedText())&&u.push("manually");let g=n.get("isWriteMode")?"writeRatedText":"ratedText",d={type:g,lang:{source:l.getSourceLang(),target:l.getTargetLangSettings(),selectedSource:t.getSelectedSourceLang(),selectedTarget:t.getSelectedTargetLangSettings(),interface:(n.get("il")||"").toUpperCase()},rating:i,ratingHuman:1===i?"good":"bad",ratingAdditionalData:s,rawCharacterCountSourceText:a.length,rawCharacterCountTargetText:o.length,sourceText:a.substr(0,5e3),targetText:o.substr(0,1e4),targetTextWasChangedByUser:u.join(","),isGlossaryEnabled:t.isGlossaryEnabled()?"glossaryIsActive":"glossaryIsNotActive",version:"v2"};r.sendAdditionalData(d).catch(e=>{})})}),r(19909),r(29667);var U=r(92115),$=r(65224),z=r(57014);E.Z.defineType("/translator/web/sourceFocusedWordHighlight",["/translator/environment/localizedTexts","webTranslatorCore","/translator/core/highlightManagement","/translator/core/languageManagement","/translator/core/textareas","/translator/core/translateSourceSentences"],(e,t,r,n,a,o)=>{let s=(0,i.S3)(!1),l=(0,i.S3)(!1),c=null,u=t=>{var a;null===(a=c)||void 0===a||a();let o=n.getSourceLang();o&&(c=(0,U.g)({sentences:t,lang:o,withColor:!1,withTooltipOnClick:s(),withTooltipOnHover:l(),onRenderContextualMenuTooltip:function(){let t=e.get("translator/contextMenu.tooltip.source");for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];z.iM.apply(void 0,[t].concat(n))},onCleanupContextualMenuTooltip:z.cA,onUpdateModel:(e,t)=>{e.highlightState.setInnerSentenceHighlight($.lp.FOCUSED_WORD,t)}}),r.notifySourceSentencesChanged(t))},g=()=>{u(n.getActiveLangContext().getSourceSentences())};a.onSourceTextChanged.push(g),o.onFinalizeUpdatedTargetSentences.push(g),(0,i.S1)([l,s],()=>{g()}),t.features.with(["/translator/web/sourceContextEditing"],e=>{(0,i.S1)([e.isOpen],e=>{if(e){var t;null===(t=c)||void 0===t||t()}}),(0,i.S1)([e.isTooltipOnHoverEnabled],e=>{l(e)})})}),r(71156);var H=r(32317),V=r(26367);E.Z.defineType("/translator/web/sourceContextEditing",["webTranslatorCore","/translator/core/config","/translator/core/domElements","/translator/core/highlightManagement","/translator/core/languageManagement","/translator/core/textareas","/translator/smartEditing/smartSourceEditingDetector","/translator/smartEditing/smartSourceEditing","/translator/dictionary"],(e,t,r,n,a,o,s,l,c)=>{let u=(0,i.S3)(null),g=(0,i.S3)(!1),d=(0,i.S3)(!1),p=(0,i.S3)(!1);(0,i.S1)([g],e=>{e&&d(!0)});let m=c.isDictSupported,h=(0,i.G7)([d,m,p],(e,t,r)=>!e&&t&&!r),S=(0,i.S3)({}),f=(0,v.f)();function T(){var t;let r=a.getActiveLangContext().getSourceLang().toUpperCase(),n=e._internalLanguageManagement.langConfig[r];return null!==(t=null==n?void 0:n.wordsAreWrittenContinuously)&&void 0!==t&&t}l.onSourcePopupOpened.push(()=>f()),(0,i.S1)([u,m,p],(t,r,n)=>{if(!t||!r||!function(t){let{langContext:r,tSentenceWordPos:n,tSentenceCursorPos:a,clickNumber:o}=t,i=!n&&e.isActiveLangContext(r);if(i)return!1;let s=T()?a:n;return void 0!==s&&2===o&&!!e.isActiveLangContext(r)}(t)||n){l.closePopup();return}let{tSentenceCursorPos:a,tSentenceWordPos:o,trigger:i}=t,s=T()?a:o;if(void 0===s){l.closePopup();return}let c={sourceSentence:s.sentence,globalCursor:s.cursorOffset,sentenceCursor:s.sentenceCursorOffset,trigger:i};l.openPopup(c)});let y=()=>{u(null),l.closePopup()};function E(){let e=a.getActiveLangContext().getSourceLang(),t=o.getSourceText();e&&t&&p(function(e,t){let r=(0,V.T_)(t),n=0;for(let{segment:t}of r.segment(e))if(/\S/.test(t)&&(n+=1),n>=2)return!1;return!0}(t,e))}async function x(e){let{sourceSentence:t,sentenceCursor:o}=null!=e?e:{};if(!t||void 0===o)return;let i=await (0,H.hF)("sourceContextEditing",n,t,o),s=a.getActiveLangContext().getSourceLang(),l=(0,H.yu)(t.getText(),o,s),c={start:r.sourceEdit.selectionStart};return{position:i,word:l,selection:c}}s.onClick.push(e=>{u(e)}),s.onStopSmartEditing.push(()=>{y()}),o.onSourceTextChanged.pushWithReplay(E),a.onActiveLangContextChanged.push(E);let C=(0,i.S3)();return(0,i.S1)([l.sourcePopupInfo],e=>{let t=C();if(C(e),t&&e&&e.sourceSentence===t.sourceSentence&&e.globalCursor===t.globalCursor&&e.sentenceCursor===t.sentenceCursor||(null==e?void 0:e.trigger)==="autocompletion")return;let r=t&&e&&e.sourceSentence===t.sourceSentence&&e.sentenceCursor!==t.sentenceCursor;r||g(!1),x(e).then(e=>{e&&S(e),g(l.isPopupOpen())}).catch(e=>console.error(e))}),window.addEventListener("resize",()=>{y()},{passive:!0}),{isOpen:g,wasOpen:d,close:y,closeOutsideClick:e=>{let t=r.sourceEdit.contains(e.target);t||y()},context:S,isDictionarySupported:m,onOpened:f,isTooltipOnHoverEnabled:h}});var W=r(2239);let Z=e=>{let t=window.localStorage.getItem(e);try{var r;return null!==(r=JSON.parse(t))&&void 0!==r?r:{}}catch(e){return{}}},q=(e,t)=>{try{let r=JSON.stringify(t);window.localStorage.setItem(e,r)}catch(t){window.localStorage.setItem(e,{})}};r(12959),E.Z.defineType("/translator/web/manyTranslationsBlock",["/translator/core/textareas","/translator/environment/releaseGroups","/translator/environment/userInfo","/translator/common/openPage"],(e,t,r,n)=>{let{requestProPage:a}=n,o="[manyTranslationsBlock]",s=(0,v.f)(),l=(0,v.f)(),c=t.isActive("DM-1113"),u=(0,i.S3)(!1),{characterVolumeLimit:g,characterVolumeBlockDurationInMs:d}={},p=g||d;p&&console.warn(o,"init");let m=g&&parseInt(g,10)||(c?3e4:6e4),h=d&&parseInt(d,10)||864e5;p&&console.table({CHARACTER_VOLUME_LIMIT:m,CHARACTER_VOLUME_BLOCK_DURATION_IN_MS:h});let S=()=>{let e=localStorage.getItem("LMT_text_translator_usage_free");return e?JSON.parse(e):{}},f=()=>{var e;return null===(e=S())||void 0===e?void 0:e.usageId},T=f(),y=(0,W.WJ)("dapUid");T&&T===y||localStorage.setItem("LMT_text_translator_usage_free",JSON.stringify({characterVolume:0,characterVolumeByDays:{},characterVolumeReset:Date.now(),usageId:y})),l.push(()=>{s({ctaClicked:!0,usageId:f()}),a({cta:"many-translations-block-dialog"}),q("LMT_resumeCheckout",{...Z("LMT_resumeCheckout"),pd:2})});let E=e=>{let t=S();localStorage.setItem("LMT_text_translator_usage_free",JSON.stringify({...t,...e}))},x=()=>{let e=r.isProAvailable(),t=()=>{let e=!u();e&&(u(!0),s({dialogShown:!0,usageId:f()}))};e?t():void 0===e&&r.isProAvailable.onValueChanged.push(e=>(p&&console.warn("isProAvailable.onValueChanged()",e),e&&t(),"REMOVE"))},C=()=>{let{characterVolume:e=0}=S();return e},_=e=>{E({characterVolume:e})},w=()=>{let{characterVolumeLimitExceeded:e}=S();return e},L=e=>E({characterVolumeLimitExceeded:e}),A=()=>{let{thresholdReached:e}=S();return e},b=e=>E({thresholdReached:e}),R=()=>{let e=w();return e&&Date.now()<e+h},I=()=>{let e=C();e>=3e4&&!A()&&(b(!0),s({thresholdReached:!0,usageId:f()})),e>=m?(p&&console.warn(o,"> Reached Character Limit",e),_(0),b(!1),L(Date.now()),x()):R()&&(p&&console.warn(o,"> Reached 24H Limit"),_(0),b(!1),x())};return e.isSourceTextEmpty()||I(),e.onSourceTextChanged.push(()=>{p&&console.warn(o,"> onSourceTextChanged()"),I()}),{onDialogEvent:s,onOpenProPage:l,showingBlock:u,getUsageId:f}}),r(60867),r(81510),r(72893);var j=r(45058),Y=r(65137),J=r(96146),K=r(1779);let X=function(){function e(e,t){this._audioContext=void 0,this.options={threshold:K.Nr,interval:100,smoothing:.1,maxSilenceDuration:5e3},this.silenceDurationExceededCallback=void 0,this.silenceDuration=0,this._analyser=void 0,this._fftBins=void 0,this.currentVolume=this.options.threshold,this.isMonitoring=void 0,this.isSpeaking=!1,this.AudioContextType=window.webkitAudioContext||window.AudioContext,this._stream=null,t&&(this.options={...this.options,...t}),this.silenceDurationExceededCallback=null==e?void 0:e.bind(this),this._audioContext=new this.AudioContextType,this._analyser=this._audioContext.createAnalyser(),this._analyser.fftSize=512,this._analyser.smoothingTimeConstant=this.options.smoothing,this._fftBins=new Float32Array(this._analyser.fftSize)}var t=e.prototype;return t.startMonitoring=function(e){this._stream=e,this._audioContext.resume();let t=this._audioContext.createMediaStreamSource(this._stream);t.connect(this._analyser),this.isMonitoring=!0,this.isSpeaking=!1,this.silenceDuration=0,this._monitorVolumeLoopWithTimeout()},t.stopMonitoring=function(){this.isMonitoring=!1,this._stream=null,this.isSpeaking=!1,this.currentVolume=this.options.threshold,this._audioContext.suspend()},t._getMaxVolume=function(){let e=-1/0;this._analyser.getFloatFrequencyData(this._fftBins);for(let t=4;t<this._fftBins.length;t++)this._fftBins[t]>e&&this._fftBins[t]<0&&(e=this._fftBins[t]);return e},t._checkIfSilenceExceedsMaxSilenceDuration=function(){if(this.isSpeaking){this.silenceDuration=0;return}if(this.silenceDuration+=this.options.interval,this.silenceDuration>this.options.maxSilenceDuration){var e;this.stopMonitoring(),null===(e=this.silenceDurationExceededCallback)||void 0===e||e.call(this)}},t._checkIsSpeaking=function(){this.currentVolume=this._getMaxVolume(),this.currentVolume>this.options.threshold&&!this.isSpeaking?this.isSpeaking=!0:this.currentVolume<this.options.threshold&&this.isSpeaking&&(this.isSpeaking=!1),this._checkIfSilenceExceedsMaxSilenceDuration()},t._monitorVolume=function(){this.isMonitoring&&(this._checkIsSpeaking(),this._monitorVolumeLoopWithTimeout())},t._monitorVolumeLoopWithTimeout=function(){setTimeout(this._monitorVolume.bind(this),this.options.interval)},e}();var Q=r(90018);let ee={NO_PERMISSION:"Media recorder access permission denied",NO_BROWSER_SUPPORT:"Voice dictation not supported on browser"},et=function(){function e(e,t,r){void 0===r&&(r={maxByteSize:1e6,maxTimeLimitMs:3e4,monitorAudioVolume:!0}),this.mimeType=void 0,this.mediaRecorder=null,this.chunks=[],this.audioStreamState=null,this.stream=null,this.recordingStartTimestamp=0,this.options=void 0,this.recordingStoppedSource=Q.F.UNSPECIFIED,this.recordingAvailableCallback=void 0,this.updateCurrentVolumeCallback=void 0,this.recordingAvailableCallback=e,this.updateCurrentVolumeCallback=t,this.setUpMimetype(),this.options=r}var t=e.prototype;return t.startRecording=function(){return this.resetRecorder(),new Promise((e,t)=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||t(Error(ee.NO_BROWSER_SUPPORT)),navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{var r;this.stream=t,this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.ondataavailable=this.onDataAvailable.bind(this),this.mediaRecorder.onstart=()=>{this.recordingStartTimestamp=performance.now()},this.mediaRecorder.onstop=this.onStop.bind(this),this.options.monitorAudioVolume&&(this.audioStreamState=new X(this.handleSilenceDetected.bind(this),{maxSilenceDuration:K.Zj})),null===(r=this.audioStreamState)||void 0===r||r.startMonitoring(t),this.mediaRecorder.start(this.options.maxByteSize?100:void 0),e()}).catch(e=>{this.resetRecorder(),e instanceof DOMException&&("NotAllowedError"===e.name||"NotFoundError"===e.name)&&t(Error(ee.NO_PERMISSION)),t(e)})})},t.stopRecording=function(){this.mediaRecorder&&"recording"===this.mediaRecorder.state&&(this.recordingStoppedSource=Q.F.USER_ACTION,this.mediaRecorder.stop())},t.resetRecorder=function(){var e,t;this.chunks=[],null===(e=this.stream)||void 0===e||e.getAudioTracks().forEach(e=>{e.stop()}),null===(t=this.audioStreamState)||void 0===t||t.stopMonitoring(),this.stream=null,this.mediaRecorder=null},t.setUpMimetype=function(){let e=["audio/webm","audio/mp4","video/webm","video/mp4"];for(let t=0;t<e.length;t+=1)if(MediaRecorder.isTypeSupported(e[t])){this.mimeType=e[t];return}this.mimeType="audio/webm"},t.checkMaxByteSizeExceeded=function(){if(!this.options.maxByteSize||!this.mediaRecorder||"recording"!==this.mediaRecorder.state)return;let e=this.chunks.reduce((e,t)=>e+t.size,0);if(e>=this.options.maxByteSize){var t;this.recordingStoppedSource=Q.F.MAX_FILE_SIZE_REACHED,null===(t=this.mediaRecorder)||void 0===t||t.stop()}},t.checkMaxTimeLimitExceeded=function(){if(!this.options.maxTimeLimitMs||!this.mediaRecorder||"recording"!==this.mediaRecorder.state)return;let e=Math.floor(performance.now()-this.recordingStartTimestamp);if(e>=this.options.maxTimeLimitMs){var t;this.recordingStoppedSource=Q.F.TIME_LIMIT_EXCEEDED,null===(t=this.mediaRecorder)||void 0===t||t.stop()}},t.handleSilenceDetected=function(){var e;this.recordingStoppedSource=Q.F.SILENCE_EXCEEDED,null===(e=this.mediaRecorder)||void 0===e||e.stop()},t.onDataAvailable=function(e){var t;this.chunks.push(e.data),this.checkMaxByteSizeExceeded(),this.checkMaxTimeLimitExceeded(),this.audioStreamState&&(null===(t=this.updateCurrentVolumeCallback)||void 0===t||t.call(this,this.audioStreamState.currentVolume))},t.onStop=function(){var e;let t=Math.floor(performance.now()-this.recordingStartTimestamp),r=(Q.F[this.recordingStoppedSource],new Blob(this.chunks,{type:this.mimeType}));null===(e=this.recordingAvailableCallback)||void 0===e||e.call(this,r,t,this.recordingStoppedSource)},e}(),er=(e,t,r,n)=>(0,P.D)().then(()=>fetch(`https://voice-free.www.deepl.com/sync/transcribe?${new URLSearchParams({lang:t}).toString()}`,{headers:{accept:"application/json","Content-Type":r},credentials:"include",signal:n,body:e,method:"POST"})).then(e=>e.json()),en="speechToTextConsent";E.Z.defineType("/translator/web/voiceDictation",["/translator/core/languageManagement","/translator/core/textareas","/translator/core/predefinedState","/translator/core/config"],(e,t,r,n)=>{let a,o;let s=(0,i.S3)(Q.A.WAITING_FOR_LANGUAGE_SELECTION),l=(0,i.S3)(),c=(0,i.S3)(0),u=(0,i.S3)(!1),g=()=>u(!1),d=(0,i.S3)(!1),p=()=>d(!1),m=(0,i.S3)(!1),h=()=>m(!1),S=(0,i.S3)(!1),f=()=>S(!1),T=(0,i.S3)(!1),y=()=>T(!1),E=(0,i.S3)(!1),x=()=>E(!1),C=(0,i.S3)(!1),_=()=>C(!1),w=()=>!!(0,Y.r)(en),L=()=>(0,J.L)(en,!0,525600);w()&&L();let A=(0,v.f)();A.push(()=>{L(),s()===Q.A.WAITING_FOR_USER_CONSENT?(s(Q.A.READY_FOR_USER_TO_START_RECORDING),W()):V()});let b=()=>{f(),g(),y(),p(),h(),x()};function R(e){b(),e(!0)}let I=(0,v.f)(),D=(0,v.f)(),M=(0,v.f)(),N=(0,v.f)(),O=(0,v.f)(),k=(0,v.f)(),P=(0,v.f)(),F=(0,v.f)(),G=(0,v.f)(),B=(0,v.f)(),U=(0,v.f)(),$=(0,v.f)(),z=null,H=new et((e,r,a)=>{D(r,a),s()===Q.A.RECORDING&&(a===Q.F.SILENCE_EXCEEDED&&R(d),(a===Q.F.TIME_LIMIT_EXCEEDED||a===Q.F.MAX_FILE_SIZE_REACHED)&&R(m),function(e,r,a){let o=setTimeout(()=>C(!0),K.Cm);z=new AbortController,er(e,r,H.mimeType,z.signal).then(e=>{s(Q.A.PROCESSING_TRANSCRIPTION),function(e,r){var a;let o=l(),i=e.detected_lang_code;if(i!==o){R(S),P(i,o,e.transcription_id,r);return}if(!(a=e.segments)||!a.length||!a[0].text){R(E),M();return}let s=function(e){let r=`${e.map(e=>e.text).join("")} `;if(n.get("isRtfEnabled")){let e=""===t.getSourceText()?"":t.getSourceHtml(),n=`${e}<p>${r}</p>`;t.updateSourceHtml(n,"update",!1,!0,"speech_to_text")}else{let e=`${t.getSourceText().trimEnd()} ${r}`;t.setSourceTextExplicitly(e,"update",!1,!0,"speech_to_text")}return r.length}(e.segments);k({numOfTranscriptionCharacters:s,detectedSourceLanguage:i,selectedSourceLanguage:o})}(e,a)}).catch(e=>{var t;null!==(t=z)&&void 0!==t&&t.signal.aborted||(403===e.status?O():N(),R(T))}).finally(()=>{h(),p(),V(),clearTimeout(o),_()}),H.resetRecorder()}(e,l(),r),s(Q.A.TRANSCRIBING))},e=>c(e));function V(){(0,K.Ay)(l())?w()?s(Q.A.READY_FOR_USER_TO_START_RECORDING):s(Q.A.WAITING_FOR_USER_CONSENT):"auto"===l()?s(Q.A.WAITING_FOR_LANGUAGE_SELECTION):s(Q.A.UNSUPPORTED_LANGUAGE)}function W(){if(s()!==Q.A.READY_FOR_USER_TO_START_RECORDING)return;a=performance.now(),b();let e=!1;(0,j.Fo)()?s(Q.A.BROWSER_ENGINE_PREPARING_TO_START_RECORDING):setTimeout(()=>{s()===Q.A.RECORDING||e||s(Q.A.BROWSER_ENGINE_PREPARING_TO_START_RECORDING)},300),requestAnimationFrame(()=>{H.startRecording().then(()=>{o=performance.now();let e=Math.floor(o-a);I(l(),e),setTimeout(()=>{s(Q.A.RECORDING)})}).catch(t=>{t.message===ee.NO_PERMISSION?(e=!0,s(Q.A.READY_FOR_USER_TO_START_RECORDING),R(u),F()):console.error("Voice_Dictation_Feature",t)})})}function Z(){var e;null===(e=z)||void 0===e||e.abort()}return e.onSelectedSourceLangChanged.push(()=>{l(e.getSelectedSourceLang()),s()===Q.A.RECORDING&&(s(Q.A.WAITING_FOR_LANGUAGE_SELECTION),H.resetRecorder()),s()===Q.A.TRANSCRIBING&&(s(Q.A.WAITING_FOR_LANGUAGE_SELECTION),Z()),V()}),e.onSourceLangDetected.push(e=>{l(e),V()}),(0,i.S1)(r.isInPredefinedState,t=>{t&&(l(e.getSelectedSourceLang()),V())}),t.onSourceTextBecomesEmpty.push(()=>{l(e.getSelectedSourceLang()),V()}),{currentSourceLanguage:l,voiceDictationState:s,voiceRecordingVolume:c,startVoiceRecording:W,stopVoiceRecording:function(){if((0,j.Fo)()){let e=performance.now();e>o+200&&H.stopRecording()}else H.stopRecording()},cancelTranscription:Z,showMicrophoneAccessBlocked:u,hideMicrophoneAccessBlocked:g,showSilenceDetected:d,hideSilenceDetected:p,showTimeLimitExceeded:m,hideTimeLimitExceeded:h,showLanguageNotRecognized:S,hideLanguageNotRecognized:f,showTechnicalError:T,hideTechnicalError:y,showNoSpeechDetected:E,hideNoSpeechDetected:x,showRequestTooSlow:C,hideRequestTooSlow:_,onTrackStartVoiceRecording:I,onTrackStopVoiceRecording:D,onTrackNoSpeechDetectedError:M,onTrackTechnicalError:N,onTrackClearanceError:O,onTrackLanguageNotRecognizedError:P,onTrackMicrophoneAccessBlocked:F,onTrackSuccessfulTranscription:k,onTrackRecordingAttempted:G,onTrackUserDeniesConsent:B,onTrackOpenConsentDialogue:U,onTrackCloseConsentDialogue:$,onUserGivesConsent:A}});var ea=r(68085),eo=r(84627);let ei=e=>{var t,r;if(e.sourceText&&e.sourceText.length>0)return e.sourceText.substring(0,40);let n=null===(t=e.sourceChains)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r[0];if(n&&n.length>0)return n.substring(0,40)};E.Z.defineType("/translator/web/translationSaving",["webTranslatorCore","/translator/core/predefinedState","/translator/core/textareas"],(e,t,r)=>{let n;let a=(0,eo.S3)(!1),o=(0,eo.S3)(!1);async function i(){return await t.serializeActiveState("full")}async function s(){let e=await i();if(r.isSourceTextEmpty())throw Error("no source text");let t={title:ei(e)||"Untitled",creationDate:new Date().toISOString(),id:(0,ea.a)(),sourceLang:e.sourceLangcode,targetLang:e.targetLangcode,serializedTranslatorState:e,numberOfEdits:0};return t}async function l(e){let t=await i();if(r.isSourceTextEmpty())throw{message:"no source text"};if(!o()&&(e.sourceLang!==t.sourceLangcode||e.targetLang!==t.targetLangcode))throw{message:"change of languages"};return{...e,serializedTranslatorState:t}}return e.features.with(["/translator/glossary"],e=>{n=e}),{loadTranslatorState:i,applyTranslatorState:function(e){var r;null===(r=n)||void 0===r||r.setGlossaryEnabledState(!1),t.applyPredefinedState(e),a(!0)},createInitialSavedTranslation:s,updateSavedTranslation:l,isSavedTranslationApplied:a,isSelectingTranslation:o}}),r(56439),E.Z.defineType("/translator/common/observeDoubleSpaceError",["/translator/core/translateSourceSentences","/translator/common/observeTextSession"],(e,t)=>{let{onTranslationsHaveChanged:r}=e,{getTextSessionId:n}=t,a=(0,v.f)(),o=0;return r.push(e=>{let{langContext:{targetSentences:t}}=e;if(o!==n()){let e=t.some(e=>e._lastFullTrimmedText.includes("  "));e&&(a(),o=n())}}),{onDoubleSpaceErrorObserved:a}}),r(84296),r(85123);let es=(e,t,r)=>{(0,f.Z)(e),(0,T.M)(e);let{features:n}=e;n.apply("/translator/core/basicConfiguration"),n.apply("/translator/core/config"),n.apply("/translator/core/domElements"),n.apply("/translator/core/textareas"),n.apply("/translator/core/richTextHandling"),n.apply("/translator/core/langPreference"),n.apply("/translator/core/requestHandling"),n.apply("/translator/core/languageManagement"),n.apply("/translator/core/selectedLanguages"),n.apply("/translator/core/networkStatus"),n.apply("/translator/core/translationBackend"),n.apply("/translator/core/triggerSourceTranslation"),n.apply("/translator/core/updateSourceSentences"),n.with(["/translator/core/updateSourceSentences"],e=>{e.addReasonToDelayUpdates("waitingForGlossary")}),n.apply("/translator/common/translatorStats"),n.apply("/translator/core/translateSourceSentences"),n.apply("/translator/core/retranslationServices"),n.apply("/translator/core/predefinedState"),n.apply("/translator/core/sourceLanguageLabel"),n.apply("/translator/core/targetLanguageLabel"),n.apply("/translator/core/sourceLanguages"),n.apply("/translator/core/targetLanguages"),n.apply("/translator/core/loadingTranslation"),n.apply("/translator/core/observeSentenceSelection"),n.apply("/translator/core/paragraphHandling"),n.apply("/translator/core/highlightManagement"),n.apply("/translator/core/observeSourceTextAndLanguage"),n.apply("/translator/core/observeDTextareaPerformance"),n.apply("/translator/core/observeDTextareaShortcuts"),n.apply("/translator/core/readonlySourceSide"),n.apply("/translator/common/charCount"),n.apply("/translator/common/clearText"),n.apply("/translator/common/copyTextFromTextarea"),n.apply("/translator/common/spellcheckHandling"),n.apply("/translator/common/copyTargetText"),n.apply("/translator/common/shareUrl"),n.apply("/translator/common/share"),n.apply("/translator/common/shareTargetText"),n.apply("/translator/common/observeTextSession"),n.apply("/translator/common/observeDoubleSpaceError"),n.apply("/translator/common/observeTranslationBackend"),n.apply("/translator/common/interceptClipboard"),n.apply("/translator/common/analytics"),n.apply("/translator/common/errorHandling"),n.apply("/translator/common/confirmFreeTranslator"),n.apply("/translator/common/speakSourceText"),n.apply("/translator/common/speakTargetText"),n.apply("/translator/common/alternativeTranslations"),n.apply("/translator/common/reloadHelper"),n.apply("/translator/common/batchTranslation"),n.apply("/translator/common/newTextareaHint"),n.apply("/translator/common/switchLang"),n.apply("/translator/common/openPage"),n.apply("/translator/common/popups"),n.apply("/translator/common/computedTextLength"),n.apply("/translator/common/writeAdvertisementBanner"),n.apply("/translator/common/continueInWrite"),n.apply("/translator/common/llmServices"),(0,M.k)(e),n.apply("/translator/common/focusedWordHighlight"),n.apply("/translator/common/alternativeAtPositionHighlight"),n.with(["/translator/core/config"],e=>{let r=e.get("CONFIG__IS_PRO"),a=(0,y.z)(t.getState());r||a||n.apply("/translator/common/sendTranslationState")}),n.with(["/translator/core/config"],e=>{e.get("isRtfEnabled")&&n.apply("/translator/common/removeFormatting")}),n.apply("formality/persist"),n.apply("formality/core"),n.apply("formality"),n.apply("formality/ad"),n.apply("/translator/dictionary"),n.apply("/translator/smartEditing/updateTargetSentencesFromText"),n.apply("/translator/common/detectTargetTextModifications"),n.apply("/translator/smartEditing/detectTargetSentenceClicks"),n.apply("/translator/smartEditing/smartTargetEditingDetector"),n.apply("/translator/smartEditing/smartTargetEditing"),n.apply("/translator/smartEditing/smartTargetEditingUpdateTarget"),n.apply("/translator/smartEditing/smartTargetEditingCommunication"),n.apply("/translator/smartEditing/smartTargetEditingAutocompletion"),n.apply("/translator/smartEditing/smartTargetEditingAlternativesCommunication"),n.apply("/translator/common/translatorSideFocus"),n.apply("/translator/common/lastFocusedSideUndoRedo"),n.apply("/translator/common/sourceUndoRedo"),n.apply("/translator/common/targetUndoRedo"),n.require(["/translator/environment/releaseGroups"],e=>{let t=e.isActive("B2B-444")&&!0;t?n.apply("/translator/glossary/new"):n.apply("/translator/glossary")}),n.require(["/translator/environment/releaseGroups","/translator/core/config"],(a,o)=>{let i=a.isActive("B2B-596")||a.isActive("B2B-679"),s=o.get("CONFIG__IS_PRO");!s&&i&&(n.apply("/translator/web/translationSaving"),m(e,t,r))}),n.with(["/translator/core/updateSourceSentences","/translator/glossary"],e=>{e.removeReasonToDelayUpdates("waitingForGlossary")}),n.with(["/translator/core/updateSourceSentences","/translator/glossary/new"],e=>{e.removeReasonToDelayUpdates("waitingForGlossary")}),n.with(["/translator/core/config","/translator/environment/userInfo"],(e,t)=>{(0,i.S1)(t.isProAvailable,t=>{t&&!e.get("CONFIG__IS_PRO")&&(n.apply("/translator/web/manyTranslationsBlock"),n.apply("/translator/common/manyTranslationsNag"))})}),n.apply("/translator/web/translationRating"),n.apply("/translator/web/addTranslatedByFooter"),n.with(["/translator/core/config"],e=>{e.get("CONFIG__IS_PRO")||n.apply("/translator/web/translationRatingSendText")}),n.apply("/translator/web/analytics"),n.apply("/translator/core/rtl"),n.apply("/translator/web/targetContextEditing"),n.apply("/translator/common/alignedSentenceHighlight"),n.apply("/translator/common/textarea/state"),n.with(["/translator/core/config","/translator/environment/releaseGroups"],(a,o)=>{let i=a.get("CONFIG__IS_PRO"),s=o.isActive("DF-3552")&&!i;s&&(n.apply("/translator/web/voiceDictation"),S(e,t,r))}),n.require(["/translator/environment/releaseGroups","/translator/core/config","/translator/environment/userInfo"],(e,t,r)=>{(0,i.S1)(r.isProAvailable,r=>{let a=t.get("CONFIG__IS_PRO");!a&&r&&e.isActive("DPAY-2860")&&n.apply("/translator/web/southKoreaProDialog"),!a&&r&&e.isActive("DPAY-3089")&&n.apply("/translator/web/turkeyProDialog"),!a&&r&&e.isActive("DPAY-3090")&&n.apply("/translator/web/indonesiaProDialog")})}),n.require(["/translator/core/config"],e=>{let t=e.get("CONFIG__IS_PRO");t||n.apply("/translator/common/summarize")}),n.apply("/translator/smartEditing/detectSourceSentenceClicks"),n.apply("/translator/smartEditing/smartSourceEditingDetector"),n.apply("/translator/smartEditing/smartSourceEditing"),n.apply("/translator/web/sourceContextEditing"),n.apply("/translator/web/sourceFocusedWordHighlight"),n.require(["/translator/core/config","/translator/environment/releaseGroups"],(e,t)=>{let r=e.get("CONFIG__IS_PRO");t.isActive("DF-3503")&&!r&&n.apply("smartEditing/alternativesExplanations")})};var el=es},5724:function(e,t,r){var n=r(98808),a=r(61606),o=r(30171),i=r(35932);a.Z.defineType("/translator/web/translationRating",["/translator/core/textareas"],e=>{let t=(0,n.f)(),r=(0,o.S3)(!1),a=(0,o.S3)(null);return e.onTargetTextChanged.push(e=>{r("string"==typeof e&&e.length>0),a(null)}),{onTranslationRatingClicked:t,isRatingAllowed:r,rating:a,like:r=>{t({sourceText:e.getSourceText(),targetText:e.getTargetText(),ratingOption:i.i.Like,additionalData:r}),a(i.i.Like)},dislike:r=>{t({sourceText:e.getSourceText(),targetText:e.getTargetText(),ratingOption:i.i.Dislike,additionalData:r}),a(i.i.Dislike)}}})}}]);