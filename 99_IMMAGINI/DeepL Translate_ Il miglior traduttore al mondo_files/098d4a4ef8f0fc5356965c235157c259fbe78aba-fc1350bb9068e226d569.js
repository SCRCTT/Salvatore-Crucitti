"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[5105],{9859:function(e,t,a){var n=a(61606),r=a(86679);n.Z.defineType("/translator/common/lastFocusedSideUndoRedo",["/translator/common/translatorSideFocus","/translator/common/sourceUndoRedo","/translator/common/targetUndoRedo"],(e,t,a)=>{document.addEventListener("keydown",n=>{let o=e.currentlyFocused(),s=e.lastFocused();if("none"===o){var i,l;(0,r.kp)(n)?null===(i="source"===s?t:a)||void 0===i||i.undo("keyboard"):(0,r.Ve)(n)&&(null===(l="source"===s?t:a)||void 0===l||l.redo("keyboard"))}})})},55309:function(e,t,a){var n=a(61606),r=a(30171),o=a(98808),s=a(58425);n.Z.defineType("/translator/common/sourceUndoRedo",["/translator/core/textareas","/translator/common/translatorSideFocus","/translator/core/requestHandling"],(e,t,a)=>{let n=null==e?void 0:e.getSourceDTextarea();if(!n)return;let i=(0,r.S3)(!1),l=(0,r.S3)(!1),u=(0,r.G7)([t.lastFocused,a.hasPendingRequestsOfType(s.Xk.TYPE__TRANSLATE_SOURCE),e.isSourceTextEmpty,n.isUndoAvailable,n.isRedoAvailable],(e,t,a,n,r)=>"source"===e&&!t&&(!a||n||r));n.onUndoStackChange.push(()=>{i(n.isUndoAvailable()),l(n.isRedoAvailable())});let d=(0,o.f)(),c=(0,o.f)();return{showUndoRedoButtons:u,isUndoAvailable:i.asReadOnly(),isRedoAvailable:l.asReadOnly(),undo:e=>{i()&&(n.undo(),d(e))},redo:e=>{l()&&(n.redo(),c(e))},onUndo:d,onRedo:c,isSourceTextEmpty:()=>e.isSourceTextEmpty()}})},82903:function(e,t,a){var n=a(61606),r=a(30171),o=a(98808),s=a(58425);n.Z.defineType("/translator/common/targetUndoRedo",["/translator/core/textareas","/translator/common/translatorSideFocus","/translator/core/requestHandling","/translator/core/config"],(e,t,a,n)=>{var i;let l=null==e?void 0:e.getTargetDTextarea();if(!l)return;let u=(0,r.S3)(null!==(i=n.get("readonlySourceSide"))&&void 0!==i&&i),d=(0,r.S3)(!1),c=(0,r.S3)(!1),g=(0,r.G7)([t.lastFocused,a.hasPendingRequestsOfType(s.Xk.TYPE__TRANSLATE_SOURCE),e.isSourceTextEmpty,d,c],(t,a,n,r,o)=>{if(u())return!0;let s=0===e.getTargetText().length;return"target"===t&&(!n&&!a||!s||r||o)});l.onUndoStackChange.push(()=>{let e=a.hasPendingRequestsOfType(s.Xk.TYPE__TRANSLATE_SOURCE)();d(l.isUndoAvailable()&&!e),c(l.isRedoAvailable()&&!e)});let h=(0,o.f)(),p=(0,o.f)();return{showUndoRedoButtons:g,isUndoAvailable:d.asReadOnly(),isRedoAvailable:c.asReadOnly(),undo:e=>{d()&&(l.undo(),h(e))},redo:e=>{c()&&(l.redo(),p(e))},onUndo:h,onRedo:p}})},64073:function(e,t,a){var n=a(30171);a(61606).Z.defineType("/translator/common/translatorSideFocus",["/translator/core/domElements"],e=>{let{sourceEdit:t,targetEdit:a}=e,r=(0,n.S3)("source"),o=(0,n.S3)("source"),s=e=>{r(e),o(e)},i=()=>{r("none")};return t.addEventListener("focus",()=>s("source")),a.addEventListener("focus",()=>s("target")),t.addEventListener("blur",i),a.addEventListener("blur",i),{currentlyFocused:r.asReadOnly(),lastFocused:o.asReadOnly()}})},82859:function(e,t,a){var n=a(69764),r=a(98808),o=a(61606),s=a(15311);o.Z.defineType("/translator/core/observeDTextareaPerformance",["/translator/core/textareas"],e=>{let t;let a=(0,r.f)(),o=.5>Math.random()?1e4:6e4,i=.5>Math.random()?s.$.SOURCE:s.$.TARGET,l=.33>Math.random()?"internal":.5>Math.random()?"short":"long",u=i===s.$.SOURCE?e.getSourceDTextarea():e.getTargetDTextarea();if(!(.01>Math.random())||void 0===u)return{onPerformanceData:a};u._config_measurePerformance=!0;let d=0,c=0,g=e=>{var a,r,s,u,g;let h=e.characterCount-c;c=e.characterCount,"internal"===l&&e.trigger!==n.z.INTERNAL||"internal"!==l&&e.trigger===n.z.INTERNAL||"short"===l&&Math.abs(h)>4||"long"===l&&4>=Math.abs(h)||Math.random()>=1/(d+=1)||(t={total:Math.round(e.total),syncForward:Math.round(null!==(a=e.updateNodesFromDom)&&void 0!==a?a:0),cleanup:Math.round(null!==(r=e.cleanupNodes)&&void 0!==r?r:0),syncBack:Math.round(null!==(s=e.updateDom)&&void 0!==s?s:0),finalize:Math.round(null!==(u=e.finalizeNodes)&&void 0!==u?u:0),cursorPosition:Math.round(null!==(g=e.getCursorPos)&&void 0!==g?g:0),rest:Math.round(e.other),textarea:i,numberOfCharacters:Math.round(e.characterCount),numberOfCharactersChanged:h,trackingDelay:o,trigger:e.trigger})};return u.onPerformanceMeasured.push(g),setTimeout(()=>{u.onPerformanceMeasured.remove(g),u._config_measurePerformance=!1,t&&a(t)},o),{onPerformanceData:a}})},95590:function(e,t,a){var n=a(84627),r=a(61606),o=a(30171);r.Z.defineType("/translator/core/readonlySourceSide",["/translator/core/domElements","/translator/core/config","/translator/core/predefinedState","/translator/core/textareas"],(e,t,a,r)=>{var s;let i=(0,n.S3)(null!==(s=t.get("readonlySourceSide"))&&void 0!==s&&s);return i()&&(e.sourceEdit.disabled=!0,r.onSourceTextChangedPreview.push((e,t,a,n)=>{n(!1)}),(0,o.S1)(a.isPredefinedStateEmpty,e=>{e||r.onSourceTextChangedPreview.push((e,t,a,n)=>(n(!0),"REMOVE"))})),{readonlySource:i.asReadOnly()}})},15311:function(e,t,a){var n;a.d(t,{$:function(){return r}});let r=((n={})[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SOURCE=1]="SOURCE",n[n.TARGET=2]="TARGET",n)},19909:function(e,t,a){var n=a(19783),r=a.n(n),o=a(86679),s=a(40977),i=a(30171),l=a(61606),u=a(76045);l.Z.defineType("/translator/web/analytics",["/translator/webTranslatorCore","/translator/common/analytics",u.K],(e,t,a)=>{let{common:n}=t,{send:l}=a;e.features.with(["/translator/core/updateSourceSentences"],e=>{e.onHTMLTextInputRejected.push(()=>l({id:160}))}),e.features.with(["/translator/web/translationRating"],e=>{e.onTranslationRatingClicked.push(e=>{let{sourceText:t,targetText:a,ratingOption:r}=e;l({id:114,data:{translatorTranslationRatingData:{languageData:n.getTranslatorLanguageData(),numberOfCharactersTargetField:t.length,numberOfCharactersSourceField:a.length,ratingOption:r}}})})}),e.features.with(["/translator/web/manyTranslationsBlock"],e=>{e.onDialogEvent.push(e=>{let{thresholdReached:t,dialogShown:a,ctaClicked:n,usageId:r}=e,o={blockModalData:{usageId:r}};t&&l({id:s.qb.MANY_TRANSLATIONS_BLOCK.THRESHOLD_REACHED,data:o}),a&&l({id:s.qb.MANY_TRANSLATIONS_BLOCK.DIALOG_SHOWN,data:o}),n&&l({id:s.qb.MANY_TRANSLATIONS_BLOCK.CTA_CLICKED,data:o})})}),e.features.with(["core/languageManagement"],e=>{(0,i.S1)(e.isUnsupportedLanguage,e=>{e&&l({id:239})})}),e.features.with(["/translator/common/writeAdvertisementBanner"],e=>{e.onUserInteraction.push(e=>{let{interaction:t}=e;l({id:271,data:{userInteractionWriteAdvertisementData:{interaction:t}}})})}),e.features.with(["/translator/web/sourceLanguageUi"],e=>{let t=0;e.onLanguageDropdownOpened.push(()=>{t=Date.now();let e={translatorLanguageData:n.getTranslatorLanguageData(!0)};l({id:59,data:e})}),e.onLanguageDropdownClosed.push(()=>{let e={...n.getTranslatorLanguageData(!0),languageSelectionDuration:{duration:Date.now()-t}};l({id:60,data:{translatorLanguageData:e}})}),e.onLanguageSearchTextEntered.push(()=>{l({id:231})}),e.onLanguageSearchClearButtonClicked.push(()=>{l({id:232})}),e.onLanguageSearchNoResults.push(()=>{l({id:240})})}),e.features.with(["/translator/web/targetLanguageUi"],e=>{let t=0;e.onLanguageDropdownOpened.push(()=>{t=Date.now();let e={translatorLanguageData:n.getTranslatorLanguageData(!0)};l({id:57,data:e})}),e.onLanguageDropdownClosed.push(()=>{let e={...n.getTranslatorLanguageData(!0),languageSelectionDuration:{duration:Date.now()-t}};l({id:58,data:{translatorLanguageData:e}})}),e.onLanguageSearchTextEntered.push(()=>{l({id:231})}),e.onLanguageSearchClearButtonClicked.push(()=>{l({id:232})}),e.onLanguageSearchNoResults.push(()=>{l({id:240})})}),e.features.with(["/translator/core/domElements"],e=>{let t=r()(e=>l({id:308,data:e}),300),a=r()(e=>l({id:309,data:e}),300),s=e=>r=>{let s={translatorUndoRedoData:{languageData:n.getTranslatorLanguageData(),source:"source"===e?1:2}};(0,o.Ve)(r)?a(s):(0,o.kp)(r)&&t(s)};e.sourceEdit.addEventListener("keydown",s("source")),e.targetEdit.addEventListener("keydown",s("target"))}),e.features.with(["/translator/common/sourceUndoRedo","/translator/common/targetUndoRedo"],(e,t)=>{let a=r()(e=>l(e),300),o=(e,t,r)=>{let o="undo"===t?s.qb.EVENT_ID_TRANSLATOR_LOCAL_UNDO_TRIGGERED:s.qb.EVENT_ID_TRANSLATOR_LOCAL_REDO_TRIGGERED,i={languageData:n.getTranslatorLanguageData(),source:{none:0,source:1,target:2}[e],method:{none:0,button:1,keyboard:2}[r]};a({id:o,data:{translatorLocalUndoRedoData:i}})};null==e||e.onUndo.push(e=>o("source","undo",e)),null==e||e.onRedo.push(e=>o("source","redo",e)),null==t||t.onUndo.push(e=>o("target","undo",e)),null==t||t.onRedo.push(e=>o("target","redo",e))}),e.features.with(["/translator/common/detectTargetTextModifications","/translator/common/observeTextSession"],(e,t)=>{let{onDetectedTargetTextModifications:a}=e,n=!0;t.onFullTranslation.push(()=>{n=!0}),t.onPartialTranslation.push(()=>{n=!0}),a.push(e=>{n&&(l({id:311,data:{targetTextModifiedData:{remainingTextLength:e.remainingText.length,remainingTargetSentencesCount:e.remainingTargetSentences.length}}}),n=!1)})}),e.features.with(["/translator/common/summarize"],e=>{let t=e=>{switch(e){case"short":return 3;case"medium":return 2;case"long":return 1;default:return 0}},a=e=>{switch(e){case"success":return 1;case"cached":return 2;case"error":return 3;case"cancel":return 4;default:return 0}},n=e=>[e.lang,e.variant].filter(e=>!!e).join("-");e.events.onSummaryStarted.push(e=>{let{textToSummarizeLengthInCharacters:a,summaryLength:r,summaryLanguage:o}=e;l({id:389,data:{llmSummaryStartedData:{summaryLength:t(r),textToSummarizeLengthInCharacters:a,summaryLanguage:n(o)}}})}),e.events.onSummaryFinished.push(e=>{let{summaryLength:r,textToSummarizeLengthInCharacters:o,summaryLanguage:s,resultType:i,summaryLengthInCharacters:u,elapsedTimeInMs:d}=e;l({id:390,data:{llmSummaryFinishedData:{summaryLength:t(r),textToSummarizeLengthInCharacters:o,summaryLanguage:n(s),resultType:a(i),summaryLengthInCharacters:u,elapsedTimeInMs:Math.floor(d)}}})}),e.events.onSummaryCopied.push(()=>{l({id:391})})}),e.features.with(["/translator/web/voiceDictation"],e=>{e.onTrackRecordingAttempted.push(e=>{l({id:395,data:{recordingAttemptedData:{sourceLanguage:e||""}}})}),e.onTrackStartVoiceRecording.push((e,t)=>{l({id:396,data:{recordingStartedData:{sourceLanguage:e,recordingStartBrowserDelayMs:t}}})}),e.onTrackStopVoiceRecording.push((e,t)=>{l({id:397,data:{recordingStoppedData:{durationMs:e,source:t}}})}),e.onTrackSuccessfulTranscription.push(e=>{l({id:398,data:{transcriptionDoneData:{...e}}})}),e.onTrackNoSpeechDetectedError.push(()=>{l({id:399})}),e.onTrackTechnicalError.push(()=>{l({id:400})}),e.onTrackClearanceError.push(()=>{l({id:462})}),e.onTrackLanguageNotRecognizedError.push((e,t,a,n)=>{l({id:401,data:{languageNotRecognizedData:{detectedSourceLanguage:e,selectedSourceLanguage:t,durationMs:n,transcriptionId:a}}})}),e.onTrackMicrophoneAccessBlocked.push(()=>{l({id:402})}),e.onTrackOpenConsentDialogue.push(()=>{l({id:499})}),e.onUserGivesConsent.push(()=>{l({id:500})}),e.onTrackUserDeniesConsent.push(()=>{l({id:501})}),e.onTrackCloseConsentDialogue.push(()=>{l({id:502})})}),e.features.with(["/translator/smartEditing/alternativesExplanations"],e=>{e.events.alternativeExplanationStarted.push(()=>{l({id:478,data:{alternativeExplanationStartedData:{languageData:n.getTranslatorLanguageData()}}})});let t=e=>{switch(e){case"success":return 1;case"cached":return 2;case"error":return 3;case"cancel":return 4;default:return 0}};e.events.alternativeExplanationFinished.push(e=>{let{elapsedTimeInMs:a,resultType:r}=e;l({id:479,data:{alternativeExplanationFinishedData:{languageData:n.getTranslatorLanguageData(),elapsedTimeInMs:Math.floor(a),resultType:t(r)}}})})})})},32317:function(e,t,a){a.d(t,{hF:function(){return i},ok:function(){return l},yu:function(){return o}});var n=a(26367),r=a(89355);function o(e,t,a){if(!e||"number"!=typeof t||!a)return;let{word_pos:r,word_end:o}=(0,n.PV)(e,t,(0,n.T_)(a));return e.substring(r,o)}async function s(e,t,a,n){let o=`popup_anchor_highlight__with_key_${e}`,s=`sentence_anchor_positioning${e}`;t.highlightState.setInnerSentenceHighlight(s,{classes:[o],ranges:[{offset:a,length:1}],validationMode:r.s.SENTENCE_CONTENT_UNCHANGED,priority:1,optimizationMode:"none"}),await n();let i=document.getElementsByClassName(o)[0];if(!i){console.debug("No highlight node found"),t.highlightState.setInnerSentenceHighlight(s,null);return}let l=i.getBoundingClientRect(),u={right:l.right+8,left:l.left-8,top:l.top+l.height+document.documentElement.scrollTop};return t.highlightState.setInnerSentenceHighlight(s,null),u}function i(e,t,a,n){return s(e,a,n,()=>t.notifySourceSentencesChanged([a]))}function l(e,t,a,n){return s(e,a,n,()=>t.notifyTargetSentencesChanged([a]))}},71156:function(e,t,a){var n=a(30171),r=a(61606),o=a(32317),s=a(98808),i=a(57249);r.Z.defineType("/translator/web/targetContextEditing",["webTranslatorCore","/translator/core/config","/translator/core/domElements","/translator/smartEditing/smartTargetEditingDetector","/translator/smartEditing/smartTargetEditing","/translator/smartEditing/smartTargetEditingAlternativesCommunication","/translator/dictionary","/translator/core/highlightManagement","/translator/core/targetLanguages"],(e,t,a,r,l,u,d,c,g)=>{let h=(0,n.S3)(null),p=(0,n.S3)(null),m=(0,n.S3)(!1),S=(0,n.S3)(!1);(0,n.S1)([m],e=>{e&&S(!0)});let T=!t.get("isMobile"),f=d.isDictSupported,E=u.isSmartTargetEditingSupported,v=(0,n.S3)({}),C=(0,s.f)();(0,n.S1)([p,f,E],(t,a,n)=>{var r;if(!t)return;let o=(0,i.NH)({clickInfo:t.info,isSameClickPositionAsBefore:t.isSameClickPosition,isActiveLangContext:e.isActiveLangContext(t.info.langContext),isPopupOpen:l.isPopupOpen(),showAlternativesOnEveryClick:T});if(!n&&!a||!o){t.isSameClickPosition&&h(null),l.closePopup();return}if((null!==(r=t.info.clickNumber)&&void 0!==r?r:1)>1){h(null);return}let{info:{tSentenceCursorPos:s,tSentenceWordPos:d,trigger:c,langContext:p}}=t,m=p.areWordsWrittenContinuously()?s:d;if(!m)return;let S={targetSentence:m.sentence,globalCursor:m.cursorOffset,sentenceCursor:m.sentenceCursorOffset,trigger:c,data:{type:"alternatives",isComplete:!n,entries:[],error:!1},dataSecondary:void 0,targetLang:g.currentLanguage()};l.closePopup(),n?u.requestAlternatives({langContext:p,targetSentence:S.targetSentence,sentenceCursor:S.sentenceCursor,onShowLoading:()=>{l.openPopup(S)}}).then(e=>{if("stale"===e)return;let t=0===e.length&&!a;if(t)l.closePopup();else{let t=(0,i.J3)(S,p.areWordsWrittenContinuously(),e);l.openOrUpdate(t)}}).catch(e=>{l.closePopup(),console.warn("================","\n",e)}):l.openPopup(S)});let D=()=>{l.closePopup()};async function y(e){var t,n,r,s;let{targetSentence:i,sentenceCursor:l}=null!=e?e:{};if(!i||void 0===l)return;let u=await (0,o.ok)("targetContextEditing",c,i,l),d=null!==(t=null!==(n=null==g?void 0:null===(r=g.currentLanguage)||void 0===r?void 0:r.call(g).variant)&&void 0!==n?n:null==g?void 0:null===(s=g.currentLanguage)||void 0===s?void 0:s.call(g).lang)&&void 0!==t?t:"",h=(0,o.yu)(i.getText(),l,d),p={start:a.targetEdit.selectionStart};return{position:u,selection:p,word:h}}l.onTargetPopupOpened.push(()=>C()),l.onTargetPopupClosed.push(()=>{p(null)}),r.onAlternatives.push(e=>{let t=(0,i.ME)(e),a=h();h(t),p({info:e,isSameClickPosition:(0,i.BH)(a,t)})}),r.onStopSmartEditing.push(()=>{D()});let L=(0,n.S3)();return(0,n.S1)([l.targetPopupInfo],e=>{let t=L();L(e),t&&e&&e.targetSentence===t.targetSentence&&e.globalCursor===t.globalCursor&&e.sentenceCursor===t.sentenceCursor||(null==e?void 0:e.trigger)==="autocompletion"||y(e).then(e=>{e&&v(e),m(l.isPopupOpen())}).catch(e=>console.error(e))}),window.addEventListener("resize",()=>{D()},{passive:!0}),{isOpen:m,wasOpen:S,close:D,closeOutsideClick:e=>{let t=a.targetEdit.contains(e.target);t||(h(null),D())},context:v,isDictionarySupported:f,isAlternativesSupported:E,onOpened:C}})}}]);