"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[2136],{62522:function(e,t,r){var n=r(77396),a=r(98808),o=r(30171),i=r(61606);let s=e=>e?1e3:500;i.Z.defineType("/translator/common/charCount",["/translator/core/config","/translator/core/textareas","/translator/core/loadingTranslation"],(e,t,r)=>{let{isLoading:i}=r,l=e.get("CONFIG__IS_PRO"),u=e.get("isWriteMode"),d=e.get("CONFIG__IS_ANONYMOUS"),c=e.get("isApp"),f=(0,o.S3)(0),p=(0,o.S3)(!1),g=(0,o.S3)(!1),m=(0,o.S3)(!1),h=(0,o.S3)(""),S=(0,o.S3)(""),T=(0,o.S3)(!l),E=(0,o.S3)(!1),C=(0,o.S3)(!0),v=(0,n.$)(),b=(0,a.f)(),O=s(l),R=e.get("CONFIG__MAX_NUM_CHARACTERS");return t.onSourceTextChanged.push(e=>{f(e.length)}),t.onTargetTextChanged.push(e=>{C(0===e.length)}),(0,o.S1)([f],e=>{h(`${R} / ${e}`),S(`${e} / ${R}`),p(e>O),g((!!u||!l)&&e>R),!d||u||c||m(e>3e3)}),(0,o.S1)([g],e=>{e?E(!0):E(!1)}),{charCount:f,isMarkerVisible:p,isLimitReached:g,isAnonymousLimitReached:m,charLimitWithCount:h,charCountWithLimit:S,onClickProAd:v,onDisplayProAd:b,charLimit:R,isProAdVisible:E,showLimit:T,isLoading:i,isTargetTextEmpty:C}})},70055:function(e,t,r){var n=r(61606),a=r(30171),o=r(98808);n.Z.defineType("/translator/common/copyTargetText",["core/domElements","common/copyTextFromTextarea","/translator/core/textareas"],(e,t,r)=>{let n=(0,a.G7)([r.isTargetTextEmpty],e=>!e),i=(0,a.S3)(!1),s=(0,o.f)(),l=(0,o.f)(),u=async()=>{s(e.targetEdit.value);try{await t.copyTextToClipboard(e.targetEdit),i(!0),setTimeout(()=>{i(!1)},2e3)}catch(e){console.error("/translator/common/copyTargetText: failed to write to clipboard")}l(e.targetEdit.value)};return{canCopy:n,showCopiedNotification:i,copy:u,onBeforeCopy:s,onAfterCopy:l}})},29890:function(e,t,r){var n;r.d(t,{w:function(){return a}});let a=((n={}).plain="text/plain",n.html="text/html",n)},99467:function(e,t,r){var n=r(45058),a=r(61606),o=r(98808),i=r(29890),s=r(30171);function l(e,t){return new Promise((r,a)=>{try{!function(e,t){let r=e.disabled;if(r&&(e.disabled=!1),e.focus(),e.select(),(0,n.zc)()||(0,n.IN)()||t){let r=document.createRange();r.selectNodeContents(t?e.childNodes[0]:e);let n=window.getSelection();null==n||n.removeAllRanges(),null==n||n.addRange(r),e.setSelectionRange(0,9999999)}r&&(e.disabled=!0)}(e,t),document.execCommand("copy"),r()}catch(e){a(e)}})}a.Z.defineType("/translator/common/copyTextFromTextarea",["/translator/core/config"],e=>{let t=(0,o.f)(),r=(0,o.f)(),n=e.get("isWriteMode"),a=e.get("isRtfEnabled"),u=async function(e,o){void 0===o&&(o=!0);let u=!!window.navigator.clipboard&&!!window.navigator.clipboard.writeText;if(u){let u=(0,s.S3)(e.value),d=(0,s.S3)("");if(a&&d(e.dTextarea.getHtml()),o){if(a){let e=(0,s.S3)({plain:u(),html:d()});r(e),u(e().plain),d(e().html)}else t(u)}try{if(a){let e=[new ClipboardItem({[i.w.html]:d(),[i.w.plain]:u()})];await navigator.clipboard.write(e)}else await navigator.clipboard.writeText(u())}catch(t){console.warn(t),await l(e,n)}}else await l(e,n)};return{copyTextToClipboard:u,doUpdateTextToCopy:t,doUpdateHtmlToCopy:a&&r}})},32818:function(e,t,r){var n=r(4769),a=r(98808),o=r(30171),i=r(61606),s=r(51098),l=r(10878),u=r(12959);i.Z.defineType("/translator/common/errorHandling",["/translator/core/networkStatus","/translator/core/config","/translator/core/requestHandling","/translator/environment/userInfo","globalState"],(e,t,r,i,d)=>{var c;let f,p=0,g=(0,a.f)(),m=(0,a.f)(),h=(0,o.S3)([]),S=new Set,T=e=>S.has(e),E=e=>{h(h().filter(t=>t.type!==e)),S.delete(e)},C=e=>{let t=[];return t.push(e.statusCode||"0"),e.rpcError&&e.rpcError.code&&t.push(`${e.rpcError.code}`),e.trigger&&("splitting"===e.trigger?t.push("S"):"translation"===e.trigger&&t.push("T")),`(${t.join("-")})`},v=e=>{T(e.type)||(h([].concat((0,n.Z)(h()),[e])),S.add(e.type),g(e))},b=e=>{T(e)&&(E(e),m(e))},O=(c=(e,t)=>{v({type:s.c.TooManyRequests,isIpBlock:t,priority:1e4,errorCode:e})},f=!1,r.onRequestContextStarted.push(()=>{f=!1}),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];f||(f=!0,r.waitForPendingRequests().then(()=>{c.apply(void 0,t)}))});return e.onRPCCallFailed.push(()=>{p=Date.now()}),e.onRequestFailed.push((r,n)=>{try{let o=C(n);if(n.errorType===l.ri&&n.rpcError&&429===n.statusCode){if("autocompletion"===r||"alternatives"===r)t.get("CONFIG__IS_PRO")?console.warn("429 in autocomplete/alternatives: ignore"):(d[l.AL](!0),d[l.JR]=2*Date.now());else if(d[l.JR]=Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION"),t.get("CONFIG__IS_PRO")||1042901!==n.rpcError.code&&1042902!==n.rpcError.code&&1042911!==n.rpcError.code&&1042912!==n.rpcError.code)v({type:s.c.Overloaded,text:o,priority:50,errorCode:n}),setTimeout(()=>{b(s.c.Overloaded)},6e4);else{let e=1042901===n.rpcError.code||1042902===n.rpcError.code?"user":"ip";setTimeout(()=>O(n,"ip"===e))}}else if(n.errorType===l.ri&&n.rpcError&&503===n.statusCode){var a;d[l.JR]=Math.max(d[l.JR],Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION"));let r=null!==(a=i.isProAvailable())&&void 0!==a&&a,u=t.get("CONFIG__IS_PRO"),c=[1042911,1042912].includes(n.rpcError.code);u||(r?setTimeout(()=>O(n,c)):(v({type:s.c.ServiceUnavailable,text:o,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(b(s.c.ServiceUnavailable),"REMOVE"))))}else n.errorType===l.ri&&n.rpcError&&456==n.statusCode?(v({type:s.c.QuotaReached,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(b(s.c.QuotaReached),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&403==n.statusCode?(v({type:s.c.AccountIssue,text:o,priority:90,errorCode:n}),e.onRPCCallSucceeded.push(()=>(b(s.c.AccountIssue),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&401==n.statusCode?(v({type:s.c.SessionLost,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>(b(s.c.SessionLost),"REMOVE"))):n.errorType===l.ri&&n.rpcError&&412==n.statusCode?(v({type:s.c.TooMuchAuthentication,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>(b(s.c.TooMuchAuthentication),"REMOVE"))):n.errorType===l.ri?(d[l.JR]=Math.max(d[l.JR],Date.now()+t.get("CONFIG__BLOCK_TYPING_REQUEST_DURATION")),S.has(s.c.NetworkIssue)||(v({type:s.c.NetworkIssue,text:o,priority:100,errorCode:n}),e.onRPCCallSucceeded.push(()=>{if(Date.now()>p+2e4)return b(s.c.NetworkIssue),"REMOVE"}))):v({type:s.c.InternalIssue,priority:100,errorCode:n})}catch(e){}}),d[l.AL].onValueChanged.push(e=>{e?v({type:s.c.LimitedAdvancedEditing,priority:20,errorCode:{statusCode:429,trigger:"translation"}}):b(s.c.LimitedAdvancedEditing)}),u.Z["system-error"]&&setTimeout(()=>{let e=s.c[u.Z["system-error"]];e&&(e===s.c.TooManyRequests?v({type:e,priority:1e4,isIpBlock:!!u.Z["too-many-requests-ip-block"],errorCode:{statusCode:0,trigger:"translation"}}):v({type:e,priority:1e4,text:"(0)",errorCode:{statusCode:0,trigger:"translation"}}))},2e3),{onError:g,onErrorSolved:m,activeSystemErrors:h,isSystemErrorActive:T,removeActiveSystemError:E,removeSystemErrors:()=>{h([]),S.clear()},addSystemError:v,resolveSystemError:b}})},67873:function(e,t,r){var n=r(12959),a=r(98808),o=r(61606),i=r(30171),s=r(4769),l=r(45695),u=r(22133);let d=function(e){void 0===e&&(e=!0);let t={A:!0,ABBR:!1,ADDRESS:!1,ARTICLE:!0,ASIDE:!1,B:!0,BDI:!1,BDO:!1,BLOCKQUOTE:!0,BODY:!0,BR:!0,CAPTION:!1,CENTER:!1,CITE:!0,CODE:!0,DATA:!1,DD:!0,DEL:!0,DETAILS:!1,DFN:!1,DIV:!0,DL:!0,DT:!0,EM:!0,FIELDSET:!1,FIGURE:!1,FIGCAPTION:!1,FONT:!1,FOOTER:!1,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!1,HR:!1,HTML:!1,I:!0,IMG:!1,INS:!0,KBD:!1,LABEL:!1,LEGEND:!1,LI:!0,MAIN:!1,MARK:!0,NAV:!1,OL:!0,P:!0,PRE:!0,Q:!1,S:!0,SECTION:!0,SMALL:!1,SOURCE:!1,SPAN:!0,STRONG:!0,SUB:!0,SUMMARY:!1,SUP:!0,TABLE:!1,TBODY:!1,TD:!1,TFOOT:!1,TH:!1,THEAD:!1,TIME:!1,TR:!1,UL:!0,U:!0,VAR:!1,VIDEO:!1},r=Array.from(new Set([].concat((0,s.Z)(l.tB),["SUMMARY","LEGEND","DETAILS"]))).reduce((e,t)=>({...e,[t]:!0}),{}),n={FORM:!0,"GOOGLE-SHEETS-HTML-ORIGIN":!0},a={align:!0,color:!0,controls:!0,height:!0,href:!0,id:!0,src:!0,style:!0,target:!0,title:!0,type:!0,width:!0,class:!1},o={"background-color":!0,color:!0,"font-size":!0,"font-style":!0,"font-weight":!0,"text-align":!0,"text-decoration":!0,"text-decoration-line":!0,width:!0,"vertical-align":!0},i=["http:","https:","data:","m-files:","file:","ftp:","mailto:","pw:"],d={href:!0,action:!0},c=new DOMParser,f=!0,p=new RegExp(u.oo),g=RegExp(`/${u.Cc}+(
)+/g`),m=RegExp(`/(
)+${u.Cc}+/g`),h=e;function S(e){var t,r;let n=e.firstChild;for(;null!==(r=n)&&void 0!==r&&r.firstChild;)n=n.firstChild;(null===(t=n)||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE&&n.textContent&&(n.textContent=n.textContent.trimStart())}function T(e,t){return(0,s.Z)(e.childNodes).filter(e=>e.tagName===t.toUpperCase()).slice(-1)[0]}function E(e){var t,r;let n=e.lastChild;for(;null!==(r=n)&&void 0!==r&&r.lastChild;)n=n.lastChild;(null===(t=n)||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE&&n.textContent&&(n.textContent=n.textContent.trimEnd())}return{sanitizeHtml:(e,l)=>{let u=!1,C=e=>{let c;if(e.nodeType===Node.TEXT_NODE){var v,O,R,x,y,w,D,N;let t=null!==(v=null!==(O=null===(R=e.parentElement)||void 0===R?void 0:R.closest("th"))&&void 0!==O?O:null===(x=e.parentElement)||void 0===x?void 0:x.closest("td"))&&void 0!==v?v:null;if(t){let r=function(e){let t=e;for(;null!==(r=t)&&void 0!==r&&r.lastChild;){var r;t=t.lastChild}return t}(t);r===e&&(T(t.parentElement,"TH")===t||T(t.parentElement,"TD")===t||(e.textContent+=" "))}if(c=e.cloneNode(!0),h&&f&&c.textContent){D=c,p.test(null!==(N=D.textContent)&&void 0!==N?N:"")&&!0===r[null===(y=e.previousSibling)||void 0===y?void 0:y.tagName]&&!0===r[null===(w=e.nextSibling)||void 0===w?void 0:w.tagName]&&(c.textContent=""),c.textContent=c.textContent.replace(g,"$1").replace(m,"$1").replace(/\n/g," ").replace(/[ ]+/g," "),(u||e.previousSibling&&!0===r[e.previousSibling.tagName])&&(c.textContent=c.textContent.trimStart());let t=c.textContent.slice(-1);u=t.trim()!==t}}else if(e.nodeType===Node.ELEMENT_NODE&&(!0===t[e.tagName]||!0===n[e.tagName]||l&&e.matches(l))){!0===n[e.tagName]?c=b.createElement("DIV"):(c=b.createElement(e.tagName),f=!(!h||"PRE"===c.tagName||e.closest("pre")));for(let t=0;t<e.attributes.length;t++){let r=e.attributes[t];if(!0===a[r.name]){if("style"===r.name)for(let t=0;t<e.style.length;t++){let r=e.style[t];!0===o[r]&&c.style.setProperty(r,e.style.getPropertyValue(r))}else{if(!0===d[r.name]&&r.value.indexOf(":")>-1&&!i.some(e=>r.value.startsWith(e)))continue;c.setAttribute(r.name,r.value)}}}let t=e.childNodes;for(let e of t){let t=C(e);c.appendChild(t)}if(h&&("SPAN"===c.tagName||"B"===c.tagName||"I"===c.tagName||"U"===c.tagName)&&""===c.innerHTML.trim()){let e=c.innerHTML;return c=b.createDocumentFragment(),""!==e&&(c.textContent=" "),c}h&&!0===r[c.tagName]&&f&&(S(c),E(c))}else if(e.nodeType===Node.ELEMENT_NODE&&(!1===t[e.tagName]||e.tagName.includes("-"))){c=!0===r[e.tagName]?b.createElement("P"):b.createDocumentFragment();let t=(0,s.Z)(e.childNodes);for(let r of(("TABLE"===e.tagName||"THEAD"===e.tagName||"TBODY"===e.tagName||"TR"===e.tagName)&&(t=t.filter(e=>void 0!==e.tagName),"TR"===e.tagName&&t.push(document.createElement("br"))),t)){let e=C(r);c.appendChild(e)}h&&!0===r[e.tagName]&&f&&(S(c),E(c))}else c=b.createDocumentFragment();return c},v=e.trim();if(""===v||"<br>"===v)return"";-1===e.indexOf("<body")&&(v=`<body>${e}</body>`);let b=c.parseFromString(v,"text/html");"BODY"!==b.body.tagName&&b.body.remove(),"function"!=typeof b.createElement&&b.createElement.remove();let O=C(b.body);return O.innerHTML},allowedTags:t,allowedAttributes:a,allowedCssStyles:o,allowedSchemas:i}};var c=r(69496),f=r(29890);let p=e=>{let t=window.getSelection();if(!t)return!1;let r=t.getRangeAt(0);r.deleteContents();let n=r.createContextualFragment(e);if(r.startContainer instanceof HTMLElement&&"BR"===r.startContainer.tagName&&r.startContainer===r.endContainer){let e=r.startContainer;r.setStartBefore(e),r.setEndBefore(e)}else r.startContainer instanceof HTMLElement&&1===r.startContainer.children.length&&"BR"===r.startContainer.children[0].tagName&&(r.setStartBefore(r.startContainer.children[0]),r.setEndAfter(r.startContainer.children[0]),r.deleteContents());r.insertNode(n),r.collapse();let a=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertFromPaste"});return r.startContainer.dispatchEvent(a),!0};o.Z.defineType("/translator/common/interceptClipboard",["/translator/core/domElements","/translator/core/textareas","/translator/core/config"],(e,t,r)=>{let{sourceEdit:o,targetEdit:s,isNewTextareaActive:l}=e,u="dtx-disable-rtf"in n.Z,g="dtx-show-sanitized"in n.Z,m=r.get("isRtfEnabled"),h=(0,a.f)(),S=(0,a.f)(),T=(0,a.f)(),E=(0,a.f)(),C=d(),v=(0,i.S3)({containsInlineFormatting:!1,containsBlockFormatting:!1}),b=(0,a.f)();return[o,s].forEach(e=>{e.addEventListener("paste",r=>{let n;let a=(0,i.S3)(!0);v({containsInlineFormatting:!1,containsBlockFormatting:!1}),t.onSourceTextChanged.push(()=>(t.onSourceTextChanged.push(()=>(v({containsInlineFormatting:!1,containsBlockFormatting:!1}),"REMOVE")),"REMOVE"));let s=r.clipboardData;if(null===s)return;h(s);let d=s.getData("Text").trim().replace(/\r/g,""),f="";m&&(f=s.getData("text/html"));let T=(0,i.S3)({html:f,plain:d});if(S(e,d,a),b(e===o,T),m){if(v((0,c.a1)(f)),n=!1,l()&&T().html){let e=T().html.replaceAll("\n"," "),t=u?e:C.sanitizeHtml(e);g&&console.debug("[interceptClipboard]",`before sanitization: ${e} 
 after sanitization: ${t}`);let n=p(t);return n||document.execCommand("insertHTML",!1,t),r.preventDefault(),!0}}else n=l()&&!!s.getData("text/html");if(!1===a())r.preventDefault();else if(n||T().plain!==d){if(t.insertTextIntoActiveTextarea(T().plain))return r.stopPropagation(),r.preventDefault(),r.returnValue=!1,!1;console.warn("[paste] Could not insert pasted text.")}return!0});let r=t=>{let{selectionStart:r,selectionEnd:n}=e,[a,u]=r<=n?[r,n]:[n,r],d=(e.value||"").substring(a,u),c="";m&&l()&&(c=e.dTextarea.getHtmlForRangeWithBlocks(a,u-a));let p={plain:d,html:c},g=(0,i.S3)(p);e===s&&T(g),e===o&&E(g);let h=l(),S=g();(h||d!==S.plain)&&(t&&t.clipboardData&&t.clipboardData.setData?(S.html&&t.clipboardData.setData(f.w.html,S.html),t.clipboardData.setData(f.w.plain,S.plain),t.preventDefault()):console.warn("Clipboard could not be updated."))};e.addEventListener("copy",r),e.addEventListener("cut",e=>{r(e),e.defaultPrevented&&document.execCommand("insertText",!1,"")})}),{onClipboardPaste:h,onBeforePaste:S,doUpdateClipboardContentBeforePasting:b,doUpdateCopiedTranslation:T,onBeforeCopyFromSource:E,contentInfo:v}})},46096:function(e,t,r){var n=r(61606),a=r(84627),o=r(88141),i=r(26493),s=r(25889);n.Z.defineType("/translator/common/observeTextSession",["/translator/webTranslatorCore","/translator/core/domElements","/translator/core/translateSourceSentences","/translator/core/textareas","/translator/core/predefinedState","/translator/core/requestHandling","/translator/common/observeTranslationBackend","/translator/core/networkStatus"],(e,t,r,n,l,u,d,c)=>{let f,p;let g=null;e.features.with(["/translator/dictionary"],e=>{g=e});let m="",h="",S=0,T=!1,E=!1,C=(0,a.fo)({allowReplay:!0}),v=(0,a.fo)({allowReplay:!0}),b=(0,a.fo)({allowReplay:!0}),O=(0,a.fo)(),R=(0,a.fo)(),x=(0,a.fo)(),y=(0,a.fo)(),w=(0,a.fo)(),D=(0,o.xu)(1e4),N=(0,o.xu)(1e4),I=(0,a.S3)(!1),A=(0,a.S3)(!1),H=(0,a.S3)(!1);function M(){p=Date.now()%864e5*1e6+Math.round(1e6*Math.random()),d.setTextSessionId(`${p}`)}let q=(e,t)=>{if(e===t)return 0;let r=i.Z.getEqualPreAndPostfix(e,t);return e.length>t.length?e.length-(r[0]+r[1]):t.length-(r[0]+r[1])};M(),n.onSourceTextBecomesEmpty.push(M),document.addEventListener("selectionchange",()=>{if(f=void 0,t.isSelectionInSourceTextarea()){let e=t.getSourceEditCursorOffset(),r=t.getSourceEditCursorOffsetEnd();f={startOffset:e,endOffset:r,text:n.getSourceText()}}}),e.features.with(["/translator/common/switchLang"],e=>{e.onSwitchLanguage.push(e=>{y(e),T=!0,setTimeout(()=>{T=!1},200)})}),e.features.with(["/translator/write/switchContent"],e=>{e.onContentSwitched.push(()=>{w(),E=!0,setTimeout(()=>{E=!1},200)})});let F=e=>{S=n.getSourceText().length,document.removeEventListener("visibilitychange",P),window.removeEventListener("beforeunload",P),S>0&&u.waitForPendingRequests().then(()=>{var t,r;A(!1),b({...e,dictionaryTriggered:null!==(t=null===(r=g)||void 0===r?void 0:r.isDictionaryAvailable())&&void 0!==t&&t,...d.getTrackingData(e.textSessionId)})})},P=e=>{if("beforeunload"===e.type||"visibilitychange"===e.type&&"hidden"===document.visibilityState){let e={textSessionId:`${p}`,numberOfCharactersBefore:S,numberOfCharactersAfter:n.getSourceText().length};F(e),D(()=>{})}};return n.onSourceTextChanged.pushWithReplay((t,a,o,i)=>{let h=Date.now();if("internal"===a)return;let b=t.trim(),O=m.trim();if(b===O&&!o)return;let R=""!==b,{changedPartInFirstString:x,changedPartInSecondString:y}=s.ZP.getStringChangeRange(O.replace(/\s/g,""),b.replace(/\s/g,""));if(x+y===""||!R&&"replace"===a)return;let w=!!(""!==O!==R||f&&!f.text.substr(0,f.startOffset).trim()&&!f.text.substr(f.endOffset).trim()||T||E||"replace"===a);w&&(M(),S=0,T=!1,E=!1);let N=l.isInPredefinedState()||"typing"!==a&&w;if(N){let t={textSessionId:`${p}`,numberOfCharacters:n.getSourceText().length},a={pastedInlineFormatting:!1,pastedBlockFormatting:!1};e.features.with(["/translator/common/interceptClipboard"],e=>{let t=e.contentInfo();a.pastedInlineFormatting=t.containsInlineFormatting,a.pastedBlockFormatting=t.containsBlockFormatting});let o=H()||l.isInPredefinedState()?C:v;S=n.getSourceText().length;let s=()=>(u.waitForPendingRequests().then(()=>{let e=Date.now()-h;setTimeout(()=>{var r,n,s;g&&g.isRequestPending()?null===(s=g)||void 0===s||s.isRequestPending.onValueChanged.push(()=>{var r,n;return o({...t,...a,dictionaryTriggered:null!==(r=null===(n=g)||void 0===n?void 0:n.isDictionaryAvailable())&&void 0!==r&&r,completeTranslationDuration:e,...d.getTrackingData(t.textSessionId),updateCausedBy:i}),"REMOVE"}):o({...t,...a,dictionaryTriggered:null!==(r=null===(n=g)||void 0===n?void 0:n.isDictionaryAvailable())&&void 0!==r&&r,completeTranslationDuration:e,...d.getTrackingData(t.textSessionId),updateCausedBy:i})})}),"REMOVE");S>0&&(r.onTargetSentencesHaveChanged.push(s),c.onRequestFailed.push(e=>{if("translation"===e||"splitting"===e)return r.onTargetSentencesHaveChanged.remove(s),"REMOVE"}))}else{let e=()=>{let e={textSessionId:`${p}`,numberOfCharactersBefore:S,numberOfCharactersAfter:n.getSourceText().length,updateCausedBy:i};return A(!0),D(()=>F(e)),document.removeEventListener("visibilitychange",P),window.removeEventListener("beforeunload",P),document.addEventListener("visibilitychange",P),window.addEventListener("beforeunload",P),"REMOVE"};r.onTargetSentencesHaveChanged.push(e),c.onRequestFailed.push(t=>{if("translation"===t||"splitting"===t)return r.onTargetSentencesHaveChanged.remove(e),"REMOVE"})}m=t}),n.onTargetTextChanged.push((e,t)=>{if("update"===t||"internal"===t||"replace"===t){I()||(h=e);return}if(I(!0),e.trim()===h.trim())return;let r={textSessionId:`${p}`,numberOfCharactersSource:n.getSourceText().length,numberOfCharactersTargetBefore:h.length,numberOfCharactersTargetAfter:e.length,characterDiff:q(h,e)};N(()=>{I(!1),h=e,O(r)})}),e.features.with(["/translator/smartEditing/smartTargetEditing"],e=>{e.onUserSelectsAlternative.push(t=>{let{index:r,isAutoCompletion:n}=t,a={textSessionId:`${p}`,selectedPosition:r,suggestionType:n?2:1};n||e.onTargetSentenceChangedByAlternative.push(e=>{let{targetTextBefore:t,targetTextAfter:r}=e;return x({...a,characterDiff:q(t,r)}),"REMOVE"}),n&&e.onTargetSentenceChangedByAutocompletion.push(e=>{let{targetTextBefore:t,targetTextAfter:r}=e;return x({...a,characterDiff:q(t,r)}),"REMOVE"})})}),{getTextSessionId:()=>p,onInitialFullTranslation:C,onFullTranslation:v,onPartialTranslation:b,onTranslationCorrection:O,onTranslationAutocomplete:R,onSuggestionDropdownSelection:x,onLanguageSwitchTriggered:y,isTranslationCorrectionSessionActive:I,isPartialTranslationSessionActive:A,onContentSwitchTriggered:w,setSourceTextIsPredefined:e=>H(e)}})},41655:function(e,t,r){var n=r(61606);let a=function(){function e(){this.numberOfSplitTextRequests=0,this.numberOfFailedSplitTextRequests=0,this.sumOfDurationOfSplitTextRequests=0,this.numberOfHandleJobsRequests=0,this.numberOfFailedHandleJobsRequests=0,this.sumOfDurationOfHandleJobsRequests=0,this.numberOfHandleJobsSentences=0,this.numberOfHandleJobsJobs=0,this.sumOfServerSideDurationOfSplitTextRequests=0,this.sumOfServerSideDurationOfHandleJobsRequests=0,this.sampleTranslationRequestsStats=void 0,this.sampleSplittingRequestsStats=void 0,this.writeProxyUsed=!1}return e.prototype.getTrackingDataAsObject=function(){return{numberOfSplitTextRequests:this.numberOfSplitTextRequests,sumOfDurationOfSplitTextRequests:Math.round(this.sumOfDurationOfSplitTextRequests),numberOfHandleJobsRequests:this.numberOfHandleJobsRequests,sumOfDurationOfHandleJobsRequests:Math.round(this.sumOfDurationOfHandleJobsRequests),numberOfHandleJobsSentences:this.numberOfHandleJobsSentences,numberOfHandleJobsJobs:this.numberOfHandleJobsJobs,randomSplitTextRequestStats:this.sampleSplittingRequestsStats,randomHandleJobsRequestStats:this.sampleTranslationRequestsStats,totalServerSideDurationOfSplitTextRequests:this.sumOfServerSideDurationOfSplitTextRequests,totalServerSideDurationOfHandleJobsRequests:this.sumOfServerSideDurationOfHandleJobsRequests,writeProxyUsed:this.writeProxyUsed}},e}();n.Z.defineType("/translator/common/observeTranslationBackend",["/translator/core/translationBackend","/translator/webTranslatorCore"],(e,t)=>{let r=new Map,n="";function o(e){void 0===e&&(e=n);let t=r.get(e);if(!t){!function(){let e=r.keys(),t=Date.now()-18e4;for(let n of e){let e=r.get(n);e.lastAccess<t&&r.delete(n)}}();let t={lastAccess:Date.now(),data:new a};return r.set(e,t),t.data}return t.lastAccess=Date.now(),t.data}function i(e,t,r){let{totalDuration:n,requestReceiveDuration:a,handshakeDuration:i}=r,s=n-a-i,l=o();"splitting"===e?(l.numberOfSplitTextRequests+=1,l.sumOfDurationOfSplitTextRequests+=t,l.sumOfServerSideDurationOfSplitTextRequests+=s):(l.numberOfHandleJobsRequests+=1,l.sumOfDurationOfHandleJobsRequests+=t,l.sumOfServerSideDurationOfHandleJobsRequests+=s)}return e.onRequestSucceeded.push((e,t,r)=>{i(e,t,r)}),e.onRequestFailed.push((e,t,r,n)=>{(function(e){let t=o();"splitting"===e?t.numberOfFailedSplitTextRequests+=1:t.numberOfFailedHandleJobsRequests+=1})(e),i(e,r,n)}),e.onSplitSentenceResultReceived.push((e,t)=>{let r=o(),n=r.numberOfSplitTextRequests-r.numberOfFailedSplitTextRequests||1;if(Math.random()<=1/n){let n=0,a=0;e.texts.forEach(e=>{n+=e.chunks.reduce((e,t)=>{var r;return e+(null!==(r=t.sentences.length)&&void 0!==r?r:0)},0),a+=e.chunks.flatMap(e=>e.sentences).reduce((e,t)=>e+t.text.length,0)}),r.sampleSplittingRequestsStats={sentenceCount:n,numberOfCharacters:a,...t}}}),e.onTranslationsReceived.push((e,t,r,n,a)=>{let i=r.reduce((e,t)=>{var r,n;return e+(null!==(r=null===(n=t.sentences)||void 0===n?void 0:n.length)&&void 0!==r?r:0)},0),s=o();s.numberOfHandleJobsSentences+=i,s.numberOfHandleJobsJobs+=r.length;let l=s.numberOfHandleJobsRequests-s.numberOfFailedHandleJobsRequests||1;if(Math.random()<=1/l){let e=r.flatMap(e=>e.sentences).reduce((e,t)=>{var r;return e+(null!==(r=null==t?void 0:t.text.length)&&void 0!==r?r:0)},0);s.sampleTranslationRequestsStats={sentenceCount:i,numberOfCharacters:e,jobCount:r.length,...a}}}),t.features.with(["/translator/write/textStyles/backend"],e=>{e.textStylesBackend().onTranslationsReceived.push(()=>{let e=o();e.writeProxyUsed=!0})}),t.features.with(["/translator/write/corrections"],e=>{e.correctionsBackend().onTranslationsReceived.push(()=>{let e=o();e.writeProxyUsed=!0})}),{getTrackingData:e=>o(e).getTrackingDataAsObject(),setTextSessionId:e=>{n=e}}})},26493:function(e,t,r){var n=r(46625);let a={diff:n.Hg,getEqualPreAndPostfix:n.zj,slicePrefixAndPostfix:n.jx,_diffToString:n.eB,_test_fuzzy:n.Df,test:n.Bu};"object"==typeof window&&window.M&&window.M.registerAsync("diff",a),t.Z=a}}]);