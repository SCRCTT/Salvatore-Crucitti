"use strict";(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[5320],{86679:function(e,t,n){n.d(t,{Ve:function(){return a},cZ:function(){return d},kp:function(){return s}});var o=n(46748);let i={NONE:{},META:{meta:!0},CTRL:{ctrl:!0},SHIFT_META:{meta:!0,shift:!0},SHIFT_CTRL:{shift:!0,ctrl:!0}};function r(e,t,n){return null!=e&&!!e.key&&e.key.toUpperCase()===t&&e.ctrlKey===(!0===n.ctrl)&&e.metaKey===(!0===n.meta)&&e.shiftKey===(!0===n.shift)&&e.altKey===(!0===n.alt)}let s=e=>(0,o.V5)()?r(e,"Z",i.META):r(e,"Z",i.CTRL),a=e=>(0,o.V5)()?r(e,"Z",i.SHIFT_META)||r(e,"Y",i.META):(0,o.ED)()?r(e,"Z",i.SHIFT_CTRL)||r(e,"Y",i.CTRL)||r(e,"F4",i.NONE):r(e,"Z",i.SHIFT_CTRL),d=function(e,t,n){e.addEventListener("keydown",e=>{s(e)?(e.preventDefault(),t()):a(e)&&(e.preventDefault(),n())})}},52425:function(e,t,n){n.d(t,{Q2:function(){return d},c1:function(){return s},vm:function(){return l},wd:function(){return a}});var o=n(72047),i=n(94434),r=n(93843);let s="__tNodeId",a="__nonContentType",d="__syncedListeners",l=function(){function e(){this._nodeRegistry=void 0,this._nodeRegistry=new Map}var t=e.prototype;return t.createTextNode=function(e,t,n){if("\n"===e)return this.createLineBreakNode();let o=new i.oS(i.$P.TEXT,!0);return o._text=e,t&&o.applyFormatting(t),n&&o.applyAttributes(n),this.registerNode(o),o},t.createInlineNode=function(e,t){void 0===t&&(t=!1);let n=new i.oS(i.$P.INLINE,t);return n._setTagName(e),this.registerNode(n),n},t.createBlockContainerNode=function(e,t){void 0===t&&(t=!1);let n=new i.oS(i.$P.BLOCK,t);return n._setTagName(e),this.registerNode(n),n},t.createLineBreakNode=function(){let e=new i.oS(i.$P.LINE_BREAK,!0);return e._setTagName("br"),this.registerNode(e),e},t.createNodeWithEqualType=function(e){return e.isTextNode()?this.createTextNode(e._text,e.getFormattingInfo(),e.getAttributes()):e.isLineBreak()?this.createLineBreakNode():e.isInlineNode()?this.createInlineNode(e._tagName,e.isContent()):this.createBlockContainerNode(e._tagName,e.isContent())},t.createLineNode=function(){return this.createBlockContainerNode("P",!0)},t.registerNode=function(e){this._nodeRegistry.set(e.id,e)},t.createNodeFromDescription=function(e){let{tag:t,type:n,childNodes:r,text:s,classes:a,isContent:d,nonContentNodeType:l,formatting:c,attributes:h}=e,u=null;if(n===i.$P.TEXT)u=this.createTextNode(s,c?o.gP.fromData(c):null,h);else if(n===i.$P.INLINE)u=this.createInlineNode(t,d),r&&u.replaceChildren(r.map(e=>this.createNodeFromDescription(e)));else if(n===i.$P.BLOCK)u=this.createBlockContainerNode(t||"P",d),r&&u.replaceChildren(r.map(e=>this.createNodeFromDescription(e)));else if(n===i.$P.LINE_BREAK)return this.createLineBreakNode();else throw Error("[createNodeFromDescription] invalid type");return a&&a.forEach(e=>u.addClass(e)),l&&u.setNonContentNodeType(l),u},t.getNodeById=function(e){return this._nodeRegistry.get(e)},t.getNodeForPath=function(e,t){let n=e;return t.forEach(e=>n=n._childNodes[e]),n},t.removeNode=function(e){if(this._nodeRegistry.has(e.id)){var t;null===(t=e.getParentNode())||void 0===t||t.detachChild(e),this._nodeRegistry.delete(e.id)}},t.garbageCollect=function(){let e=this._nodeRegistry.values();for(let t of e)this.garbageCollectNodeIfUnconnected(t)},t.garbageCollectNodeIfUnconnected=function(e){let t=e instanceof i.oS?e:this.getNodeById(e);return!!t&&!this.nodeIsConnectedToDom(t)&&(this.removeNode(t),!0)},t.nodeIsConnectedToDom=function(e){let t=e._domNode;if(!t||t[s]!==e.id)return!1;let{body:n}=document;for(;t&&t!==n;)t=t.parentNode;return null!==t},t.getNodeForDomNode=function(e){let t=e[s];return void 0!==t?this._nodeRegistry.get(t):void 0},t.getNearestNodeForDomNode=function(e){let t=e;for(;null!=t;){let n=this.getNodeForDomNode(e);if(n)return n;t=t.parentNode}},t.cutTextNode=function(e,t){var n;if(!e.isTextNode())throw Error(`Trying to cut a non-text node: ${e.toString()}`);if(t<=0)return[null,e];let o=null!==(n=e.getText())&&void 0!==n?n:"";if(t>=o.length)return[e,null];let i=o.substring(0,t),r=o.substring(t),s=this.createTextNode(r,e.getFormattingInfo(),e.getAttributes());e.setText(i),s.applyClassesFrom(e);let a=[e,s];return e._parentNode&&e._parentNode.replaceChild(e,a),a},t.encapsulateTextContent=function(e,t,n){if(t+n<=0||n<=0)return[];let o=t,i=n;o<0&&(i+=o,o=0);let s=(0,r.O9)(e),a=o+i,d=s.map(e=>e.collectText().length),l=d.slice();for(let e=1;e<l.length;e++)l[e]+=l[e-1];let c=l.map((e,t)=>e-d[t]),h=(0,r.cx)(c,e=>e>o,c.length)-1,u=(0,r.cx)(c,e=>e>=a,c.length)-1;if(o>=l[l.length-1])return[];if(h===u){let[e,t]=this.cutTextNode(s[h],o-c[h]);if(t){let[e,n]=this.cutTextNode(t,a-o);if(e)return[e]}return[]}let[f,g]=this.cutTextNode(s[h],o-c[h]),m=g?[g]:[];for(let e=h+1;e<u;e++)m.push(s[e]);let[N,p]=this.cutTextNode(s[u],a-c[u]);return N&&m.push(N),m},t.encapsulateContentByOffset=function(e,t,n,o){var s,a,d,l;let c=[];if(t+n<0)return c;let h={tag:o.tag,classes:o.classes,nonContentNodeType:o.nonContentNodeType,type:null!==(s=o.type)&&void 0!==s?s:i.$P.INLINE,isContent:!1},u=t,f=n;u<0&&(f+=u,u=0);let g=(0,r.O9)(e);if(0===g.length){let t=this.createTextNode("");g.push(t),e.appendChild(t)}let m=0;if(1===g.length&&(g[0].isLineBreak()||""===g[0].getText())&&u>0)u=0,f=0;else{let e=g.map(e=>e.collectText().length).reduce((e,t)=>e+t,0);u>=e&&g[g.length-1].collectText().endsWith("\n")&&0===f&&(u=e-1,f=0)}let N=u,p=0===f;for(;m<g.length;){let e=g[m],t=e.collectText();if(t.length<N||t.length===N&&!p)N-=t.length,m+=1;else break}if(m===g.length)return c;let _=m,v=N+f;for(;_<g.length;){let e=g[_],t=e.collectText();if(t.length<v)v-=t.length,_+=1;else{_===m&&(v-=N);break}}_>=g.length&&(_=g.length-1,v+=g[g.length-1].collectText().length);let C=null,T=null;for(let e=m;e<=_;e+=1){let t=g[e],n=t.collectText(),o=[];if(e===m){let e=n.substring(0,N);if(e){let n=this.createTextNode(e,t.getFormattingInfo(),t.getAttributes());o.push(n),n.applyClassesFrom(t)}n=n.substring(e.length)}let i=t.getParentNode(),r=T,s=C!==i||!r||t.isLineBreak();if(s&&(T=r=this.createNodeFromDescription(h),c.push(r),o.push(r)),C=i,e===_){let e=n.substring(v);if(e){let n=this.createTextNode(e,t.getFormattingInfo(),t.getAttributes());o.push(n),n.applyClassesFrom(t)}n=n.substring(0,v)}null===(l=t.getParentNode())||void 0===l||l.replaceChild(t,o),t.isLineBreak()?n.includes("\n")&&r.appendChild(t):(t.setText(n),r.appendChild(t))}return null===(a=c[0])||void 0===a||a.addClass("--l"),null===(d=c[c.length-1])||void 0===d||d.addClass("--r"),c},e}();l.createNodeTreeFromDescription=e=>{let t=new l;return t.createNodeFromDescription(e)}},93843:function(e,t,n){n.d(t,{GB:function(){return l},O9:function(){return r},_A:function(){return c},_n:function(){return d},cx:function(){return i}});var o=n(94434);let i=function(e,t,n){void 0===n&&(n=-1);let o=e.findIndex(t);return o<0?n:o},r=function(e,t){void 0===t&&(t=!0);let n=null;t&&(n=new o.oS(o.$P.LINE_BREAK,!0))._setTagName("br");let i=[],r=e=>{if(e.isTextNode()||e.isLineBreak())i.push(e);else{var o;e._getChildNodes().forEach(e=>r(e));let s=e.isBlockNode()&&!e.isRootNode();t&&s&&!(null!==(o=i[i.length-1])&&void 0!==o&&o.isLineBreak())&&e._parentNode._childNodes[e._parentNode._childNodes.length-1]!==e&&i.push(n)}};return r(e),i},s=(e,t)=>{let n=r(e,t),o=null,i=[];for(let e=0;e<n.length;e++){var s;let t=n[e],r=t.getParentBlockNode(),a=null===(s=o)||void 0===s?void 0:s.nodes[0],d=o&&a&&t&&a.hasIdenticalMetaInformation(t)&&o.parentBlock===r;if(d)o.nodes.push(t),o.text+=t.collectText();else if(r||o){let e={text:t.collectText(),nodes:t?[t]:[],parentBlock:null!=r?r:o.parentBlock};i.push(e),o=e}}return i};function a(e,t,n,o){void 0===o&&(o=!0);let i={correctedStartOffset:0,correctedEndOffset:0,textNodes:[]};if(t+n<=0||n<=0)return i;let r=t,a=n;r<0&&(a+=r,r=0);let d=s(e,!0);if(0===d.length)return i;let l=r,c=r+a,h=0;for(;h<d.length;h++){let e=d[h].text.length;if(l>=e)l-=e,c-=e;else{if(i.textNodes.push(d[h]),i.correctedStartOffset=l,c<=e||h===d.length-1)return i.correctedEndOffset=c<e?c:e,i;c-=e;break}}for(h+=1;h<d.length;h++){let e=d[h].text.length;if(c<=e||h===d.length-1){i.textNodes.push(d[h]),i.correctedEndOffset=c<e?c:e;break}c-=e,i.textNodes.push(d[h])}if(!o&&i.textNodes.length>0){let e=i.textNodes[i.textNodes.length-1];i.textNodes=i.textNodes.filter(e=>!("\n"===e.text&&1===e.nodes.length&&!e.nodes[0].getParentNode())),e!==i.textNodes[i.textNodes.length-1]&&(i.correctedEndOffset=i.textNodes[i.textNodes.length-1].text.length)}return i}let d=(e,t,n)=>{if(t+n<=0||n<=0)return"";let{textNodes:i,correctedStartOffset:r,correctedEndOffset:s}=a(e,t,n,!0),d=i.length;if(0===d)return"";if(1===d){let e=i[0],t=e.text.substring(r,s);return o.oS.textNodeToHtml(e.nodes[0],t)}let l=i[0],c=i[d-1],h=l.text.substring(r),u=c.text.substring(0,s),f=o.oS.textNodeToHtml(l.nodes[0],h,void 0,i[1].nodes[0]),g=o.oS.textNodeToHtml(c.nodes[0],u,i[d-2].nodes[0],void 0),m="";for(let e=1;e<d-1;e++)m+=o.oS.textNodeToHtml(i[e].nodes[0],i[e].text,i[e-1].nodes[0],i[e+1].nodes[0]);return`${f}${m}${g}`},l=(e,t)=>{var n,o,i;let r,s,a;if(e.getParentNode())throw Error("Inner nodes not supported");let d=e.getChildAtCharacterOffset(t,!0);if(d){if(d.isList()){let n=e.getChildAtCharacterOffset(t,!1);n&&(r=null===(o=n.findParent(e=>e.isList()))||void 0===o?void 0:o._tagName,s=null===(i=n.findParent(e=>e.isListItem()))||void 0===i?void 0:i._tagName,a=n.getListDepth())}return{tag:null!==(n=d._tagName)&&void 0!==n?n:"P",id:d.id.toString(),listTag:r,itemTag:s,listDepth:a}}},c=(e,t,n)=>{let i=(e,t)=>{let n=e._tagName;return t?`<${n}>`:`</${n}>`},{textNodes:r,correctedStartOffset:s,correctedEndOffset:d}=a(e,t,n,!1),l=r.length;if(0===l)return"";if(1===l){let e=r[0],t=e.text.substring(s,d),n=e.parentBlock,a=o.oS.textNodeToHtml(r[l-1].nodes[0],t);return i(n,!0)+a+i(n,!1)}let c=r[0],h=c.text.substring(s),u=o.oS.textNodeToHtml(c.nodes[0],h,void 0,r[1].nodes[0]),f=c.parentBlock,g=i(f,!0)+u;for(let e=1;e<l-1;e++){let t=r[e],n=t.parentBlock,s=o.oS.textNodeToHtml(t.nodes[0],t.text,r[e-1].nodes[0],r[e+1].nodes[0]);f!==n?g+=i(f,!1)+i(n,!0)+s:g+=s,f=n}let m=r[l-1],N=m.text.substring(0,d),p=o.oS.textNodeToHtml(m.nodes[0],N,r[l-2].nodes[0],void 0),_=m.parentBlock;return f!==_&&(g+=i(f,!1)+i(_,!0)),g+=p+i(_,!1)}},35208:function(e,t,n){n.r(t),n.d(t,{canDTextareaBeUsed:function(){return q},dTextareaComponent:function(){return X}});var o,i,r,s=n(91976),a=n(93219),d=n(90434),l=n(18229),c=n(84627),h=n(86679);let u=function(){function e(e){void 0===e&&(e=1e4),this._stack=void 0,this._currentIndex=void 0,this._stackSizeLimit=void 0,this.onUndoStackChange=void 0,this._stack=[],this._currentIndex=-1,this._stackSizeLimit=e,this.onUndoStackChange=(0,c.fo)()}var t=e.prototype;return t.isUndoAvailable=function(){return this._stack.length>0&&this._currentIndex>-1},t.isRedoAvailable=function(){return this._currentIndex+1<this._stack.length},t.getUndoCommand=function(){if(this.isUndoAvailable())return this._stack[this._currentIndex]},t.getRedoCommand=function(){if(this.isRedoAvailable())return this._stack[this._currentIndex+1]},t.fetchUndoCommand=function(){if(this.isUndoAvailable()){let e=this._stack[this._currentIndex];return this._currentIndex-=1,this.onUndoStackChange(),e}console.log("undo unavailable")},t.fetchRedoCommand=function(){if(this.isRedoAvailable()){let e=this._stack[this._currentIndex+1];return this._currentIndex+=1,this.onUndoStackChange(),e}console.log("redo unavailable")},t.pushUndoCommand=function(e){if(this.resetAfterCurrentIndex(),this._stack.length+1>this._stackSizeLimit){let e=this._stack.splice(0,this._stack.length+1-this._stackSizeLimit);this._currentIndex-=e.length}this._stack.push(e),this._currentIndex+=1,this.onUndoStackChange()},t.resetAfterCurrentIndex=function(){let e=this._stack.splice(this._currentIndex+1);return this.onUndoStackChange(),e},t.reset=function(){this._currentIndex=-1;let e=this._stack.splice(0);return this.onUndoStackChange(),e},e}();var f=n(94434),g=n(52425),m=n(98808);let N=function(){function e(e){this.enabled=void 0,this.onMutationCaptured=void 0,this._lastMutations=void 0,this._observer=void 0,this._rootDomNode=void 0,this._connected=!1,this.enabled=!0,this._rootDomNode=e,this.onMutationCaptured=(0,m.f)(),this._lastMutations=void 0;let t=new MutationObserver(e=>{this._lastMutations=e,this.applyMutations()});this._observer=t,this.reconnect()}var t=e.prototype;return t.disconnect=function(){if(!this._connected){console.error("Trying to disconnect already disconnected ChangeDetector");return}this._connected=!1,this._observer.disconnect()},t.reconnect=function(){if(this._connected){console.error("Trying to reconnect already connected ChangeDetector");return}this._connected=!0,this._observer.observe(this._rootDomNode,{attributes:!1,childList:!0,characterData:!0,subtree:!0})},t.applyMutations=function(){if(this._lastMutations&&this.enabled){this.enabled;let e=this._lastMutations;this._lastMutations=void 0,this.onMutationCaptured(e)}},e}();function p(e,t,n){return{action:e,path:t,nodeDescription:n}}var _=n(4769),v=n(72047),C=n(45695),T=n(46748);function E(e,t){let n=new DocumentFragment;t.forEach(e=>n.appendChild(e)),e.appendChild(n)}function b(e,t){let n=v.gP.fromDomNodeStyle(e);n&&t.applyFormatting(n),e instanceof HTMLElement&&t.applyAttributesFromDomNode(e)}function k(e){return e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("d-isAttachmentNode")}function x(e){if(k(e))return"";if(e.nodeType===Node.TEXT_NODE)return e.textContent;let t="";return e.childNodes.forEach(e=>{t+=x(e)}),t}function D(e,t,n){var o;void 0===n&&(n=1),e.set(t,(null!==(o=e.get(t))&&void 0!==o?o:0)+n)}function L(e,t,n){t.setDomNode(e),e[g.c1]=t.id,e.nodeType===Node.ELEMENT_NODE&&e.getAttribute("_d-id")!==`${t.id}`&&(e.setAttribute("_d-id",`${t.id}`),n&&D(n,"setAttribute"));let o=t.getAttributes();if(o&&e instanceof HTMLElement){let t=Object.keys(o);for(let n of t)e.setAttribute(n,o[n]),"href"===n&&(e.title=(0,T.S2)(o[n]),e.setAttribute("rel","noopener noreferrer nofollow"))}if(t.isTextNode()?t.getText()===e.textContent?n&&D(n,"textUnchanged"):(e.textContent=t.getText(),n&&D(n,"updateText")):function(e,t,n){let o=e[g.Q2],i=t._eventListeners;if(!(0,f.FN)(o,i)){if(o)for(let t=o.length-1;t>=0;t--){let r=o[t];!(null!=i&&i.includes(r))&&(o.splice(t,1),e.removeEventListener(r.type,r.callback,r.options),n&&D(n,"removeListener"))}if(i&&i.length)for(let t of(o||(o=[],e[g.Q2]=o),i))!o.includes(t)&&(o.push(t),e.addEventListener(t.type,t.callback,t.options),n&&D(n,"addListener"))}}(e,t,n),e.__tContainsAttachmentNodes&&(e.childNodes.forEach(t=>{k(t)&&(e.removeChild(t),n&&D(n,"removeChild"))}),e.__tContainsAttachmentNodes=!1,n&&D(n,"setAttribute")),t._attachmentNodes&&Object.keys(t._attachmentNodes).length&&(Object.values(t._attachmentNodes).filter(e=>e).forEach(t=>{t.setAttribute("d-isAttachmentNode","true"),n&&D(n,"setAttribute"),e.appendChild(t),n&&D(n,"addChild")}),e.__tContainsAttachmentNodes=!0,n&&D(n,"setAttribute")),e.nodeType===Node.ELEMENT_NODE&&t.getParentNode()){let o=(0,_.Z)(t._classes).sort().join(" ");e.className!==o&&(e.className=o,n&&D(n,"updateClass")),e.hasAttribute("style")&&(e.removeAttribute("style"),n&&D(n,"removeAttribute"))}}function y(e,t,n){let o=null;if(o=e.isTextNode()?document.createTextNode(e.getText()):e.isLineBreak()?document.createElement("BR"):document.createElement(e._tagName||"d-container"),t&&D(t,"createNode"),o instanceof HTMLElement){o.setAttribute("_d-id",`${e.id}`),t&&D(t,"setAttribute");let i=e.getVirtualChildNodes().map(e=>y(e,t,n));E(o,i),t&&D(t,"addChild",o.childElementCount),e.onDomNodeCreated&&n.push(()=>e.onDomNodeCreated(o,e));let r=e.getNonContentNodeType();r&&(o[g.wd]=r)}return L(o,e,t),o}function S(e,t,n,o){var i,r,s;let a=e.getChildNodes(),d=e.getLineBreaks()+1;if(0===a.length||n>=d)return{domNode:t,offset:a.length};let l=e.getChildAfterLineBreak(n);if(!l)return console.error("No lineNode found for cursor pos"),{domNode:t,offset:a.length};let c=l.getChildNodes();if(0===o&&null!==(i=l._childNodes[0])&&void 0!==i&&i.isLineBreak())return{domNode:l.getDomNode(),offset:o};let h=function e(t,n){if(t.isTextNode()||t.isLineBreak())return{node:t,offset:n};let o=t.getChildNodes(),i=n;for(let t=0;t<o.length;++t){let n=o[t],r=n.collectText().length;if(i<=r)return e(n,i);i-=r}return null}(l,o);if(h)return{domNode:h.node.getDomNode(),offset:h.offset};let u=function e(t){let n=t.getChildNodes();return n&&n.length?e(n[n.length-1]):t}(c[c.length-1]);if(u){let e=(null===(r=u._domNode)||void 0===r?void 0:r.nodeType)===Node.TEXT_NODE?u._domNode:(null==u?void 0:null===(s=u._domNode)||void 0===s?void 0:s.nodeType)===Node.ELEMENT_NODE?u.isLineBreak()?u._domNode.parentNode:Array.from(u._domNode.childNodes).find(e=>e.nodeType===Node.TEXT_NODE)||u._domNode:null,t=u.isLineBreak()?0:u.collectText().length;return{domNode:e,offset:t}}return{domNode:l._domNode,offset:0}}function P(e,t,n){if(e.hasChildNodes()){let r=Array.from(e.childNodes),s=r[t-1];if(s){let e=0;if(!n){if(s.hasChildNodes())e=s.childNodes.length;else{var o,i;e=(null!==(o=null===(i=s.textContent)||void 0===i?void 0:i.length)&&void 0!==o?o:0)+1}}return P(s,e,n)}}return{domNode:e,charOffset:t}}function I(e,t){if(!e.focusNode||!e.anchorNode)return!1;if(e.focusNode===e.anchorNode)return e.focusOffset<e.anchorOffset;let n=A(t,e.focusNode),o=A(t,e.anchorNode);if(!n||!o)return!1;let i=Array.from(t.childNodes);return i.indexOf(o)>i.indexOf(n)}function A(e,t){let n=t;for(;n&&n.parentNode!==e;)n=n.parentNode;return n}let w=new Set(["STYLE"]);var M=n(69764),R=n(66726),O=n.n(R);let F=function(){function e(){this.mouseDownTargetElement=null,this.mouseDownTargetId=null,this.mouseDownTargetParents=[],this.mouseDownScreenPosition=null,this.debug=!1,this.enabled=!0,this.TAG="[dTextarea ClickHelper]",this.maximumDistance=10,this.debouncedRaiseSimulatedClickEvent=O()(this.raiseSimulatedClickEvent,5),this.onLinkOutHandler=null}var t=e.prototype;return t.attach=function(t,n){this.onLinkOutHandler=null!=n?n:null,t.addEventListener("mousedown",t=>{this.log("mouse down"),this.mouseDownScreenPosition={x:t.screenX,y:t.screenY},this.mouseDownTargetElement=t.target,this.mouseDownTargetId=e.getDNodeId(t.target),t.target instanceof HTMLElement?this.mouseDownTargetParents=e.getParentList(t.target):this.mouseDownTargetParents=[]}),t.addEventListener("mouseup",t=>{if(this.log("mouse up"),!this.enabled)return;if(!t.target||!this.mouseDownScreenPosition||!this.mouseDownTargetElement||!this.mouseDownTargetId){this.reset();return}if(0!==t.button)return;let n={x:t.screenX,y:t.screenY},o=this.mouseDownTargetElement!==t.target,i=this.mouseDownTargetId!==e.getDNodeId(t.target),r=e.distance(this.mouseDownScreenPosition,n),s=this.mouseDownTargetElement instanceof Node&&document.body.contains(this.mouseDownTargetElement);if(r<this.maximumDistance&&(o&&!s||i&&!o)){let e=new MouseEvent("click",{...t,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,view:window,bubbles:!0,cancelable:!0});this.log("requesting simulated mouse click"),this.debouncedRaiseSimulatedClickEvent(t.target,e,this.mouseDownTargetParents)}this.reset()}),t.addEventListener("click",e=>{this.debouncedRaiseSimulatedClickEvent.cancel(),this.log("click event processed on",e.target);let t=(0,T.u$)(e.target);if(t&&(t.contains(e.target)&&(this.log("click on link prevented"),e.preventDefault(),e.stopPropagation()),e.ctrlKey||e.metaKey)){let e=t.getAttribute("href");if(e){var n;this.log("linking out to:",e),null===(n=this.onLinkOutHandler)||void 0===n||n.call(this,e,t)}else this.log("not linking out, as no href attribute is set")}}),document.body.addEventListener("mouseup",e=>{this.reset()})},t.raiseSimulatedClickEvent=function(e,t,n){if(e instanceof HTMLElement&&!document.body.contains(e)&&n){let t=n.find(e=>document.body.contains(e));this.log("target is not in DOM, considering alternative: ",t,"of",n.slice()),t&&(e=t)}this.log("simulating mouse click",t,"on",e),e.dispatchEvent(t)},t.enableDebug=function(e){this.debug=e},t.enable=function(e){this.enabled=e},t.log=function(e){for(var t,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.debug&&(t=console).debug.apply(t,[this.TAG,e].concat(o))},e.distance=function(e,t){let n=e.x-t.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},e.getParentList=function(t){if(t.parentElement){let n=e.getParentList(t.parentElement);return n.unshift(t),n}return[t]},e.getDNodeId=function(e){return e&&e instanceof HTMLElement?e.getAttribute("_d-id"):null},t.reset=function(){this.mouseDownScreenPosition=null,this.mouseDownTargetElement=null,this.mouseDownTargetParents=[],this.mouseDownTargetId=null},e}();var B=n(93843);let U=((o={})[o.DOM_CHANGE=0]="DOM_CHANGE",o[o.INTERNAL=1]="INTERNAL",o[o.UNDO_REDO=2]="UNDO_REDO",o),H=0,z=()=>new CustomEvent("dta_undo",{bubbles:!0}),K=function(){function e(e,t,n){void 0===n&&(H+=1,n=`DTX${H}`),this._nodeManager=new g.vm,this._undoStack=new u,this.onChange=(0,c.fo)(),this.onUndoStackChange=(0,c.fo)(),this._undoStackLockRegistry=new Set,this._autoUnlockUndoTimeouts=new Map,this.isUndoAvailable=()=>this._undoStack.isUndoAvailable()&&!this.isUndoStackLocked(),this.isRedoAvailable=()=>this._undoStack.isRedoAvailable()&&!this.isUndoStackLocked(),this.onNodeClicked=(0,c.fo)(),this.onPerformanceMeasured=(0,c.fo)(),this.onFormattingShortcutUsed=(0,c.fo)(),this._changeDetector=void 0,this._undoDetector=void 0,this._delayedFinalizeCommandCallback=null,this._debouncedTimeout=null,this._rootDomNode=void 0,this._rootNode=void 0,this._config_flatten=void 0,this._config_removeTextFormatting=void 0,this._config_normalizeSpaces=void 0,this._config_maxContentLength=void 0,this._config_measurePerformance=void 0,this._config_captureTab=void 0,this._config_allowLists=void 0,this._doFinalizeNodes=void 0,this._lastGarbageCollectionTime=Date.now(),this.prevCursorPos=void 0,this.latestCursorPos=void 0,this.batchingUndoChanges=!1,this.compositionStarted=!1,this.onCompositionModeChange=(0,c.fo)(),this.onLinkOut=(0,c.fo)(),this.wasMutationObserverTriggeredThisTick=!1,this._config_dbg=!1,this.name=void 0,this._prevDOMContent=null,this._util=null,this.clickHelper=new F,this.name=n,this._rootDomNode=e;let o=(e,n)=>t&&e in t?t[e]:n;this._config_flatten=o("flatten",!0),this._config_removeTextFormatting=o("removeTextFormatting",!0),this._config_allowLists=o("allowLists",!0),this._config_normalizeSpaces=o("normalizeSpaces",!0),this._config_dbg=o("_dbg",!1),this._config_measurePerformance=o("measurePerformance",!1),this._config_maxContentLength=o("maxContentLength",null),this._config_captureTab=o("captureTab",!0),this._config_allowLists=o("allowLists",!0);let i=o("onChange");i&&this.onChange.push(i);let r=o("onLinkOut");r&&this.onLinkOut.push(r),this._doFinalizeNodes=o("doFinalizeNodes",void 0),this._changeDetector=new N(e),this._undoDetector=new h.cZ(this._rootDomNode,()=>this.undo(),()=>this.redo()),this._undoStack.onUndoStackChange.push(()=>{this.onUndoStackChange()});let s=this._nodeManager.createBlockContainerNode(e.tagName);e[g.c1]=s.id,this._rootNode=s,this._changeDetector.onMutationCaptured.push(()=>{this.wasMutationObserverTriggeredThisTick=!0,this._applyDomChanges(),setTimeout(()=>{this.wasMutationObserverTriggeredThisTick=!1},0)}),this._rootDomNode.addEventListener("input",e=>{"insertFromPaste"!==e.inputType&&this.getText().length>0||this.isCompositionInProgress()||this._applyDomChanges(!this.wasMutationObserverTriggeredThisTick)}),this._initDOM();let a=o("onContextMenu");a&&e.addEventListener("contextmenu",e=>{let t=this._nodeManager.getNearestNodeForDomNode(e.target);return a(e,t)}),s.resetRecordedChanges(),this._applyDomChanges(!0),this.resetUndoStack()}var t=e.prototype;return t._initDOM=function(){let e=this._rootDomNode;this.log("[_initDOM]","Init",e),e.addEventListener("keydown",e=>{this._config_removeTextFormatting||this.normalizeTextFormattingHotkeys(e)}),e.addEventListener("click",e=>{let t=e.target;for(;t&&!t[g.c1];)t=t.parentNode;if(t){let n=this._nodeManager.getNodeForDomNode(t);n&&this.onNodeClicked(n,e)}}),e.addEventListener("keyup",()=>this.updatePrevCursorPos()),e.addEventListener("mouseup",()=>this.updatePrevCursorPos()),e.addEventListener("touchend",()=>this.updatePrevCursorPos()),e.addEventListener("compositionstart",e=>{this._changeDetector.enabled=!1,this.compositionStarted=!0,this.onCompositionModeChange(!0)}),e.addEventListener("compositionend",e=>{this._changeDetector.enabled=!0,this._changeDetector.applyMutations(),this.compositionStarted=!1,this.onCompositionModeChange(!1)}),this.clickHelper.attach(e,(e,t)=>this.onLinkOut(e,t))},t.log=function(){if(this._config_dbg){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,[this.name].concat(n))}},t.updatePrevCursorPos=function(e){void 0===e&&(e=this._getCursorPos()),this.latestCursorPos=e,this.batchingUndoChanges||this.compositionStarted||(this.prevCursorPos=e)},t.setFinalizeNodesHandler=function(e){this._doFinalizeNodes=e},t.getFirstLevelNodes=function(){return this._rootNode.getChildNodes()},t.getNodeById=function(e){return this._nodeManager.getNodeById(e)},t.getText=function(){let e=this._rootNode.collectText();return e},t.updateText=function(e){var t;this.log("[updateText]",e);let n=e.split("\n"),o=[];n.forEach(e=>{let t=document.createElement("DIV");""===e?t.appendChild(document.createElement("BR")):t.textContent=e,o.push(t)}),(t=this._rootDomNode).replaceChildren.apply(t,o),this._applyDomChanges(!0)},t.getHtml=function(e){return void 0===e&&(e=this._rootNode),(0,B._A)(e,0,1/0)},t.getTextNodesForRange=function(e,t,n){return void 0===n&&(n=this._rootNode),this._nodeManager.encapsulateTextContent(n,e,t)},t.getTextNodesForSelection=function(){let e=window.getSelection();if(!e||!e.anchorNode)return[];if(e.isCollapsed||e.anchorNode===e.focusNode){let t=this._nodeManager.getNodeForDomNode(e.anchorNode);if(t)return[t]}else{let n=e.getRangeAt(0),o=I(e,n.commonAncestorContainer),i=this._nodeManager.getNodeForDomNode(e.anchorNode),r=this._nodeManager.getNodeForDomNode(e.focusNode);if(i||r){var t;let e=null!==(t=this._nodeManager.getNodeForDomNode(n.commonAncestorContainer))&&void 0!==t?t:this._rootNode,s=(0,B.O9)(e,!1),a=s.indexOf(i),d=s.indexOf(r);if(a>=0&&d>=0)return s.slice(Math.min(a,d),Math.max(a,d)+1);if(a>=0||d>=0){let e=Math.max(a,d);return a>=0&&!o||d>=0&&o?s.slice(e):s.slice(0,e+1)}}}return[]},t.getAbsoluteCursor=function(e){void 0===e&&(e=this._rootNode);let t=window.getSelection();if(!t||!t.focusNode)return null;let n=function(e,t,n){let{domNode:o,charOffset:i}=P(t,n),r=e.getNodeForDomNode(o);return r?r.getOwnCharacterOffsetInTree()+i:null}(this._nodeManager,t.focusNode,t.focusOffset);return null==n?null:n-e.getOwnCharacterOffsetInTree()},t.updateHtml=function(e,t){void 0===t&&(t=this._rootNode);let n=t.getDomNode();if(!n||!(n instanceof HTMLElement))throw Error(`Trying to update HTML of non-HTML element: ${t.toString()}`);n.innerHTML=e,this._applyDomChanges(!0)},t.undo=function(){let e="[undo]";if(this.isUndoStackLocked()){this.log(e,"prevented as undo stack is locked");return}this.log(e,"undo"),this._cancelDebouncedFinalizeCommand(!0);let t=this._undoStack.fetchUndoCommand();t&&(this._applyCommand(t,!1),this._rootDomNode.dispatchEvent(z()))},t.redo=function(){let e="[redo]";if(this.isUndoStackLocked()){this.log(e,"prevented as undo stack is locked");return}this.log(e,"redo"),this._cancelDebouncedFinalizeCommand(!0);let t=this._undoStack.fetchRedoCommand();t&&(this._applyCommand(t,!0),this._rootDomNode.dispatchEvent(z()))},t.resetUndoStack=function(){this._cancelDebouncedFinalizeCommand(!1),this._undoStack.reset(),this._rootNode.resetRecordedChanges(),this.updatePrevCursorPos()},t.applyInternalChanges=function(e){if(void 0===e&&(e=!0),this.isCompositionInProgress())return;this._beginMeasuringPerformance(),this._markMeasurementStart("getCursorPos");let t=this._getCursorPos();this._markMeasurementEnd("getCursorPos"),this._cleanupNodes();let n=null;e&&(n=this.getChangedParagraphs(),this._finalizeCommand(this.prevCursorPos,t)),this._finalizeNodesBeforeUpdate(U.INTERNAL,n),this._updateDom(),this._restoreCursorPos(t),this.updatePrevCursorPos(t),this._updateGarbageCollection(),this.onChange(),this._finishMeasuringPerformance(M.z.INTERNAL)},t.applyInternalMetaChanges=function(){this._beginMeasuringPerformance(),this._markMeasurementStart("getCursorPos");let e=this._getCursorPos();this._markMeasurementEnd("getCursorPos"),this._updateDom(),this._restoreCursorPos(e),this._updateGarbageCollection(),this._finishMeasuringPerformance(M.z.INTERNAL)},t._updateGarbageCollection=function(){let e=Date.now();e>this._lastGarbageCollectionTime+6e4&&setTimeout(()=>{this._garbageCollect()},20)},t._garbageCollect=function(){this._lastGarbageCollectionTime=Date.now(),this._nodeManager.garbageCollect()},t._isTreeSyncRequired=function(){let e=this._rootDomNode.innerHTML;return e!==this._prevDOMContent},t._applyDomChanges=function(e){if(void 0===e&&(e=!1),!e&&!this._isTreeSyncRequired())return;this._beginMeasuringPerformance(),null!=this._config_maxContentLength&&(this._markMeasurementStart("truncate"),function(e,t,n){var o,i,r;if((null!==(o=e.textContent)&&void 0!==o?o:"").length<=t)return;let s=null===(i=document.activeElement)||void 0===i?void 0:i.contains(e),a=n.enabled;a&&(n.enabled=!1);let d=0,l=e,c=e=>{if(l=e,e.nodeType===Node.TEXT_NODE){var n;let o=(null!==(n=e.textContent)&&void 0!==n?n:"").length;if((d+=o)>t){let n=d-t;e.textContent=e.textContent.substring(0,e.textContent.length-n)}}else{let n=[];e.childNodes.forEach(e=>{d<=t?c(e):n.push(e)}),n.forEach(e=>e.remove())}};if(c(e),s){let e=window.getSelection(),t=new Range,n=Math.max((null!==(r=l.textContent)&&void 0!==r?r:"").length-1,0);t.setStart(l,n),e.removeAllRanges(),e.addRange(t)}a&&setTimeout(()=>{n.enabled=!0})}(this._rootDomNode,this._config_maxContentLength,this._changeDetector),this._markMeasurementEnd("truncate")),this._markMeasurementStart("updateNodesFromDom"),function e(t,n){return function(t,n){let o=n.getNodeForDomNode(t);if(o){if(t.nodeType===Node.TEXT_NODE){if(o.getText()===x(t))return o.clearFormatting(),o}else if(t.nodeType===Node.ELEMENT_NODE&&o.isTextNode()){if(Array.from(t.childNodes).every(e=>k(e)||e.nodeType===Node.TEXT_NODE)&&o.getText()===x(t))return b(t,o),o}else if(t.nodeType===Node.ELEMENT_NODE){let i=o.getChildNodes(),r=[];if(t.childNodes.forEach(t=>{k(t)||r.push(e(t,n))}),(0,f.FN)(i,r));else{let e=r.filter(e=>e&&(!e.isTextNode()||e.isTextNode()&&""!==e.collectText()));o.replaceChildren(e)}return b(t,o),o}}return null}(t,n)||function(t,n){if(t.nodeType===Node.TEXT_NODE){let e=t.textContent,o=n.createTextNode(e);return t[g.c1]=o.id,o}if(t.nodeType===Node.ELEMENT_NODE){if("BR"===t.tagName){let e=n.createLineBreakNode();return t[g.c1]=e.id,e}let o=null;return o=C.tB.has(t.tagName)?n.createBlockContainerNode(t.tagName,!0):n.createInlineNode(t.tagName,!0),b(t,o),t.childNodes.forEach(t=>{k(t)||o.appendChild(e(t,n))}),t[g.c1]=o.id,o}return console.log("[updateNodesFromDom]","ignore",t),n.createTextNode("")}(t,n)}(this._rootDomNode,this._nodeManager),this._markMeasurementEnd("updateNodesFromDom"),this._markMeasurementStart("getCursorPos");let t=this._getCursorPos();this._markMeasurementEnd("getCursorPos"),this._cleanupNodes(),this.batchingUndoChanges=!0,this._debounceFinalizeCommand(this.prevCursorPos,t),this._finalizeNodesBeforeUpdate(U.DOM_CHANGE),this._updateDom(),this._prevDOMContent=this._rootDomNode.innerHTML,this._restoreCursorPos(t),this.updatePrevCursorPos(t),this._updateGarbageCollection(),this.onChange(),this._finishMeasuringPerformance(M.z.DOMCHANGES)},t._markMeasurementStart=function(e){this._config_measurePerformance&&performance.mark(`dTextarea_${e}_start`)},t._markMeasurementEnd=function(e){this._config_measurePerformance&&performance.mark(`dTextarea_${e}_end`)},t._beginMeasuringPerformance=function(){this._config_measurePerformance&&(performance.clearMarks(),performance.clearMeasures(),performance.mark("dTextarea_performance_start"))},t._finishMeasuringPerformance=function(e){var t,n,o,i,r,s;if(!this._config_measurePerformance)return;let a=e=>{try{return performance.measure(e,`dTextarea_${e}_start`,`dTextarea_${e}_end`).duration}catch(e){return null}};performance.mark("dTextarea_performance_end");let d={total:a("performance"),truncation:a("truncation"),updateNodesFromDom:a("updateNodesFromDom"),cleanupNodes:a("cleanupNodes"),finalizeNodes:a("finalizeNodes"),updateDom:a("updateDom"),getCursorPos:a("getCursorPos"),other:0,characterCount:this.getText().length,trigger:e};d.other=d.total-(null!==(t=d.truncation)&&void 0!==t?t:0)-(null!==(n=d.updateNodesFromDom)&&void 0!==n?n:0)-(null!==(o=d.cleanupNodes)&&void 0!==o?o:0)-(null!==(i=d.finalizeNodes)&&void 0!==i?i:0)-(null!==(r=d.updateDom)&&void 0!==r?r:0)-(null!==(s=d.getCursorPos)&&void 0!==s?s:0),this.onPerformanceMeasured(d)},t._updateDom=function(){this._markMeasurementStart("updateDom");let e=new Map,t=this._changeDetector._connected;this._changeDetector.disconnect(),this._rootDomNode=function(e,t,n){void 0===n&&(n=null);let o=[],i=function e(t,n,o,i){if(void 0===i&&(i=null),i&&D(i,"touchNodeForUpdate"),t.isTextNode()&&n.nodeType!==Node.TEXT_NODE||!t.isTextNode()&&n.nodeType!==Node.ELEMENT_NODE||t._tagName&&t._tagName!==n.tagName)return y(t,i,o);if(L(n,t,i),t.isTextNode())return n;let r=t.getVirtualChildNodes(),s=n.childNodes,a=new Set(s),d=Array(r.length),l=r.length;if(l>0&&a.size){let e=new Map;a.forEach(t=>{let n=t[g.c1];n&&n>0&&e.set(n,t)}),r.forEach((t,n)=>{let o=e.get(t.id);o&&(l-=1,a.delete(o),d[n]=o)})}if(l>0&&a.size){let e=new Map;a.forEach(t=>{let n=t[g.wd];n&&(e.has(n)||e.set(n,[]),e.get(n).push(t))}),r.forEach((t,n)=>{if(!d[n]){let o=t.getNonContentNodeType();if(o&&e.has(o)&&e.get(o).length){let t=e.get(o).shift();l-=1,a.delete(t),d[n]=t}}})}if(l>0&&a.size){let e=[];a.forEach(t=>{t.nodeType===Node.TEXT_NODE&&e.push(t)}),r.forEach((t,n)=>{if(!d[n]&&t.isTextNode()&&e.length){let t=e.shift();l-=1,a.delete(t),d[n]=t}})}r.forEach((t,n)=>{d[n]&&(d[n]=e(t,d[n],o,i))}),l>0&&r.forEach((e,t)=>{d[t]||(d[t]=y(e,i,o))});let c=Object.values(t._attachmentNodes||{}).filter(e=>e);c.length&&d.push.apply(d,(0,_.Z)(c));let h=Array.from(s);if(!(0,f.FN)(h,d)){let e=0;for(;e<h.length&&h[e]===d[e];)e+=1;let t=h.slice(e);t.forEach(e=>{n.removeChild(e),i&&D(i,"removeChild")});let o=d.slice(e);o.length&&(E(n,o),i&&D(i,"addChild",o.length))}return n}(e,t,o,n);return o.forEach(e=>e()),i}(this._rootNode,this._rootDomNode,e),t&&this._changeDetector.reconnect(),this._markMeasurementEnd("updateDom")},t._cleanupNodes=function(){var e,t,n,o,i,r;this._markMeasurementStart("cleanupNodes"),e=this._rootNode,t=this._nodeManager,n=this._config_removeTextFormatting,o=!this._config_removeTextFormatting&&this._config_allowLists,i=this._config_normalizeSpaces,this._config_dbg,function(e,t){let n=e=>{if(!e._isUnclean)return[e];let o=[];if(e._tagName&&w.has(e._tagName)||e.isInlineNode()&&""===e.collectText())return t.removeNode(e),o;let i=e.getChildNodes();for(let e=0;e<i.length;e+=1)o.push.apply(o,(0,_.Z)(n(i[e])));return e.replaceChildren(o),[e]},o=[];e.getChildNodes().slice(0).forEach(e=>o.push.apply(o,(0,_.Z)(n(e)))),e.replaceChildren(o)}(e,t),function(e,t){let n=e.getChildNodes();if(1===n.length&&"BR"===n[0]._tagName&&t.removeNode(n[0]),0===e.getChildNodes().length){let n=t.createBlockContainerNode("DIV");n.appendChild(t.createLineBreakNode()),e.appendChild(n)}}(e,t),function(e,t){let n=e=>{var o,i,r;if(!e._isUnclean)return[e];if(!e.isTextNode()){if(null!==(i=e.getChildNodes())&&void 0!==i&&i.length){let t=[];null===(r=e.getChildNodes())||void 0===r||r.forEach(e=>t.push.apply(t,(0,_.Z)(n(e)))),e.replaceChildren(t)}return[e]}let s=[];if(null!==(o=e.getText())&&void 0!==o&&o.includes("\n")){t.removeNode(e);let n=e.getText().split("\n");n.forEach((e,o)=>{""!==e&&s.push(t.createTextNode(e)),o<n.length-1&&s.push(t.createLineBreakNode())})}else s.push(e);return s},o=[];e.getChildNodes().forEach(e=>o.push.apply(o,(0,_.Z)(n(e)))),e.replaceChildren(o)}(e,t),function(e,t){let n=e=>{let o=[e],i=e,r=[],s=[];if(!e._isUnclean)return o;for(e.getChildNodes().forEach(e=>{r.push.apply(r,(0,_.Z)(n(e)))});r.length;){let n=r.shift();if(null!=n&&n.isLineBreak()){if(0===r.length)s.push(n);else{e.isInlineNode()?o.push(n):t.removeNode(n);let r=s.splice(0);0===r.length&&r.push(t.createLineBreakNode()),i.replaceChildren(r),i=t.createNodeWithEqualType(e),o.push(i)}}else s.push(n)}return i.replaceChildren(s),o},o=[];e.getChildNodes().forEach(e=>o.push.apply(o,(0,_.Z)(n(e)))),e.replaceChildren(o)}(e,t),function(e,t,n){let o=e=>{if(!e._isUnclean)return;let i=!1,r=[];e.getChildNodes().slice(0).forEach(e=>{e.isTextNode()||o(e),e.isInlineNode()&&(n||!e.isFormattingInlineNode())?(r.push.apply(r,(0,_.Z)(e.detachChildren())),t.removeNode(e),i=!0):r.push(e)}),i&&e.replaceChildren(r)};o(e)}(e,t,n),n||function(e,t,n){let o=e=>{var i,r,s,a,d,l,c,h;if(!e._isUnclean)return;let u=e._childNodes.slice();if(e.isFormattingBlockNode()){let t=e.getFormattingInlineNodeTypes();t.length>0&&u.forEach(e=>{let n=e.getOrCreateFormattingInfoForAnyNodeType();for(let e of t)n.set(e,!0)}),e.clearFormatting()}if(u.forEach(e=>o(e)),e.isFormattingInlineNode()){let t=e.getFormattingInlineNodeTypes();(t.length>0||e.hasAttributes())&&e._childNodes.forEach(n=>{if(n.isTextNode()){let o=n.getOrCreateFormattingInfo();for(let e of t)o.set(e,!0);n.applyAttributesFromDNode(e)}}),null===(i=e._parentNode)||void 0===i||i.replaceChild(e,e._childNodes.slice())}if(n){if(e.isBlockNode()&&!e.isListOrListItem()&&null!==(r=e.getParentNode())&&void 0!==r&&r.isListItem()&&(null===(d=e.getParentNode())||void 0===d||d.replaceChild(e,e.getChildNodes())),e.isListItem()&&(null===(s=e.getParentNode())||void 0===s?void 0:s.isList())===!1){let n=t.createBlockContainerNode("P",!0);n.appendChildren(e.getChildNodes()),e.getParentNode().replaceChild(e,[n])}if(e.isList()&&null!==(a=e.getParentNode())&&void 0!==a&&a.isListItem()){let t=e.getParentNode(),n=t.getChildNodes().filter(e=>!e.isTextNode()||e.getText().trim().length>0).length>=2;if(n){let n=t.getChildNodes()[0]===e;n?null===(l=t.getParentNode())||void 0===l||l.replaceChild(t,[e,t]):null===(c=t.getParentNode())||void 0===c||c.replaceChild(t,[t,e])}else null===(h=t.getParentNode())||void 0===h||h.replaceChild(t,[e])}if(e.isListItem()&&0===e._childNodes.length){let n=t.createLineBreakNode();e.appendChild(n)}}};o(e)}(e,t,o),function(e,t,n){let o=e.getChildNodes(),i=[],r=e=>{if(!e._isUnclean)return;let o=Array.from(e.getChildNodes()),s=null;for(let d=0;d<o.length;d++){var a;let l=o[d],c=l.isListOrListItem(),h=null===(a=l._parentNode)||void 0===a?void 0:a.isListOrListItem();l.isBlockNode()&&!(n&&c&&h)?(e.detachChild(l),s&&s.getChildNodes().length&&i.push(s),i.push(l),s=t.createLineNode(),r(l)):s&&s.appendChild(l)}s&&s.getChildNodes().length?i.push(s):s&&t.removeNode(s)};for(let e=0;e<o.length;e++){let t=o[e];i.push(t),r(t)}e.replaceChildren(i)}(e,t,o),function(e,t,n){let o=null,i=e=>{if(!e._isUnclean)return[e];if(e.isEmpty()&&!e.isLineBreak())return(0,f.NL)(e),e.getParentNode()&&(0,f.NL)(e.getParentNode()),t.removeNode(e),(0,f.NL)(e),[];if(e.isLineBreak()){let n=[];if(o)o=null;else{let e=t.createLineNode();e.appendChild(t.createLineBreakNode()),n.push(e)}if(!e.getNextSibling()&&!e._parentNode.isLineNode()){let e=t.createLineNode();e.appendChild(t.createLineBreakNode()),n.push(e)}return n}if(e.isLineNode())return o=null,[e];if(n&&e.isListOrListItem())return[e];if(e.isBlockNode()){let n=t.createLineNode();return n.replaceChildren(e.detachChildren()),e.getParentNode().detachChild(e),t.removeNode(e),(0,f.NL)(e),o=null,[n]}let i=null==o||e.isLineBreak();return i&&(o=t.createLineNode()),o.appendChild(e),(0,f.NL)(o),i?[o]:[]};(0,f.NL)(e);let r=[];e.getChildNodes().forEach(e=>r.push.apply(r,(0,_.Z)(i(e)))),e.replaceChildren(r)}(e,t,o),n&&function(e){e._childNodes.forEach(e=>{e.isLineNode()&&"P"!==e._tagName&&(e._tagName="P")})}(e),function(e,t,n){let o=[],i=e=>{if(!e._isUnclean)return;let t=e.getChildNodes(),r=t.length,s=[];for(let e=0;e<r;)if(t[e].isTextNode()){let i=t[e];s.push(i);let r=t[e];for(e+=1;null!==(a=t[e])&&void 0!==a&&a.isTextNode()&&(n||t[e].hasIdenticalMetaInformation(r));){var a;i.setText(i.getText()+t[e].getText()),o.push(t[e]),e+=1}}else i(t[e]),s.push(t[e]),e+=1;r!==s.length&&e.replaceChildren(s)};i(e),o.forEach(e=>t.removeNode(e))}(e,t,n),i&&function(e,t){let n=e=>{var t;e._isUnclean&&(null===(t=e.getChildNodes())||void 0===t||t.forEach(e=>{e.isTextNode()?e.normalizeSpaces():n(e)}))};n(e)}(e,0),function(e,t){let n=e=>{var t,o;e._isUnclean&&(null===(t=e.getChildNodes())||void 0===t||t.forEach(n),null!==(o=e.getFormattingInfo())&&void 0!==o&&o.get("link")&&!e.hasAttribute("href")&&e.getFormattingInfo().set("link",!1))};n(e)}(e,0),e.markAsClean(),(0,f.NL)(e,!0),this._markMeasurementEnd("cleanupNodes")},t._getCursorPos=function(){let e=window.getSelection(),t={line:0,offset:0,lineEnd:void 0,offsetEnd:void 0};if(e){if(!1===e.isCollapsed){let n=e.getRangeAt(0),o=this._createCursorPos(n.startContainer,n.startOffset,!0),i=this._createCursorPos(n.endContainer,n.endOffset,!1),r=I(e,n.commonAncestorContainer),s=r?i:o,a=r?o:i;t.line=s.line,t.offset=s.offset,t.lineEnd=a.line,t.offsetEnd=a.offset}else if(e.focusNode){let n=this._createCursorPos(e.focusNode,e.focusOffset);t.line=n.line,t.offset=n.offset}}return t},t._createCursorPos=function(e,t,n){return function(e,t,n,o,i){let r=e._domNode;if(r&&!r.contains(n))return{line:0,offset:0};let{domNode:s,charOffset:a}=P(n,o,i),d=t.getNearestNodeForDomNode(s);if(!d)return{line:0,offset:0};let l=e.collectText(),c=Math.min(a,d.collectText().length),h=d.getOwnCharacterOffsetInTree()+c,u=l.substring(0,h),f=u.split("\n").length,g=u.lastIndexOf("\n");return{line:f-1,offset:h-g-1}}(this._rootNode,this._nodeManager,e,t,n)},t._isActiveElement=function(){return document.activeElement===this._rootDomNode},t._restoreCursorPos=function(e,t,n){if(void 0===e&&(e={line:0,offset:0,lineEnd:void 0,offsetEnd:void 0}),void 0===t&&(t=!1),void 0===n&&(n=!1),n){setTimeout(()=>this._restoreCursorPos(e,t,!1),0);return}(t||this._isActiveElement())&&function(e,t,n){void 0===n&&(n={line:0,offset:0,lineEnd:void 0,offsetEnd:void 0});let o=void 0!==n.lineEnd&&n.line>n.lineEnd||void 0!==n.offsetEnd&&n.line===n.lineEnd&&n.offset>n.offsetEnd,i=S(e,t,n.line,n.offset),r=void 0!==n.lineEnd?S(e,t,n.lineEnd,n.offsetEnd):void 0;if(i)try{let e=window.getSelection(),t=(null==e?void 0:e.isCollapsed)&&e.anchorNode===e.focusNode,n=!1==!!r,s=t&&n&&function(e,t){if(!e.isCollapsed)return!1;let n=t.domNode!==(null==e?void 0:e.anchorNode),o=(null==e?void 0:e.anchorOffset)!==t.offset;return!n&&!o}(e,i),a=!t&&!n&&function(e,t,n){if(e.isCollapsed||e.anchorNode!==e.focusNode||t.domNode!==n.domNode)return!1;let o=e.anchorOffset===t.offset,i=e.focusOffset===n.offset;return!!o&&!!i}(e,i,r);if(s||a);else{let t=new Range;t.setStart(i.domNode,i.offset),r&&!o&&t.setEnd(r.domNode,r.offset),r||t.collapse(!0),e.removeAllRanges(),e.addRange(t),o&&e.extend(r.domNode,r.offset)}}catch(e){console.warn("[applyCursorPos]","cursor pos could not be set",n,e)}}(this._rootNode,this._rootDomNode,e)},t.lockUndoStack=function(e,t){void 0===t&&(t=-1);let n=0===this._undoStackLockRegistry.size;if(this._undoStackLockRegistry.add(e),n&&(this._cancelDebouncedFinalizeCommand(!1),this.batchingUndoChanges=!0,this.onUndoStackChange()),t>=0){let n=this._autoUnlockUndoTimeouts.get(e);n&&clearTimeout(n);let o=setTimeout(()=>{this.unlockUndoStack(e)},t);this._autoUnlockUndoTimeouts.set(e,o)}},t.unlockUndoStack=function(e){if(this._undoStackLockRegistry.has(e)){if(this._undoStackLockRegistry.delete(e),0===this._undoStackLockRegistry.size){var t;null===(t=this._delayedFinalizeCommandCallback)||void 0===t||t.call(this),this.batchingUndoChanges=!1,this.onUndoStackChange()}let n=this._autoUnlockUndoTimeouts.get(e);n&&clearTimeout(n)}},t.isUndoStackLocked=function(){return this._undoStackLockRegistry.size>0},t._debounceFinalizeCommand=function(e,t){this._cancelDebouncedFinalizeCommand(!1);let n=()=>{this._finalizeCommand(e,t),this.batchingUndoChanges=!1,this._delayedFinalizeCommandCallback=null,this.updatePrevCursorPos(t)};this._delayedFinalizeCommandCallback=n,this.isUndoStackLocked()||(this._debouncedTimeout=setTimeout(n,275))},t._cancelDebouncedFinalizeCommand=function(e){if(void 0===e&&(e=!1),this._debouncedTimeout){if(e){var t;null===(t=this._delayedFinalizeCommandCallback)||void 0===t||t.call(this)}clearTimeout(this._debouncedTimeout),this._debouncedTimeout=null}},t._finalizeCommand=function(e,t){if(!this._rootNode._isChanged)return;let n=function(e,t,n){let o=[],i=[];if(e._prevState&&function(e){if(!e._prevState)return!1;let t=e._childNodes.filter(t=>e._prevState.childNodes.find(e=>e.id===t.id)),n=t.map(t=>e._prevState.childNodes.findIndex(e=>e.id===t.id));for(let e=1;e<n.length;e++)if(n[e]<n[e-1])return!0;return!1}(e)){let t=e.prevToDescription(),n=e.toDescription();o.unshift(p("REPLACE_SUBTREE",[],t)),i.push(p("REPLACE_SUBTREE",[],n))}else e.getChildNodes().forEach((e,t)=>{if(!e._isChanged)return;let n=e.prevToDescription(),r=e.toDescription();void 0===n&&void 0!==r?(o.unshift(p("REMOVE_SUBTREE",[t])),i.push(p("INSERT_SUBTREE",[t],r))):void 0!==n&&void 0!==r&&(o.unshift(p("REPLACE_SUBTREE",[t],n)),i.push(p("REPLACE_SUBTREE",[t],r)))}),e._prevState&&e._prevState.childNodes.forEach((t,n)=>{if(t._parentNode!==e){let e=t.prevToDescription();o.push(p("INSERT_SUBTREE",[n],e)),i.unshift(p("REMOVE_SUBTREE",[n]))}});return o.push(p("SET_CURSOR",[],t)),i.push(p("SET_CURSOR",[],n)),{type:"command",backwardActions:o,forwardActions:i}}(this._rootNode,e,t);n&&this._undoStack.pushUndoCommand(n),this._rootNode.resetRecordedChanges()},t._applyCommand=function(e,t){if(void 0===t&&(t=!1),void 0!==e){let n=function(e,t,n,o,i){let r=o,s=i?e.forwardActions:e.backwardActions;return s.forEach(e=>{let{path:o}=e;switch(e.action){case"INSERT_SUBTREE":(function(e,t,n,o){let i=t[t.length-1],r=o.createNodeFromDescription(n);e.insertChildren(i,[r])})(n.getNodeForPath(t,o.slice(0,-1)),o.slice(-1),e.nodeDescription,n);break;case"REMOVE_SUBTREE":(function(e){let t=e._parentNode;if(!t)throw Error("Can't remove root node");t.detachChild(e)})(n.getNodeForPath(t,o));break;case"REPLACE_SUBTREE":(function(e,t,n,o){if(e===n){(function(e,t,n){let o=n.createNodeFromDescription(e);t.replaceChildren(o._childNodes.slice()),n.removeNode(o),(0,f.NL)(t)})(t,n,o);return}let i=e._parentNode,r=i._childNodes.indexOf(e),s=o.createNodeFromDescription(t);i.replaceChild(r,[s])})(n.getNodeForPath(t,o),e.nodeDescription,t,n);break;case"SET_CURSOR":r=e.nodeDescription}}),r}(e,this._rootNode,this._nodeManager,this._getCursorPos(),t);this._cleanupNodes(),this._rootNode.resetRecordedChanges(),this._finalizeNodesBeforeUpdate(U.UNDO_REDO),this._updateDom(),this._prevDOMContent=this._rootDomNode.innerHTML,this.updatePrevCursorPos(),this._restoreCursorPos(n,!0,!this._isActiveElement()),this.onChange()}},t._finalizeNodesBeforeUpdate=function(e,t){if(this._markMeasurementStart("finalizeNodes"),this._doFinalizeNodes){let n=t||this.getChangedParagraphs();try{this._doFinalizeNodes(this._nodeManager,n,e)}catch(e){setTimeout(()=>{throw e})}}this._markMeasurementEnd("finalizeNodes")},t.getChangedParagraphs=function(){return this._rootNode.getChildNodes().filter(e=>e._isChanged)},t.isCompositionInProgress=function(){return this.compositionStarted},t.hasAnyFormatting=function(){return this._rootNode.containsAnyFormatting()},t.getHtmlForRange=function(e,t,n){return void 0===n&&(n=this._rootNode),(0,B._n)(n,e,t)},t.getHtmlForRangeWithBlocks=function(e,t,n){void 0===n&&(n=this._rootNode);let o=n.getChildAtCharacterOffset(e),i=n.getChildAtCharacterOffset(e+t),r=null==o?void 0:o.getParentBlockNode();return r&&r===(null==i?void 0:i.getParentBlockNode())&&t<r.collectText().length-1?(0,B._n)(n,e,t):(0,B._A)(n,e,t)},t.getParagraphInfoForCharacterOffset=function(e){return(0,B.GB)(this._rootNode,e)},t.toDescription=function(){return this._rootNode.toDescription()},t.normalizeTextFormattingHotkeys=function(e){let t=e.key.toUpperCase();if(t&&((0,T.ED)()&&e.ctrlKey||(0,T.V5)()&&e.metaKey)){let t=(0,T.ZT)().trim().replaceAll("\n",""),n=this.getText().trim().replaceAll("\n",""),o=t===n,r=e.code,s=$[r];if(!s)return;if("formatBlock"===s.command){let e=new Set(this.getTextNodesForSelection().map(e=>e.getParentBlockNode()));o=this._rootNode._childNodes.every(t=>e.has(t))}s&&s.alt===e.altKey&&s.shift===e.shiftKey&&(i(s.command,s.commandType),this.onFormattingShortcutUsed(s.trackingID,o))}else if(this._config_captureTab&&"TAB"===t){var n,o;let t=this.getTextNodesForSelection(),r=null===(n=null===(o=window.getSelection())||void 0===o?void 0:o.isCollapsed)||void 0===n||n,s=t.length>0,a=t.every(e=>e.isWithinList()),d=e.shiftKey,l=1===t.length?t[0].findParent(e=>e.isListItem()):null,c=null!=l&&0===this.getAbsoluteCursor(l);s&&a&&(d||!r||c)&&i(d?"outdent":"indent")}function i(t,n){void 0===n&&(n=void 0),e.preventDefault(),e.stopPropagation(),document.execCommand(t,!1,n)}},(0,s.Z)(e,[{key:"previousCursorPosition",get:function(){return this.prevCursorPos}},{key:"latestCursorPosition",get:function(){return this.latestCursorPos}}]),e}(),$={Digit0:{alt:!0,shift:!1,command:"formatBlock",commandType:"<P>",trackingID:M.T.P},Digit1:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H1>",trackingID:M.T.H1},Digit2:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H2>",trackingID:M.T.H2},Digit3:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H3>",trackingID:M.T.H3},Digit4:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H4>",trackingID:M.T.H4},Digit5:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H5>",trackingID:M.T.H5},Digit6:{alt:!0,shift:!1,command:"formatBlock",commandType:"<H6>",trackingID:M.T.H6},Digit7:{alt:!0,shift:!1,command:"formatBlock",commandType:"<BLOCKQUOTE>",trackingID:M.T.BLOCKQUOTE},Digit8:{alt:!0,shift:!1,command:"formatBlock",commandType:"<PRE>",trackingID:M.T.PRE},KeyL:{alt:!1,shift:!0,command:"insertUnorderedList",commandType:void 0,trackingID:M.T.UL},KeyO:{alt:!1,shift:!0,command:"insertOrderedList",commandType:void 0,trackingID:M.T.OL},KeyB:{alt:!1,shift:!1,command:"bold",commandType:void 0,trackingID:M.T.BOLD},KeyI:{alt:!1,shift:!1,command:"italic",commandType:void 0,trackingID:M.T.ITALIC},KeyU:{alt:!1,shift:!1,command:"underline",commandType:void 0,trackingID:M.T.UNDERLINE},Comma:{alt:!1,shift:!1,command:"subscript",commandType:void 0,trackingID:M.T.SUBSCRIPT},Period:{alt:!1,shift:!1,command:"superscript",commandType:void 0,trackingID:M.T.SUPERSCRIPT}},Z={dTextarea:K,dNode:f.oS,NodeTypes:f.$P,ActionTypes:{INSERT_SUBTREE:"INSERT_SUBTREE",REMOVE_SUBTREE:"REMOVE_SUBTREE",REPLACE_SUBTREE:"REPLACE_SUBTREE",SET_CURSOR:"SET_CURSOR"}};"undefined"!=typeof window&&null!==(i=window)&&void 0!==i&&i.M&&window.M.registerAsync("dTextarea",Z);let G={maxContentLength:null,removeTextFormatting:!0,normalizeSpaces:!0,flatten:!0},X=function(e){function t(t,n,o){var i;return void 0===n&&(n={}),void 0===o&&(o=!1),(i=e.call(this)||this).name=t,i.adjustedConfig=n,i._dbg=o,i._onblur=null,i._onfocus=null,i.wasChanged=!1,i.textarea=null,i.eventListenerMap=void 0,i.div=null,i.htmlPlaceholder=null,i.attributesChangedBeforeInit=new Set,i.eventListenerMap=new Map,i}(0,a.Z)(t,e);var n=t.prototype;return n.attributeChangedCallback=function(e,t,n){if(!this.textarea){this.attributesChangedBeforeInit.add(e);return}switch(e){case"value":t!==n&&this.textarea.updateText(n);break;case"disabled":this._updateEnabled();break;case"placeholder":this._updatePlaceholderState();break;case"data-remove-rtf":if(t!==n){var o;null===(o=this.div)||void 0===o||o.setAttribute(e,n),this.textarea._config_removeTextFormatting="false"!==n}break;default:if(!this.div){this.warnNotInitialized(`Prop ${e}`),this.attributesChangedBeforeInit.add(e);return}this.div.setAttribute(e,n)}},n._updateEnabled=function(){return this.div?this.disabled?(this.div.setAttribute("contenteditable","false"),this.div.setAttribute("aria-disabled","true"),this.div.setAttribute("tabindex","-1"),!1):(this.div.setAttribute("contenteditable","true"),this.div.setAttribute("aria-disabled","false"),this.div.setAttribute("tabindex","0"),!0):(this.warnNotInitialized(this._updateEnabled.name),!1)},n.addEventListener=function(t,n,o){if(!this.div){this.warnNotInitialized(this.addEventListener.name);return}if(null!=o&&o.doNotModify){this.div.addEventListener(t,n,o);return}let i=()=>{};switch(t){case"blur":case"focus":i=e=>{n instanceof Function?n(e):n.handleEvent(e)},this.div.addEventListener(t,i,o);break;default:e.prototype.addEventListener.call(this,t,n,o)}i&&this.eventListenerMap.set(n,i)},n.removeEventListener=function(t,n,o){let i=n,r=this.eventListenerMap.get(n);r&&(i=r,this.eventListenerMap.delete(n)),e.prototype.removeEventListener.call(this,t,i,o)},n.setSelectionRange=function(e,t){if(!this.textarea){this.warnNotInitialized(this.setSelectionRange.name);return}let n=null!=e?e:0;if(n<0||t&&t<n){this.setSelectionRange(null!=t?t:0);return}let o=this.textarea.getFirstLevelNodes(),i=r(n);if(t&&n!==t){let{line:e,offset:n}=r(t);i.lineEnd=e,i.offsetEnd=n}function r(e){let t=0,n=e;for(;t<o.length&&n>=o[t].collectText().length;)n-=o[t].collectText().length,t+=1;return t>=o.length?{line:o.length-1,offset:o[o.length-1].collectText().length}:{line:t,offset:n}}this.textarea._restoreCursorPos(i)},n._getSelectionRange=function(){var e,t,n,o;if(!this.textarea)return this.warnNotInitialized(this._getSelectionRange.name),{from:0,to:0};let i=this.textarea.getText(),r=i.split("\n"),s=this.textarea._getCursorPos(),a={from:null!==(e=d(r,s.line,s.offset))&&void 0!==e?e:0,to:null!==(t=d(r,null!==(n=s.lineEnd)&&void 0!==n?n:s.line,null!==(o=s.offsetEnd)&&void 0!==o?o:s.offset))&&void 0!==t?t:0};return a;function d(e,t,n){t>e.length&&(l.uT("[getCharIndex]: index requested for line number larger than given lines",{level:"warning",extra:{line:t,offset:n,lines:e.length}}),t=e.length);let o=0;for(let n=0;n<t;n++)o+=e[n].length+1;return o+n}},n.initContenteditable=function(e){e.setAttribute("contenteditable","true"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline","true"),e.setAttribute("tabindex","0"),e.setAttribute("data-content","true")},n.initPlaceholder=function(e){e.setAttribute("aria-hidden","true"),e.setAttribute("tabIndex","-1"),e.setAttribute("dir","auto")},n.connectedCallback=function(){var e;this.div=this.querySelector('[data-content="true"]'),this.div||(this.div=document.createElement("div"),this.firstChild?this.insertBefore(this.div,this.firstChild):this.appendChild(this.div)),this.initContenteditable(this.div),this.htmlPlaceholder=this.querySelector('[data-placeholder="true"]'),this.htmlPlaceholder&&this.initPlaceholder(this.htmlPlaceholder);let t=this.getAttribute("data-remove-rtf");t&&(this.adjustedConfig.removeTextFormatting="false"!==t),this.textarea=new K(this.div,{...G,...this.adjustedConfig,_dbg:this._dbg},this.name);let n=this.getAttribute("value");n&&this.textarea.updateText(n),this._updatePlaceholderState(),this._updateEnabled();let o=this.attributesChangedBeforeInit.keys();for(let e of o){let t=this.getAttribute(e);null!=t&&this.div.setAttribute(e,t)}this.attributesChangedBeforeInit.clear(),this.addEventListener("focus",()=>{this.wasChanged=!1}),null===(e=this.div)||void 0===e||e.addEventListener("paste",()=>{var e;null!==(e=this.textarea)&&void 0!==e&&e._config_removeTextFormatting||(this.div.classList.add("no-pre-wrap"),setTimeout(()=>this.div.classList.remove("no-pre-wrap"),0))}),this.textarea.onChange.push(()=>{this._updatePlaceholderState(),this.hasFocus()&&(this.wasChanged=!0)}),this.textarea.onCompositionModeChange.push(()=>{this._updatePlaceholderState()}),this.addEventListener("blur",()=>{this.wasChanged&&(this.dispatchChangeEvent(),this.wasChanged=!1)})},n.dispatchChangeEvent=function(){let e=document.createEvent("Event");e.initEvent("change",!0,!0),this.dispatchEvent(e)},n.hasFocus=function(){let e=document.activeElement;if(e===document.body)return!1;for(;e;){if(e===this.div)return!0;e=e.parentElement}return!1},n.select=function(){if(!this.textarea){this.warnNotInitialized(this.select.name);return}this.focus();let e=this.textarea.getFirstLevelNodes();e.length>0?this.textarea._restoreCursorPos({line:0,offset:0,lineEnd:e.length-1,offsetEnd:e[e.length-1].collectText().length}):this.textarea._restoreCursorPos({line:0,offset:0,lineEnd:0,offsetEnd:0})},n.focus=function(){if(!this.textarea||!this.div){this.warnNotInitialized(this.focus.name);return}this.textarea._isActiveElement()||(this.div.focus(),this.textarea._restoreCursorPos(this.textarea.latestCursorPosition))},n._updatePlaceholderState=function(){var e,t,n,o,i,r;if(!this.textarea||!this.div){this.warnNotInitialized(this._updatePlaceholderState.name);return}if(this.htmlPlaceholder)this.div.removeAttribute("placeholder"),""!==this.value||this.textarea.isCompositionInProgress()?null===(r=this.htmlPlaceholder)||void 0===r||r.classList.remove("show"):null===(i=this.htmlPlaceholder)||void 0===i||i.classList.add("show");else{let e="";""!==this.value||this.textarea.isCompositionInProgress()||(e=this.getAttribute("placeholder")||""),e?this.div.setAttribute("placeholder",e):this.div.removeAttribute("placeholder")}null===(e=this.div)||void 0===e||e.setAttribute("aria-placeholder",null!==(t=null!==(n=this.getAttribute("placeholder"))&&void 0!==n?n:null===(o=this.htmlPlaceholder)||void 0===o?void 0:o.innerText)&&void 0!==t?t:"")},n.warnNotInitialized=function(e){console.warn(`"${e} was called before the component was attached to the DOM.`)},(0,s.Z)(t,[{key:"disabled",get:function(){let e=this.getAttribute("disabled");return null!=e&&"false"!==e},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}},{key:"dTextarea",get:function(){return this.textarea}},{key:"value",get:function(){return this.textarea?this.textarea.getText():(this.warnNotInitialized("get value"),"")},set:function(e){if(!this.textarea){this.warnNotInitialized("set value");return}this.textarea.updateText(null!=e?e:"")}},{key:"onblur",get:function(){return this._onblur},set:function(e){this._onblur&&this.removeEventListener("blur",this._onblur),this._onblur=e,e&&e instanceof Function&&this.addEventListener("blur",e)}},{key:"onfocus",get:function(){return this._onfocus},set:function(e){this._onfocus&&this.removeEventListener("focus",this._onfocus),this._onfocus=e,e&&e instanceof Function&&this.addEventListener("focus",e)}},{key:"selectionStart",get:function(){let{from:e,to:t}=this._getSelectionRange();return Math.min(e,t)},set:function(e){this.setSelectionRange(e,this.selectionEnd)}},{key:"selectionEnd",get:function(){let{from:e,to:t}=this._getSelectionRange();return Math.max(e,t)},set:function(e){this.setSelectionRange(this.selectionStart,e)}}],[{key:"observedAttributes",get:function(){return["value","disabled","placeholder","aria-labelledby","data-remove-rtf","lang","spellcheck","data-gramm","data-gramm_editor","data-enable-grammarly","dir"]}}]),t}((0,d.Z)(HTMLElement)),V=!1;try{"undefined"!=typeof window&&(customElements.define("d-textarea",X),V=!0)}catch(e){console.warn("[dTextarea Web Component]","customElement definition failed, dTextarea not usable")}function q(){return V}"undefined"!=typeof window&&null!==(r=window)&&void 0!==r&&r.M&&window.M.registerAsync("dTextareaComponent",X)},69764:function(e,t,n){var o,i;n.d(t,{T:function(){return s},z:function(){return r}});let r=((o={})[o.UNSPECIFIED=0]="UNSPECIFIED",o[o.INTERNAL=1]="INTERNAL",o[o.DOMCHANGES=2]="DOMCHANGES",o),s=((i={})[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.BOLD=1]="BOLD",i[i.ITALIC=2]="ITALIC",i[i.UNDERLINE=3]="UNDERLINE",i[i.STRIKETHROUGH=4]="STRIKETHROUGH",i[i.SUBSCRIPT=5]="SUBSCRIPT",i[i.SUPERSCRIPT=6]="SUPERSCRIPT",i[i.H1=7]="H1",i[i.H2=8]="H2",i[i.H3=9]="H3",i[i.H4=10]="H4",i[i.H5=11]="H5",i[i.H6=12]="H6",i[i.BLOCKQUOTE=13]="BLOCKQUOTE",i[i.PRE=14]="PRE",i[i.P=15]="P",i[i.UL=16]="UL",i[i.OL=17]="OL",i)}}]);