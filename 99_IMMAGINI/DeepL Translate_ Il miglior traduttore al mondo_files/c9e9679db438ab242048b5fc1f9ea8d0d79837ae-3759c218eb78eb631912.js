(self.webpackChunk_deepl_gatsby=self.webpackChunk_deepl_gatsby||[]).push([[7215],{904:function(e,t,r){"use strict";r(61606).Z.defineType("/translator/common/reloadHelper",["/translator/core/predefinedState","/translator/core/config","/translator/core/textareas"],(e,t,r)=>{let a,n,o,l;async function i(){let r=await e.serializeActiveState("full");try{window.sessionStorage.setItem("LMT_reloadState",JSON.stringify({state:r,isPro:t.get("CONFIG__IS_PRO")}))}catch(e){console.error(e)}}async function s(){await i(),window.location.reload()}let c=0;function u(){c=Date.now(),r.onSourceTextChanged.push(()=>{c=Date.now()}),r.onTargetTextChanged.push(()=>{c=Date.now()})}async function d(){if(clearTimeout(o),!a)return;let e=(a-Date.now())/1e3,t=!1,l=0,s=(Date.now()-c)/1e3,u=r.isSourceTextEmpty();e<=0?t=!0:e<=60?(t=u?s>2:s>10,l=1):e<=120?(t=u?s>10:s>30,l=2):e<=300?(t=u?s>30:s>60,l=10):e<=1800&&(t=u?s>60:s>300,l=30),t?(await i(),n()):o=setTimeout(d,1e3*l)}try{let e=window.sessionStorage.getItem("LMT_reloadState");e&&(window.sessionStorage.removeItem("LMT_reloadState"),l=JSON.parse(e))}catch(e){console.error(e)}return l&&(l.isPro&&!t.get("CONFIG__IS_PRO")||e.applyPredefinedState(l.state)),{prepareReload:i,reload:s,scheduleCarefulReload:function(e,t){void 0===t&&(t=()=>window.location.reload()),u();let r=1e3*e+Date.now();(!a||r<a)&&(a=r),n=t,d()},initListeners:u}})},49199:function(e,t,r){"use strict";var a=r(61606),n=r(30171),o=r(98808);a.Z.defineType("/translator/common/shareTargetText",["/translator/webTranslatorCore","/translator/core/config","/translator/core/textareas","/translator/common/share","/translator/common/shareUrl"],(e,t,r,a,l)=>{let i=(0,o.f)(),s=(0,o.f)(),c=(0,n.G7)([r.isTargetTextEmpty],e=>!e);return{canShare:c,getShareData:()=>{let{url:t,shortened:n,fullTargetText:o}=l.createShareUrlByLangContext(e.getActiveLangContext(),a.targetTextHasBeenAltered(e.getActiveLangContext()));return{originalText:r.getTargetText(),text:o,url:t,shortened:n}},onShareStarted:i,onShareFinished:s,useTranslatedByFooter:!t.get("CONFIG__IS_PRO")}})},85606:function(e,t,r){"use strict";var a=r(61606),n=r(30171),o=r(67974),l=r(67977),i=r(40977);r(12959);let s=["1","7","30"];a.Z.defineType("/translator/common/translatorStats",["/translator/core/translationBackend","/translator/core/textareas","/translator/environment/analyticsSession","/translator/core/config","/translator/environment/sendAnalytics"],(e,t,r,a,c)=>{let{translationBackend:u}=e,{characterVolumeBlockDurationInMs:d}={};d&&console.warn("[translatorStats]","init");let g=d&&parseInt(d,10)||864e5;(0,n.S1)(u,e=>{e.onTranslationsReceived.push((e,t,a,n)=>{r.registerUserActivity();let o=new Date().toLocaleDateString(),i=(0,l.fy)("g","");i()!=o&&(i(o),(0,l.mq)("h",e=>e+1,0));let s=0;t.forEach(e=>{let{beams:t}=e;Array.isArray(t)&&t.length>0&&(t[0].sentences?t[0].sentences.forEach(e=>{s+=(e.text||"").length}):s+=(t[0].postprocessed_sentence||"").length)});let c=e.source_lang+n.target_lang,u=Array.isArray(a)&&a.length>0?a[0].kind:"";"default"!=u?"alternatives_at_position"==u&&(0,l.mq)("d",e=>e+1,0):((0,l.mq)("a2",e=>e+s,0),4==c.length&&(0,l.mq)("b",e=>(e[c]=s+(void 0===e[c]?0:e[c]),JSON.parse(JSON.stringify(e))),{}))})});let f=()=>{let e=localStorage.getItem("LMT_text_translator_usage_free");return e?JSON.parse(e):{}},m=()=>{let{characterVolumeByDays:e={}}=f();return e},p=e=>{let t=f();for(let r in e)t[r]=e[r];localStorage.setItem("LMT_text_translator_usage_free",JSON.stringify(t))},S=e=>{var t;let{characterVolumeByDays:r={},characterVolume:n=0}=f(),o=a.get("CONFIG__IS_PRO"),l=o?0:Math.min(e,null!==(t=a.get("CONFIG__MAX_NUM_CHARACTERS"))&&void 0!==t?t:5e3);p({characterVolume:n+l,characterVolumeByDays:Object.fromEntries(new Map(s.map(t=>{var a,n,o,l,i;return[t,{timestamp:null!==(a=null===(n=r[t])||void 0===n?void 0:n.timestamp)&&void 0!==a?a:Date.now(),characterVolume:(null!==(o=null===(l=r[t])||void 0===l?void 0:l.characterVolume)&&void 0!==o?o:0)+e,...null!==(i=r[t])&&void 0!==i&&i.previousVolume?{previousVolume:r[t].previousVolume}:{}}]})))})},y=()=>{let e=Date.now(),t=Object.fromEntries(new Map(s.map(t=>[t,{timestamp:e,characterVolume:0}])));p({characterVolumeByDays:t,firstCharacterEntered:e})},h=(e,t)=>{c.send({id:i.qb.EVENT_ID_CHARACTER_VOLUME,data:{characterVolumeData:{characterVolumePeriod:{1:1,7:2,30:3}[e],characterVolume:t}}})},v=()=>{let e=Date.now(),t=m();for(let r in t){let{timestamp:a,characterVolume:n}=t[r];if(e-parseInt(a,10)>=864e5*parseInt(r,10)){h(parseInt(r,10),parseInt(n,10));let t=f();localStorage.setItem("LMT_text_translator_usage_free",JSON.stringify({...t,characterVolumeByDays:{...null==t?void 0:t.characterVolumeByDays,[r]:{timestamp:e,characterVolume:0,previousVolume:n}}}))}}},_=(e,t)=>{if(t===e)return -1;let r=0;for(;e[r]&&e[r]===t[r];)r+=1;return r},T=(e,t)=>{if(e===t)return -1;let r=e.length-1,a=t.length-1;for(;r>=0&&a>=0&&e[r]===t[a];)r-=1,a-=1;return r},w=(e,t)=>{let r=_(e,t),a=T(e,t),n=e.substring(r,a+1);return r>a?Math.max(e.length-t.length,0):n.length},C=0,M=t.getSourceText();t.onSourceTextChanged.push((e,a)=>{if("typing"===a&&(C+=1,(0,o.wx)("typed_chars",()=>{(0,l.mq)("c",e=>e+C,0),C=0},3e3)),["paste","predefinedState","replace","typing","update"].includes(a)){var n;let{characterVolumeByDays:r={},firstCharacterEntered:o,characterVolumeReset:l=0}=f();null!==(n=Object.keys(r))&&void 0!==n&&n.length?v():y(),o||p({firstCharacterEntered:Date.now()}),(!l||l+g<=Date.now())&&p({characterVolumeReset:Date.now(),characterVolume:0}),S("update"===a?e.length:w(e,M)),M=t.getSourceText()}r.registerUserActivity()}),t.onTargetTextChanged.push(()=>{r.registerUserActivity()})})},95803:function(e,t,r){"use strict";var a=r(30171),n=r(98808),o=r(61606),l=r(12959),i={ad:!0},s=r(94232);let c="formality/ad";o.Z.defineType("/translator/formality/ad",["webTranslatorCore","core/translateSourceSentences","core/config","formality/core","core/textareas"],(e,t,r,o,u)=>{let d="1"===l.Z.dev_formalityAd||i.ad&&!r.get("CONFIG__IS_PRO")&&!r.get("isWriteMode"),g=(0,a.S3)(!1),f=(0,n.f)(),m=u.getTargetDTextarea();function p(){g()&&(g(!1),setTimeout(()=>{null==m||m.unlockUndoStack(c)},10))}return g.onValueChanged.push(e=>{e||o.activeFormalityMode(s.H.AUTO)}),t.onTargetSentencesHaveChanged.push(()=>{d&&p()}),(0,a.S1)([o.activeFormalityMode],e=>{g()&&p()}),(0,a.S1)([o.activeFormalityModeManuallySelected],e=>{d&&e&&t.onTargetSentencesHaveChanged.push(()=>(null==m||m.lockUndoStack(c),setTimeout(()=>{g(!0)},1e3),"REMOVE"))}),e.features.with(["/translator/common/popups"],e=>{e.onHide.push(()=>{g(!1)})}),{isAdVisible:g,closeAd:p,onProPageRequested:f}})},64:function(e,t,r){"use strict";var a=r(61606),n=r(12959),o=r(98808),l=r(30171),i=r(94232);let s={AUTO:"auto",FORMAL:"formal",INFORMAL:"informal"};a.Z.defineType("/translator/formality/core",["core/languageManagement","core/retranslationServices","webTranslatorCore","/translator/formality/persist","/translator/core/config","/translator/core/predefinedState"],(e,t,r,a,c,u)=>{var d;let g=c.get("CONFIG__IS_PRO"),{lang:f,variant:m}=e.getSelectedTargetLangSettings(),p=(0,l.S3)(m||f),S=(0,l.S3)(e.getSelectedSourceLang()),y=null!==(d=a.persistedFormalityMode())&&void 0!==d?d:null,h=(0,l.S3)(null),v=(0,l.S3)(0),_=(0,o.f)(),T=(0,l.S3)(y),w=(e,t)=>{var a,o;let[l]=e.split("-"),i=r._internalLanguageManagement.langConfig[null!==(a=null==l?void 0:l.toUpperCase())&&void 0!==a?a:""],s=!!(null!==(o=i.formalitySourceLangExclusions)&&void 0!==o&&o.includes(t.toUpperCase())),{formalityModes:c}=i;return s&&(c=[]),!c.length&&n.Z.dev_enableFormality&&(c=["informal","formal"]),c};function C(e){let{langContext:t,formality:r}=e;t.setTranslationJobParams("translationFormality",{formality:r===i.H.AUTO?void 0:r})}return(0,l.S1)([T],e=>{e&&(h(e),a.persistedFormalityMode(e),v(v()+1),_())}),e.onSelectedTargetLangSettingsChanged.push(e=>{let{lang:t,variant:r}=e;t&&p(r||t),r?p(r):t&&p(t)}),e.onSelectedSourceLangChanged.push(e=>{e&&S(e)}),e.onSourceLangDetected.push(e=>{e&&S(e)}),(0,l.S1)([p,S],(e,t)=>{if(g){let r=w(e,t);if(r.includes(h()))return;let n=a.persistedFormalityMode();if(r.includes(n)){h(n),T(n);return}}h("auto"),T(null)}),(0,l.S1)([p,h],(r,a)=>{(function(r){let{targetLangCode:a,formalityMode:n}=r;C({langContext:e.getActiveLangContext(),formality:n});let o=u.isInPredefinedState()&&u.hasTargetText();o||t.retranslateEverything()})({targetLangCode:(r||"").toLowerCase(),formalityMode:a}),a===i.H.AUTO&&T(null)}),e.doPrepareNewLangContext.push(e=>{C({langContext:e,formality:h()})}),{FORMALITY_MODES:s,targetLang:p,sourceLang:S,activeFormalityMode:h,activeFormalityModeManuallySelected:T.asReadOnly(),numberOfTimesFormalitySelected:v,onActiveFormalityModeManuallySelected:_,getAvailableFormalityModesForLang:w,setUserSelectedMode:function(e){let r=u.isInPredefinedState();u.leavePredefinedState(),e!==T()?T(e):r&&t.retranslateEverything()}}})},54791:function(e,t,r){"use strict";var a=r(4769),n=r(30171),o=r(61606),l=r(94232),i=r(84627);o.Z.defineType("/translator/formality",["webTranslatorCore","/translator/core/config","/translator/formality/core","/translator/common/openPage"],(e,t,r,o)=>{let{requestProPage:s}=o,c=(0,i.fo)(),u=(0,n.S3)(!1),d=(0,n.G7)(r.targetLang,e=>e.toLowerCase()),g=(0,n.G7)(r.sourceLang,e=>e.toLowerCase()),f=(0,n.G7)([d,g],(e,t)=>(function(e,t){if(void 0===e&&(e=""),void 0===t&&(t=""),!e)return[];let n=r.getAvailableFormalityModesForLang(e,t),o=[l.H.AUTO].concat((0,a.Z)(n));return o})(e.toLowerCase(),t.toLowerCase())),m=(0,n.G7)(f,e=>e.includes(l.H.AUTO)),p=(0,n.G7)(f,e=>e.includes(l.H.FORMAL)),S=(0,n.G7)(f,e=>e.includes(l.H.INFORMAL)),y=(0,n.G7)([p,S],(e,r)=>(e||r)&&!t.get("isWriteMode"));return e.features.with(["/translator/formality/ad"],e=>{(0,n.S1)([e.isAdVisible],e=>u(e))}),{showProAds:!t.get("CONFIG__IS_PRO")&&!t.get("isWriteMode"),isAvailable:y,hasModeAuto:m,hasModeInformal:S,hasModeFormal:p,activeMode:r.activeFormalityMode,updateMode:function(e){r.setUserSelectedMode(e)},openProPage:()=>{c(),s({cta:"DuSie"})},onProPageRequested:c,isDisabled:u.asReadOnly()}})},7545:function(e,t,r){"use strict";var a=r(75671),n=r(30171);r(61606).Z.defineType("/translator/formality/persist",["/translator/core/config"],e=>{let t=e.get("CONFIG__IS_PRO");return{persistedFormalityMode:(()=>{if(!t)return(0,n.S3)(null);let e=function(){try{let e=window.localStorage.getItem("LMT_formality");if(!e)return;let t=JSON.parse(e);if(!t._persist)return;window.localStorage.removeItem("LMT_formality");let r=JSON.parse(t.preferredMode);return(null==r?void 0:r._value)||void 0}catch{return}}();return(0,a.O)("LMT_formality.preferredMode",e,2592e3)})()}})},50521:function(e,t,r){"use strict";var a;r.d(t,{S:function(){return n},r:function(){return o}});let n=((a={}).UNKNOWN="",a.EN="EN",a.DE="DE",a),o={lang:n.EN,variant:"en-GB"}},56141:function(e,t,r){var a=r(32866);e.exports=function(e,t){return a(e,t)}}}]);